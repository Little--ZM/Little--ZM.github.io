<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>å¾…è‘¡è„å—–é€</title>
  <subtitle>ä½ è¯´å•¥ï¼Ÿ</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2017-10-14T08:19:42.000Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>æœ±è€å¸ˆ&amp;æ•å“¥</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>kotlinå­¦ä¹ 1 ä¸ºä½•å­¦ä¹ kotlin</title>
    <link href="http://yoursite.com/2017/10/14/2017-10-14/"/>
    <id>http://yoursite.com/2017/10/14/2017-10-14/</id>
    <published>2017-10-14T07:42:07.000Z</published>
    <updated>2017-10-14T08:19:42.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-ä¸ºä½•ä½¿ç”¨kotlin"><a href="#1-ä¸ºä½•ä½¿ç”¨kotlin" class="headerlink" title="1 ä¸ºä½•ä½¿ç”¨kotlin"></a>1 ä¸ºä½•ä½¿ç”¨kotlin</h2><ul>
<li>è¿™æ˜¯ä¸€é—¨å¼ºåŠ¿æŠ€æœ¯</li>
</ul>
<p>è¯­è¨€é‚£ä¹ˆå¤šï¼›ä¸å¯èƒ½ä»€ä¹ˆè¯­è¨€éƒ½å­¦ä¹ ã€‚å­¦ä¹ çš„ä¸€å®šæ˜¯è¦æœ‰æ”¯æ’‘æœ‰å‰æ™¯çš„è¯­è¨€ã€‚æ¯”å¦‚è‹¹æœçš„<code>swift</code>ï¼›å³ä½¿æ˜¯æœ‰å‘¢ä¹ˆå¤šé—®é¢˜ï¼›ä½†æ˜¯ç”±äºæœ‰è‹¹æœçš„èƒŒä¹¦</p>
<ul>
<li>ä»–å¯ä»¥å’Œjavaè¿›è¡Œç›¸äº’çš„è°ƒç”¨</li>
<li>ä»–è§£å†³äº†javaæ— æ³•é€šè¿‡è¿­ä»£è§£å†³çš„é—®é¢˜</li>
<li>å·²ç»æˆä¸ºå®‰å“çš„å®˜æ–¹æ”¯æŒè¯­è¨€ï¼Œå‘å±•å‰æ™¯å¾ˆå¥½</li>
<li>spring5 ä¹Ÿæä¾›äº†å¯¹kotlinçš„åŸç”Ÿæ”¯æŒ</li>
<li>å®˜æ–¹æ–‡æ¡£é½å…¨å¥½ç”¨</li>
</ul>
<blockquote>
<p><a href="http://kotlinlang.org/docs/reference/basic-syntax.html" target="_blank" rel="external">http://kotlinlang.org/docs/reference/basic-syntax.html</a><br>å¯æ‰§è¡Œ</p>
</blockquote>
<h3 id="1-2-kotlin-çš„ç‰¹ç‚¹"><a href="#1-2-kotlin-çš„ç‰¹ç‚¹" class="headerlink" title="1.2 kotlin çš„ç‰¹ç‚¹"></a>1.2 kotlin çš„ç‰¹ç‚¹</h3><p><img src="http://static.zybuluo.com/zhumin1990719/5raonicmc2dqbskdf001hafg/image_1bs6sjqm91tu3k8fu8a1l4ok8a9.png" alt="image_1bs6sjqm91tu3k8fu8a1l4ok8a9.png-80.9kB"></p>
<ul>
<li><p>ç®€æ´ï¼›ä¸€è¡Œä»£ç è§£å†³æ‰€æœ‰ <code>getter</code> å’Œ <code>setter</code>; <code>it</code> è¯­æ³•ç³–ç­‰ç­‰<br><img src="http://static.zybuluo.com/zhumin1990719/8xq7h590sr000r5ze0snl7u2/image_1bs6tdkff1ce325evtb1pia16aom.png" alt="image_1bs6tdkff1ce325evtb1pia16aom.png-134.7kB"></p>
</li>
<li><p>å®‰å…¨ï¼›ä½¿ç”¨ <code>optional</code> é¿å…NPE</p>
</li>
<li>ç›¸äº’æ“ä½œï¼›å…¼å®¹æ‰€æœ‰jvm å’Œ Androidçš„ç¬¬ä¸‰æ–¹åº“</li>
<li>è‰¯å¥½çš„å·¥å…·æ”¯æŒ</li>
</ul>
<h2 id="2-ç®€å•ä»£ç ç¤ºä¾‹"><a href="#2-ç®€å•ä»£ç ç¤ºä¾‹" class="headerlink" title="2 ç®€å•ä»£ç ç¤ºä¾‹"></a>2 ç®€å•ä»£ç ç¤ºä¾‹</h2><p>é€šè¿‡ intellijï¼›æ–°å»ºä¸€ä¸ª <code>kotlin</code> çš„é¡¹ç›®ï¼›æ–°å»ºä¸€ä¸ª <code>kotlin</code> æ–‡ä»¶ï¼›</p>
<p><img src="http://static.zybuluo.com/zhumin1990719/0g1fq8rd1lj6784rr4ptupgt/image_1bs6tp5vvc47ho929omcq1p9213.png" alt="image_1bs6tp5vvc47ho929omcq1p9213.png-59.8kB"></p>
<p>å®˜ç½‘ä¸Šæœ‰æ¸…æ™°çš„æ•™ç¨‹ï¼š <a href="http://kotlinlang.org/docs/tutorials/getting-started.html" target="_blank" rel="external">http://kotlinlang.org/docs/tutorials/getting-started.html</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">package com.zhumin.kotlin.demo</div><div class="line"></div><div class="line">import java.util.function.Consumer</div><div class="line"></div><div class="line">fun main(args: Array&lt;String&gt;) &#123;</div><div class="line"></div><div class="line">    print(&quot;hello world&quot;)</div><div class="line"></div><div class="line">    val list : List&lt;String&gt; = listOf(&quot;hello&quot;, &quot;world&quot;, &quot;hello world&quot;)</div><div class="line"></div><div class="line">    // éå†</div><div class="line">    for(str in list) &#123;</div><div class="line">        println(str)</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    println(&quot;--------------------&quot;)</div><div class="line"></div><div class="line">    list.forEach (Consumer &#123;println(it)&#125;)</div><div class="line"></div><div class="line">    println(&quot;--------------------&quot;)</div><div class="line"></div><div class="line">    list.forEach(System.out::println)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å¯ä»¥çœ‹åˆ°å¼•å…¥çš„æ˜¯javaä¸­çš„åŒ…ï¼›å¯¹consumerçš„ç”¨æ³•å’Œjava8ä¹Ÿå‡ ä¹æ˜¯ä¸€æ¨¡ä¸€æ ·ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;1-ä¸ºä½•ä½¿ç”¨kotlin&quot;&gt;&lt;a href=&quot;#1-ä¸ºä½•ä½¿ç”¨kotlin&quot; class=&quot;headerlink&quot; title=&quot;1 ä¸ºä½•ä½¿ç”¨kotlin&quot;&gt;&lt;/a&gt;1 ä¸ºä½•ä½¿ç”¨kotlin&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;è¿™æ˜¯ä¸€é—¨å¼ºåŠ¿æŠ€æœ¯&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¯­
    
    </summary>
    
    
      <category term="coding life" scheme="http://yoursite.com/tags/coding-life/"/>
    
      <category term="kotlin" scheme="http://yoursite.com/tags/kotlin/"/>
    
  </entry>
  
  <entry>
    <title>Netty å¯¹ WebSocketçš„ç®€å•å®ç°ä¸å‰–æ</title>
    <link href="http://yoursite.com/2017/06/07/Netty-%E5%AF%B9-WebSocket%E7%9A%84%E7%AE%80%E5%8D%95%E5%AE%9E%E7%8E%B0%E4%B8%8E%E5%89%96%E6%9E%90/"/>
    <id>http://yoursite.com/2017/06/07/Netty-å¯¹-WebSocketçš„ç®€å•å®ç°ä¸å‰–æ/</id>
    <published>2017-06-07T10:42:07.000Z</published>
    <updated>2017-06-07T10:48:06.000Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬æ–‡ä¸»è¦æè¿° <code>netty</code> å¯¹ <code>WebSocket</code> çš„æ”¯æŒã€‚å¹¶ç¼–å†™ä¸€ä¸ªç®€å• <code>demo</code>; å¯¹ <code>WebSocket</code> çš„å†…å®¹åšäº†ç®€å•å‰–æã€‚</p>
<p>é€šè¿‡æ–‡ç« ä¼šäº†è§£ä¸ºä½• <code>WebSocket</code> æ˜¯ <code>HTTP</code> åè®®å‡çº§è€Œæ¥ï¼› <code>netty</code> æ˜¯å¦‚ä½•å®ç°å¯¹ä»–çš„æ”¯æŒç­‰ã€‚</p>
<a id="more"></a>
<h2 id="WebSocket-çš„ç”±æ¥"><a href="#WebSocket-çš„ç”±æ¥" class="headerlink" title="WebSocket çš„ç”±æ¥"></a>WebSocket çš„ç”±æ¥</h2><h3 id="HTTP-åè®®çš„é—®é¢˜"><a href="#HTTP-åè®®çš„é—®é¢˜" class="headerlink" title="HTTP åè®®çš„é—®é¢˜"></a>HTTP åè®®çš„é—®é¢˜</h3><p><code>HTTP</code> åè®®æ— çŠ¶æ€ï¼Œä¸ºäº†ä¿æŒçŠ¶æ€ï¼Œå¼•å‡ºäº† <code>session</code> &amp; <code>cookies</code>ç­‰æŠ€æœ¯ã€‚</p>
<p><code>HTTP</code> æ˜¯åŸºäº <code>è¯·æ±‚</code> å’Œ <code>å“åº”</code> çš„ï¼Œè¯·æ±‚ä¸€å®šæ˜¯å®¢æˆ·ç«¯å‘å‡ºçš„ã€‚ï¼ˆ1.1 è¿˜æœ‰ <code>keepAlive</code>, æŒç»­è¿æ¥ï¼Œåœ¨ä¸€å®šæ—¶é—´å¯ä»¥è¿›è¡Œè¿æ¥çš„å¤ç”¨ã€‚ï¼‰</p>
<p>å¯¼è‡´çš„é—®é¢˜ï¼Œ æœåŠ¡å™¨æ— æ³•æ¨é€æ•°æ®ã€‚æ‰€ä»¥æ—©æœŸæœ‰å®¢æˆ·ç«¯è½®è®­æŠ€æœ¯ã€‚<br>ä¼šå¯¼è‡´èµ„æºå’Œç½‘ç»œå¸¦å®½çš„æµªè´¹ã€‚å› ä¸º <code>Header</code> æ•°æ®æ¯æ¬¡éƒ½è¦æ„å»ºã€‚</p>
<h3 id="WebSocket-å¯ä»¥åšåˆ°ä»€ä¹ˆï¼Ÿ"><a href="#WebSocket-å¯ä»¥åšåˆ°ä»€ä¹ˆï¼Ÿ" class="headerlink" title="WebSocket å¯ä»¥åšåˆ°ä»€ä¹ˆï¼Ÿ"></a>WebSocket å¯ä»¥åšåˆ°ä»€ä¹ˆï¼Ÿ</h3><p><code>WebSocket</code> æ¥è‡ª <code>Html5</code>; æ‰€ä»¥æ˜¯ <code>HTTP</code> åè®®çš„ä¸€ä¸ªå‡çº§ç‰ˆæœ¬</p>
<ul>
<li>åè®®å¯ä»¥å»ºç«‹æµè§ˆå™¨å’ŒæœåŠ¡å™¨ä¹‹é—´çš„é•¿è¿æ¥ã€‚</li>
<li>å¯ä»¥å®ç°æœåŠ¡ç«¯çš„push</li>
<li>åªéœ€è¦åœ¨ä¸€å¼€å§‹å»ºç«‹è¿æ¥çš„æ—¶å€™æ„å»º <code>Header</code>ï¼›å…¶ä»–æ—¶é—´éƒ½ä¸éœ€è¦å†æœ‰ <code>Header</code> ä¿¡æ¯</li>
</ul>
<blockquote>
<p>å› ä¸ºæ˜¯åŸºäº HTTP çš„ï¼Œæ‰€ä»¥å»ºç«‹è¿æ¥çš„æ—¶å€™ï¼Œå‘çš„è¯·æ±‚æ˜¯ä¸€ä¸ªæ ‡å‡†çš„ http  è¯·æ±‚ã€‚åªä¸è¿‡æ˜¯åœ¨ <code>Header</code> ä¸­æ·»åŠ äº†ä¿¡æ¯ã€‚</p>
</blockquote>
<p>è™½ç„¶æ˜¯åŸºäº <code>Http</code> çš„ï¼Œä½†æ˜¯ä¸ä»…ä»…åœ¨ <code>æµè§ˆå™¨ä¸Šä½¿ç”¨</code><br>ä¹Ÿå¯ä»¥é€šè¿‡ç¬¬ä¸‰æ–¹çš„å·¥å…·åŒ…åœ¨ <code>app</code> ç«¯ä½¿ç”¨</p>
<h2 id="netty-å¯¹-webSocket-çš„ç®€å•å®ç°"><a href="#netty-å¯¹-webSocket-çš„ç®€å•å®ç°" class="headerlink" title="netty å¯¹ webSocket çš„ç®€å•å®ç°"></a>netty å¯¹ webSocket çš„ç®€å•å®ç°</h2><p>netty åŠŸèƒ½ä¼—å¤šï¼Œå¯ä»¥å®ç°å¯¹ <code>HTTP</code> çš„æ”¯æŒï¼Œå¯ä»¥å®ç°é«˜æ€§èƒ½å¼‚æ­¥ <code>RPC</code> çš„åŠŸèƒ½ã€‚åŒæ ·ï¼Œä»–ä¹Ÿæ”¯æŒå¯¹ <code>WebSocket</code> çš„æ”¯æŒã€‚</p>
<p>è™½ç„¶ç”¨è¿‡ <code>netty</code> çš„äººéƒ½è¯´ <code>netty</code> å¤æ‚ï¼Œä½†æ˜¯ä»–æ— è®ºç®€å•å’Œå¤æ‚çš„åº”ç”¨ï¼Œå†™èµ·æ¥éƒ½æ˜¯æ ·çš„å¤æ‚ï¼Œè¿™æ ·ä¸€æ¥å¹³å‡ä¸€ä¸‹ï¼Œåªè¦ä½ äº†è§£äº†è§„åˆ™ï¼Œè¿˜æ˜¯æ¯”è¾ƒç®€å•çš„2333</p>
<h3 id="netty-å®ç°-websocket-æœåŠ¡ç«¯"><a href="#netty-å®ç°-websocket-æœåŠ¡ç«¯" class="headerlink" title="netty å®ç° websocket æœåŠ¡ç«¯"></a>netty å®ç° websocket æœåŠ¡ç«¯</h3><p>ä¸‰ä¸ªæ­¥éª¤</p>
<ul>
<li>Server</li>
<li>Initializer</li>
<li>Handler</li>
</ul>
<h4 id="Server"><a href="#Server" class="headerlink" title="Server"></a>Server</h4><p>å› ä¸ºä½ æ— è®ºå†™ä»€ä¹ˆ <code>Server</code> éƒ½åŸºæœ¬æ˜¯è¿™ä¸ªå¥—è·¯ï¼šè´´ä»£ç </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * è¿™ä¸ªç¤ºä¾‹ä¸»è¦ç”¨æ¥é˜è¿°</div><div class="line"> * netty å¯¹äº WebSocket è¿æ¥çš„æ”¯æŒ</div><div class="line"> * ä»¥åŠå¦‚ä½•å†™ä¸€ä¸ªç®€å•çš„WebSocket demo</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebSocketServer</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">        EventLoopGroup bossGroup = <span class="keyword">new</span> NioEventLoopGroup();</div><div class="line">        EventLoopGroup workerGroup = <span class="keyword">new</span> NioEventLoopGroup();</div><div class="line"></div><div class="line">        <span class="keyword">try</span> &#123;</div><div class="line">            ServerBootstrap serverBootstrap = <span class="keyword">new</span> ServerBootstrap();</div><div class="line">            serverBootstrap.group(bossGroup, workerGroup).channel(NioServerSocketChannel.class)</div><div class="line">                    .handler(<span class="keyword">new</span> LoggingHandler(LogLevel.INFO))</div><div class="line">                    .childHandler(<span class="keyword">new</span> WebSocketChannelInitializer());</div><div class="line"></div><div class="line">            ChannelFuture channelFuture = serverBootstrap.bind(<span class="keyword">new</span> InetSocketAddress(<span class="number">8899</span>)).sync();</div><div class="line">            channelFuture.channel().closeFuture().sync();</div><div class="line">        &#125; <span class="keyword">finally</span> &#123;</div><div class="line">            bossGroup.shutdownGracefully();</div><div class="line">            workerGroup.shutdownGracefully();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p>è¿™é‡Œç®€å•è§£é‡Šä¸‹ä¸ºä»€ä¹ˆæœ‰è¿ä¸ª group; å…¶å®ä¸€ä¸ªä¹Ÿæ²¡æœ‰é—®é¢˜ã€‚å¦‚æœä½ æ‰ä¼šç”¨ä¸¤ä¸ª groupï¼›é‚£ä¹ˆ <code>bossGroup</code> è´Ÿè´£æ¥æ”¶è¯·æ±‚ï¼›è€Œ <code>workerGroup</code> è´Ÿè´£å¤„ç†è¯·æ±‚</p>
</blockquote>
<h4 id="Initializer"><a href="#Initializer" class="headerlink" title="Initializer"></a>Initializer</h4><p><code>netty</code> çš„å„ç§å¤æ‚åŠŸèƒ½éƒ½æ˜¯ç”±å„ä¸ª <code>handler</code> å®ç°çš„ï¼Œå®ç° <code>WebSocket</code> ä¹Ÿæ˜¯å¦‚æ­¤ã€‚æ²¡å•¥å¥½è¯´çš„ï¼Œè´´ä»£ç ï¼Œçœ‹æ³¨é‡Šã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebSocketChannelInitializer</span> <span class="keyword">extends</span> <span class="title">ChannelInitializer</span>&lt;<span class="title">SocketChannel</span>&gt; </span>&#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">initChannel</span><span class="params">(SocketChannel ch)</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">        ChannelPipeline pipeline = ch.pipeline();</div><div class="line"></div><div class="line">        <span class="comment">// å› ä¸ºæ˜¯åŸºäºHTTP åè®®ä¹‹ä¸Šçš„ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨åˆ° HTTP çš„ç¼–è§£ç æŠ€æœ¯</span></div><div class="line">        pipeline.addLast(<span class="keyword">new</span> HttpServerCodec());</div><div class="line">        <span class="comment">// æŒ‰ç…§å—æ¥å†™æ•°æ® handler</span></div><div class="line">        pipeline.addLast(<span class="keyword">new</span> ChunkedWriteHandler());</div><div class="line">        <span class="comment">// http request å’Œ response çš„ä¸€ä¸ªèšåˆç±»</span></div><div class="line">        <span class="comment">// netty ä¼šå¯¹http è¯·æ±‚åšåˆ†æ®µçš„å¤„ç†ï¼›æ‰€ä»¥åœ¨ç¬¬ä¸€ä¸ª http çš„ç¤ºä¾‹ä¸­ï¼Œæœ‰äº›ä¼šè°ƒç”¨å¤šæ¬¡</span></div><div class="line">        pipeline.addLast(<span class="keyword">new</span> HttpObjectAggregator(<span class="number">8192</span>));</div><div class="line"></div><div class="line">        <span class="comment">// web socket netty çš„ç‰¹æ®Šæ”¯æŒ</span></div><div class="line">        <span class="comment">// å…¶ä¸­ "ws" æ˜¯æŒ‡çš„æ˜¯ websocket åè®®è·¯å¾„</span></div><div class="line">        <span class="comment">// é€šå¸¸å½¢å¼   ws://localhost:8899/ws</span></div><div class="line">        <span class="comment">// 8899/ws åé¢çš„ ws å°±æ˜¯æˆ‘ä¼ å…¥çš„ /ws è·¯å¾„ã€‚</span></div><div class="line">        pipeline.addLast(<span class="keyword">new</span> WebSocketServerProtocolHandler(<span class="string">"/ws"</span>));</div><div class="line">        <span class="comment">// æ’å…¥è‡ªå®šä¹‰çš„ TextWebSocketFrameHandler</span></div><div class="line">        pipeline.addLast(<span class="keyword">new</span> TextWebSocketFrameHandler());</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="TextWebSocketFrameHandler"><a href="#TextWebSocketFrameHandler" class="headerlink" title="TextWebSocketFrameHandler"></a>TextWebSocketFrameHandler</h4><p><code>WebSocket</code> åè®®çš„ä¼ è¾“æ˜¯æ˜¯ä»¥ <code>Frame</code> ä½œä¸ºå•ä½çš„ã€‚è¿™é‡Œæˆ‘ä»¬å¤„ç†çš„æ˜¯ <code>Text</code> è¿™ç§ç±»å‹çš„ <code>Frame</code>ã€‚<br>ä¼ ç»Ÿï¼Œè´´ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TextWebSocketFrameHandler</span> <span class="keyword">extends</span> <span class="title">SimpleChannelInboundHandler</span>&lt;<span class="title">TextWebSocketFrame</span>&gt; </span>&#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">channelRead0</span><span class="params">(ChannelHandlerContext ctx, TextWebSocketFrame msg)</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">        System.out.println(<span class="string">"æ¥å—åˆ°æ¶ˆæ¯ï¼š"</span> + msg.text());</div><div class="line">        <span class="comment">// è¿™é‡Œæˆ‘ä»¬æ¥å—å®¢æˆ·ç«¯ä¼ æ¥çš„æ¶ˆæ¯ï¼Œè¿”å›æˆ‘ä»¬å½“å‰æ—¶é—´</span></div><div class="line">        ctx.writeAndFlush(<span class="keyword">new</span> TextWebSocketFrame(<span class="string">"æœåŠ¡å™¨æ—¶é—´ï¼š"</span> + LocalTime.now()));</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handlerAdded</span><span class="params">(ChannelHandlerContext ctx)</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">        System.out.println(<span class="string">"è¿æ¥å»ºç«‹ : "</span> + ctx.channel().id().asLongText());</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handlerRemoved</span><span class="params">(ChannelHandlerContext ctx)</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">        System.out.println(<span class="string">"è¿æ¥æ–­å¼€ : "</span> + ctx.channel().id().asLongText());</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">exceptionCaught</span><span class="params">(ChannelHandlerContext ctx, Throwable cause)</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">        System.out.println(<span class="string">"å‡ºå¼‚å¸¸"</span>);</div><div class="line">        ctx.close();</div><div class="line">        cause.printStackTrace();</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<blockquote>
<p><code>Frame</code> ä¸€å…±æœ‰å…­ç§ï¼Œæˆ‘ä»¬å¯ä»¥ä»ç±»çš„ç»§æ‰¿ä¸Šçœ‹<br><img src="http://static.zybuluo.com/zhumin1990719/vhfib8y17vai9qufzhdar6lk/image_1bi10abjtij3k1fol91c5dkrq9.png" alt="image_1bi10abjtij3k1fol91c5dkrq9.png-138.7kB"><br>å…­ç§åˆ†åˆ«æœ‰ä¸åŒçš„ç”¨é€”ï¼Œä»å­—é¢ä¸Šéƒ½æ¯”è¾ƒå®¹æ˜“ç†è§£<br>è‡³äºä¸ºä»€ä¹ˆæ˜¯å…­ç§ï¼Ÿ é‚£æ˜¯å› ä¸º <code>WebSocket</code> åè®®å°±æ˜¯è¿™ä¹ˆè§„å®šçš„ã€‚</p>
</blockquote>
<h3 id="ç®€å•çš„ç½‘é¡µå®¢æˆ·ç«¯"><a href="#ç®€å•çš„ç½‘é¡µå®¢æˆ·ç«¯" class="headerlink" title="ç®€å•çš„ç½‘é¡µå®¢æˆ·ç«¯"></a>ç®€å•çš„ç½‘é¡µå®¢æˆ·ç«¯</h3><p>ä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘ä»¬å°±åªç”¨ç®€å•çš„ <code>JS</code> æ¥è¿›è¡Œ <code>WebSocket</code> çš„è°ƒç”¨</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line">&lt;script type="text/javascript"&gt;</div><div class="line">    var socket;</div><div class="line">    // åˆ¤æ–­æµè§ˆå™¨æ˜¯ä¸æ˜¯æ”¯æŒ</div><div class="line">    if(window.WebSocket) &#123;</div><div class="line">        socket = new WebSocket("ws://localhost:8899/ws")</div><div class="line">        socket.onmessage = function (event) &#123;</div><div class="line">            var ta = document.getElementById("responseText");</div><div class="line">            ta.value = ta.value + "\n" + event.data</div><div class="line">        &#125;</div><div class="line">        socket.onopen = function (event) &#123;</div><div class="line">            var ta = document.getElementById("responseText");</div><div class="line">            ta.value = "è¿æ¥å¼€å¯"</div><div class="line">        &#125;</div><div class="line">        socket.onclose = function (event) &#123;</div><div class="line">            var ta = document.getElementById("responseText");</div><div class="line">            ta.value = "è¿æ¥å…³é—­"</div><div class="line">        &#125;</div><div class="line">    &#125; else &#123;</div><div class="line">        alert("æµè§ˆå™¨ä¸æ”¯æŒ WebSocket")</div><div class="line">    &#125;</div><div class="line">    // å‘é€æ¶ˆæ¯</div><div class="line">    function send(message) &#123;</div><div class="line">        if(!window.WebSocket) &#123;</div><div class="line">            return;</div><div class="line">        &#125;</div><div class="line">        if(socket.readyState == WebSocket.OPEN) &#123;</div><div class="line">            socket.send(message)</div><div class="line">        &#125; else &#123;</div><div class="line">            alert("è¿æ¥å°šæœªå¼€å¯")</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&lt;/script&gt;</div><div class="line"></div><div class="line"></div><div class="line">&lt;form onsubmit="return false;"&gt;</div><div class="line">    &lt;textarea name="message" style="width: 400px; height: 200px"&gt;&lt;/textarea&gt;</div><div class="line">    &lt;input type="button" value="å‘é€æ•°æ®" onclick="send(this.form.message.value)"/&gt;</div><div class="line">    &lt;h3&gt;æœåŠ¡ç«¯è¾“å‡ºï¼š&lt;/h3&gt;</div><div class="line">    &lt;textarea id="responseText" style="width: 400px; height: 200px"&gt;&lt;/textarea&gt;</div><div class="line">    &lt;input type="button" value="æ¸…ç©ºæ•°æ®" onclick="javascript: document.getElementById('responseText').value=''"/&gt;</div><div class="line">&lt;/form&gt;</div></pre></td></tr></table></figure>
<h3 id="æµ‹è¯•"><a href="#æµ‹è¯•" class="headerlink" title="æµ‹è¯•"></a>æµ‹è¯•</h3><ul>
<li><p>å¯åŠ¨æœåŠ¡å™¨ï¼š<br><img src="http://static.zybuluo.com/zhumin1990719/zx0v9dsjaum7lajszic0e65y/image_1bi10qil21u2ul2hhck541m1jm.png" alt="image_1bi10qil21u2ul2hhck541m1jm.png-89.1kB"></p>
</li>
<li><p>å¯åŠ¨å®¢æˆ·ç«¯</p>
</li>
</ul>
<p>ç®€å•çš„åšå‘ä½ å¯ä»¥åœ¨ <code>IntelliJ</code> ä¸­ç›´æ¥è¿è¡Œ <code>html</code> ä»–ä¼šå¸®ä½ èµ·ä¸€ä¸ªæœåŠ¡ã€‚æˆ–è€…ä½ å¯ä»¥ç”¨ <code>Python</code> </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">python -m SimpleHTTPServer 8080</div></pre></td></tr></table></figure>
<p>æˆ‘é‡‡ç”¨ç¬¬ä¸€ç§ï¼š</p>
<p><img src="http://static.zybuluo.com/zhumin1990719/7n4gc92bqydxrl621vo7bsae/image_1bi1122017ar1ans1bm8fr71nm513.png" alt="image_1bi1122017ar1ans1bm8fr71nm513.png-64.4kB"><br>å®¢æˆ·ç«¯æ˜¾ç¤ºè¿æ¥å·²ç»å»ºç«‹</p>
<p>æ­¤æ—¶ï¼Œä½ å¯ä»¥åœ¨æœåŠ¡å™¨ç«¯çœ‹åˆ°æˆ‘ä»¬è¦æ‰“å‡ºçš„ä¿¡æ¯<br><img src="http://static.zybuluo.com/zhumin1990719/gp12rirel4wu1dphfwbdn4e9/image_1bi11329c1gjgn4t1rnjvii1t7o1g.png" alt="image_1bi11329c1gjgn4t1rnjvii1t7o1g.png-41.2kB"></p>
<p>ç„¶åä½ å¯ä»¥é€šè¿‡å®¢æˆ·ç«¯ç»™æœåŠ¡å™¨å‘é€æ¶ˆæ¯ï¼šæ¯”å¦‚æˆ‘å‘é€</p>
<blockquote>
<p>æ•å“¥å¥½å¸…<br>è¿˜ç”¨ä½ æ‰€ï¼Ÿ</p>
</blockquote>
<p>æœåŠ¡ç«¯ä¼šæ”¶åˆ°ï¼š<br><img src="http://static.zybuluo.com/zhumin1990719/7s4ne8auqwdfjwf5ao0f5hgf/image_1bi116pi91bq35iqpn4150u1t9h1t.png" alt="image_1bi116pi91bq35iqpn4150u1t9h1t.png-41.9kB"></p>
<p>å®¢æˆ·ç«¯ä¹Ÿä¼šæ”¶åˆ°æœåŠ¡ç«¯çš„æ—¶é—´ï¼š<br><img src="http://static.zybuluo.com/zhumin1990719/a0ftuajhha27h8d5npao2mz4/image_1bi117a54qu0k151sfo98a1q6t2a.png" alt="image_1bi117a54qu0k151sfo98a1q6t2a.png-17.4kB"></p>
<p>è‡³æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥çš„è¿™ä¸ªä¾‹å­å°±æˆåŠŸè¿è¡Œäº†ï¼Œä½ åœæ­¢æœåŠ¡å™¨ä¼šçœ‹åˆ°å®¢æˆ·ç«¯è¾“å‡º <code>è¿æ¥å…³é—­</code>ï¼› ä½ å…³é—­å®¢æˆ·ç«¯ï¼Œä¼šçœ‹è§æœåŠ¡ç«¯è¾“å‡º <code>è¿æ¥æ–­å¼€</code>ã€‚</p>
<h3 id="æ›´è¿‘ä¸€æ­¥ï¼ŒåŸºäº-frame-åŸºäº-http"><a href="#æ›´è¿‘ä¸€æ­¥ï¼ŒåŸºäº-frame-åŸºäº-http" class="headerlink" title="æ›´è¿‘ä¸€æ­¥ï¼ŒåŸºäº frame ? åŸºäº http ?"></a>æ›´è¿‘ä¸€æ­¥ï¼ŒåŸºäº frame ? åŸºäº http ?</h3><h4 id="åŸºäº-frame-çš„ä¿¡æ¯ä¼ é€’"><a href="#åŸºäº-frame-çš„ä¿¡æ¯ä¼ é€’" class="headerlink" title="åŸºäº frame çš„ä¿¡æ¯ä¼ é€’"></a>åŸºäº frame çš„ä¿¡æ¯ä¼ é€’</h4><p>åˆšåˆšè¯´åˆ°ï¼Œ<code>WebSocket</code> åœ¨å»ºç«‹é•¿è¿æ¥åï¼Œä¸éœ€è¦åœ¨ä¼ é€’å¤´ä¿¡æ¯ã€‚æˆ‘ä»¬å¯ä»¥ä»£å¼€ <code>Chrome</code> çš„æ§åˆ¶å°çœ‹ä¸€ä¸‹ï¼š</p>
<p><img src="http://static.zybuluo.com/zhumin1990719/6xc9j5iqby6fbn3oj37sb32k/image_1bi11g7qkkrtt5ud4sop536d2n.png" alt="image_1bi11g7qkkrtt5ud4sop536d2n.png-149.2kB"></p>
<p>æˆ‘ä»¬èƒ½çœ‹åˆ°çš„æ˜¯ <code>ws</code> çš„è¿æ¥çš„ä¿¡æ¯é‡Œæœ‰ä¸ª <code>Frames</code> çš„æ ‡ç­¾ï¼Œä½ ä¼ è¾“çš„ä¿¡æ¯éƒ½åœ¨è¿™é‡Œã€‚</p>
<h4 id="WebSocket-è¿æ¥æ˜¯åŸºäº-HTTP-å‡çº§çš„ï¼Ÿ"><a href="#WebSocket-è¿æ¥æ˜¯åŸºäº-HTTP-å‡çº§çš„ï¼Ÿ" class="headerlink" title="WebSocket è¿æ¥æ˜¯åŸºäº HTTP å‡çº§çš„ï¼Ÿ"></a>WebSocket è¿æ¥æ˜¯åŸºäº HTTP å‡çº§çš„ï¼Ÿ</h4><p>æˆ‘ä»¬å¯ä»¥åˆ·æ–°ä¸€ä¸‹ä½ çš„å®¢æˆ·ç«¯çš„ç½‘é¡µï¼Œè§‚å¯Ÿä¸‹ network çš„è¾“å‡ºï¼š</p>
<p><img src="http://static.zybuluo.com/zhumin1990719/sxu6eoau4d10t21cy45v5ijr/image_1bi11n5ke12tr19kve631ot01p6a34.png" alt="image_1bi11n5ke12tr19kve631ot01p6a34.png-153kB"><br>æ³¨æ„çœ‹å‡ºäº† <code>js</code> ä¹‹å¤–çš„è¿ä¸ªè¯·æ±‚ï¼šç¬¬ä¸€ä¸ªå°±æ˜¯åŸºæœ¬çš„ <code>http</code> è¯·æ±‚ï¼ŒçŠ¶æ€çš„ <code>304</code></p>
<p><img src="http://static.zybuluo.com/zhumin1990719/c3lmwkxat1yv6xxvwexfggq7/image_1bi11pgoo1kdfao6mi3r8e1i6p3h.png" alt="image_1bi11pgoo1kdfao6mi3r8e1i6p3h.png-135.4kB"></p>
<p>é‡ç‚¹åœ¨çœ‹ä¸€ä¸‹ä¸‹é¢çš„ <code>ws</code> , ä»–æ˜¯ä¸€ä¸ª <code>WebSocket</code> è¯·æ±‚ï¼š<br><img src="http://static.zybuluo.com/zhumin1990719/t8ga6azf75757rytx4xcba7d/image_1bi11rlob15li1k8r1ars5pt1mb33u.png" alt="image_1bi11rlob15li1k8r1ars5pt1mb33u.png-166.7kB"></p>
<p><code>request</code> ä¸­è¿˜æœ‰ä¸€ä¸ª<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Upgrade:websocket</div></pre></td></tr></table></figure></p>
<p>çš„å†…å®¹ï¼Œå°±æ˜¯å®ƒå°†åè®®ç”± <code>http</code> åè®®å‡çº§æˆä¸ºäº† <code>websocket</code> åè®®ã€‚<br>æ‰€ä»¥å°±æ˜¯è¿™ä¹ˆå›äº‹</p>
<p>æ‰€ä»¥ï¼Œ<code>websocket</code> éœ€è¦æµè§ˆå™¨çš„æ”¯æŒã€‚</p>
<h2 id="ç¯å¢ƒ"><a href="#ç¯å¢ƒ" class="headerlink" title="ç¯å¢ƒ"></a>ç¯å¢ƒ</h2><ul>
<li><code>jdk8</code></li>
<li><code>netty 4.1.10.Final</code></li>
<li><code>gradle</code></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ¬æ–‡ä¸»è¦æè¿° &lt;code&gt;netty&lt;/code&gt; å¯¹ &lt;code&gt;WebSocket&lt;/code&gt; çš„æ”¯æŒã€‚å¹¶ç¼–å†™ä¸€ä¸ªç®€å• &lt;code&gt;demo&lt;/code&gt;; å¯¹ &lt;code&gt;WebSocket&lt;/code&gt; çš„å†…å®¹åšäº†ç®€å•å‰–æã€‚&lt;/p&gt;
&lt;p&gt;é€šè¿‡æ–‡ç« ä¼šäº†è§£ä¸ºä½• &lt;code&gt;WebSocket&lt;/code&gt; æ˜¯ &lt;code&gt;HTTP&lt;/code&gt; åè®®å‡çº§è€Œæ¥ï¼› &lt;code&gt;netty&lt;/code&gt; æ˜¯å¦‚ä½•å®ç°å¯¹ä»–çš„æ”¯æŒç­‰ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="coding life" scheme="http://yoursite.com/tags/coding-life/"/>
    
      <category term="netty" scheme="http://yoursite.com/tags/netty/"/>
    
      <category term="websocket" scheme="http://yoursite.com/tags/websocket/"/>
    
  </entry>
  
  <entry>
    <title>è€å¦ˆçš„ç”Ÿæ´»å“²å­¦</title>
    <link href="http://yoursite.com/2017/05/07/%E6%9C%B1%E8%80%81%E5%B8%88%E4%B8%8E%E8%80%81%E5%A6%88%E7%9A%84%E7%94%9F%E6%B4%BB%E7%BB%86%E8%8A%82/"/>
    <id>http://yoursite.com/2017/05/07/æœ±è€å¸ˆä¸è€å¦ˆçš„ç”Ÿæ´»ç»†èŠ‚/</id>
    <published>2017-05-07T05:28:51.000Z</published>
    <updated>2017-05-07T05:35:56.000Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘å®¶é‡Œäººæ„Ÿå†’çš„å¤šï¼Œå§å§çš„åŒèƒèƒï¼Œå°çš„é‚£ä¸ªè¢«æˆ‘ä»¬å¸¦åˆ°èˆ…èˆ…å®¶ã€‚</p>
<p>ä¸­åˆï¼Œæˆ‘å»æˆ‘å¦ˆé‚£é‡Œ;</p>
<p><strong><em>æˆ‘</em></strong>ï¼šè€å¦ˆï¼Œä»Šæ™šèˆ…å¦ˆæœ‰äº‹å„¿ï¼Œæˆ‘å¸¦å°å®è´ï¼Œä½ ç»™æˆ‘é€ç‚¹é¥­ã€‚</p>
<p><strong><em>è€å¦ˆ</em></strong>ï¼šä½ ä¸­åˆå‰©çš„é¥­ä½ çƒ­çƒ­å°±å¥½å•¦ã€‚</p>
<p><strong><em>æˆ‘</em></strong> ï¼š ã€‚ã€‚ã€‚é‚£æˆ‘å«å¤–å–ã€‚ã€‚</p>
<p><strong><em>è€å¦ˆ</em></strong> ï¼š é‚£æˆ‘ä¹Ÿå»åƒ ğŸ˜Œ</p>
<p>â€“ The End â€“</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ€è¿‘å®¶é‡Œäººæ„Ÿå†’çš„å¤šï¼Œå§å§çš„åŒèƒèƒï¼Œå°çš„é‚£ä¸ªè¢«æˆ‘ä»¬å¸¦åˆ°èˆ…èˆ…å®¶ã€‚&lt;/p&gt;
&lt;p&gt;ä¸­åˆï¼Œæˆ‘å»æˆ‘å¦ˆé‚£é‡Œ;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;em&gt;æˆ‘&lt;/em&gt;&lt;/strong&gt;ï¼šè€å¦ˆï¼Œä»Šæ™šèˆ…å¦ˆæœ‰äº‹å„¿ï¼Œæˆ‘å¸¦å°å®è´ï¼Œä½ ç»™æˆ‘é€ç‚¹é¥­ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;em&gt;è€å¦ˆ&lt;/em&gt;&lt;/
    
    </summary>
    
    
      <category term="ç”Ÿæ´»ç»†èŠ‚" scheme="http://yoursite.com/tags/%E7%94%9F%E6%B4%BB%E7%BB%86%E8%8A%82/"/>
    
  </entry>
  
  <entry>
    <title>Linux ä¸Šæ­å»º Anaconda, è¿œç¨‹è®¿é—® juypter</title>
    <link href="http://yoursite.com/2017/05/05/Linux-%E4%B8%8A%E6%90%AD%E5%BB%BA-Anaconda-%E8%BF%9C%E7%A8%8B%E8%AE%BF%E9%97%AE-juypter/"/>
    <id>http://yoursite.com/2017/05/05/Linux-ä¸Šæ­å»º-Anaconda-è¿œç¨‹è®¿é—®-juypter/</id>
    <published>2017-05-05T09:10:35.000Z</published>
    <updated>2017-05-05T09:15:06.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1-ä»€ä¹ˆæ˜¯-Anaconda"><a href="#1-ä»€ä¹ˆæ˜¯-Anaconda" class="headerlink" title="1 ä»€ä¹ˆæ˜¯ Anaconda"></a>1 ä»€ä¹ˆæ˜¯ Anaconda</h3><p>Anaconda èƒ½è®©ä½ è½»æ¾å®‰è£…åœ¨æ•°æ®ç§‘å­¦å·¥ä½œä¸­ç»å¸¸ä½¿ç”¨çš„åŒ…ã€‚ä½ è¿˜å°†ä½¿ç”¨å®ƒåˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼Œä»¥ä¾¿æ›´è½»æ¾åœ°å¤„ç†å¤šä¸ªé¡¹ç›®ã€‚Anaconda ç®€åŒ–äº†æˆ‘çš„å·¥ä½œæµç¨‹ï¼Œå¹¶ä¸”è§£å†³äº†æˆ‘åœ¨å¤„ç†åŒ…å’Œå¤šä¸ª Python ç‰ˆæœ¬æ—¶é‡åˆ°çš„å¤§é‡é—®é¢˜ã€‚</p>
<a id="more"></a>
<p>Anaconda å®é™…ä¸Šæ˜¯ä¸€ä¸ªè½¯ä»¶å‘è¡Œç‰ˆï¼Œå®ƒé™„å¸¦äº† condaã€Python å’Œ 150 å¤šä¸ªç§‘å­¦åŒ…åŠå…¶ä¾èµ–é¡¹ã€‚åº”ç”¨ç¨‹åº conda æ˜¯åŒ…å’Œç¯å¢ƒç®¡ç†å™¨ã€‚Anaconda çš„ä¸‹è½½æ–‡ä»¶æ¯”è¾ƒå¤§ï¼ˆçº¦ 500 MBï¼‰ï¼Œå› ä¸ºå®ƒé™„å¸¦äº† Python ä¸­æœ€å¸¸ç”¨çš„æ•°æ®ç§‘å­¦åŒ…ã€‚å¦‚æœåªéœ€è¦æŸäº›åŒ…ï¼Œæˆ–è€…éœ€è¦èŠ‚çœå¸¦å®½æˆ–å­˜å‚¨ç©ºé—´ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ Miniconda è¿™ä¸ªè¾ƒå°çš„å‘è¡Œç‰ˆï¼ˆä»…åŒ…å« conda å’Œ Pythonï¼‰ã€‚ä½ ä»å¯ä»¥ä½¿ç”¨ conda æ¥å®‰è£…ä»»ä½•å¯ç”¨çš„åŒ…ï¼Œå®ƒåªæ˜¯æ²¡æœ‰é™„å¸¦è¿™äº›åŒ…è€Œå·²ã€‚</p>
<p>é™¤äº†ç®¡ç†åŒ…ä¹‹å¤–ï¼Œconda è¿˜æ˜¯è™šæ‹Ÿç¯å¢ƒç®¡ç†å™¨ã€‚å®ƒç±»ä¼¼äºå¦å¤–ä¸¤ä¸ªå¾ˆæµè¡Œçš„ç¯å¢ƒç®¡ç†å™¨ï¼Œå³ virtualenv å’Œ pyenv</p>
<p>ç¯å¢ƒèƒ½è®©ä½ åˆ†éš”ä½ è¦ç”¨äºä¸åŒé¡¹ç›®çš„åŒ…ã€‚ä½ å¸¸å¸¸è¦ä½¿ç”¨ä¾èµ–äºæŸä¸ªåº“çš„ä¸åŒç‰ˆæœ¬çš„ä»£ç ã€‚ä¾‹å¦‚ï¼Œä½ çš„ä»£ç å¯èƒ½ä½¿ç”¨äº† Numpy ä¸­çš„æ–°åŠŸèƒ½ï¼Œæˆ–è€…ä½¿ç”¨äº†å·²åˆ é™¤çš„æ—§åŠŸèƒ½ã€‚å®é™…ä¸Šï¼Œä¸å¯èƒ½åŒæ—¶å®‰è£…ä¸¤ä¸ª Numpy ç‰ˆæœ¬ã€‚ä½ è¦åšçš„åº”è¯¥æ˜¯ï¼Œä¸ºæ¯ä¸ª Numpy ç‰ˆæœ¬åˆ›å»ºä¸€ä¸ªç¯å¢ƒï¼Œç„¶ååœ¨é€‚ç”¨äºé¡¹ç›®çš„ç¯å¢ƒä¸­å·¥ä½œã€‚</p>
<p>åœ¨åº”å¯¹ Python 2 å’Œ Python 3 æ—¶ï¼Œæ­¤é—®é¢˜ä¹Ÿä¼šå¸¸å¸¸å‘ç”Ÿã€‚ä½ å¯èƒ½ä¼šä½¿ç”¨åœ¨ Python 3 ä¸­ä¸èƒ½è¿è¡Œçš„æ—§ä»£ç ï¼Œä»¥åŠåœ¨ Python 2 ä¸­ä¸èƒ½è¿è¡Œçš„æ–°ä»£ç ã€‚åŒæ—¶å®‰è£…ä¸¤ä¸ªç‰ˆæœ¬å¯èƒ½ä¼šé€ æˆè®¸å¤šæ··ä¹±å’Œé”™è¯¯ã€‚è€Œåˆ›å»ºç‹¬ç«‹çš„ç¯å¢ƒä¼šå¥½å¾ˆå¤šã€‚</p>
<p>ä¹Ÿå¯ä»¥å°†ç¯å¢ƒä¸­çš„åŒ…çš„åˆ—è¡¨å¯¼å‡ºä¸ºæ–‡ä»¶ï¼Œç„¶åå°†è¯¥æ–‡ä»¶ä¸ä»£ç åŒ…æ‹¬åœ¨ä¸€èµ·ã€‚è¿™èƒ½è®©å…¶ä»–äººè½»æ¾åŠ è½½ä»£ç çš„æ‰€æœ‰ä¾èµ–é¡¹ã€‚pip æä¾›äº†ç±»ä¼¼çš„åŠŸèƒ½ï¼Œå³ </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pip freeze &gt; requirements.txtã€‚</div></pre></td></tr></table></figure>
<h3 id="2-ä¸ºä»€ä¹ˆä½¿ç”¨-conda-è€Œä¸æ˜¯-virtualenv"><a href="#2-ä¸ºä»€ä¹ˆä½¿ç”¨-conda-è€Œä¸æ˜¯-virtualenv" class="headerlink" title="2 ä¸ºä»€ä¹ˆä½¿ç”¨ conda è€Œä¸æ˜¯ virtualenv?"></a>2 ä¸ºä»€ä¹ˆä½¿ç”¨ conda è€Œä¸æ˜¯ virtualenv?</h3><p><img src="http://static.zybuluo.com/zhumin1990719/cgmj2er08c6xivvx1wmlni09/14937979458924.jpg" alt="14937979458924.jpg-832.6kB"></p>
<h3 id="3-å®‰è£…è¿‡ç¨‹"><a href="#3-å®‰è£…è¿‡ç¨‹" class="headerlink" title="3 å®‰è£…è¿‡ç¨‹"></a>3 å®‰è£…è¿‡ç¨‹</h3><h4 id="1-ä¸‹è½½-ï¼Œä¸Šä¼ åˆ°æœºå™¨"><a href="#1-ä¸‹è½½-ï¼Œä¸Šä¼ åˆ°æœºå™¨" class="headerlink" title="1 ä¸‹è½½ ï¼Œä¸Šä¼ åˆ°æœºå™¨"></a>1 ä¸‹è½½ ï¼Œä¸Šä¼ åˆ°æœºå™¨</h4><p>ä½ ä¹Ÿå¯ä»¥åœ¨æœºå™¨ <code>wget</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">https://repo.continuum.io/archive/Anaconda2-4.3.1-Linux-x86_64.sh</div></pre></td></tr></table></figure>
<h4 id="2-å®‰è£…"><a href="#2-å®‰è£…" class="headerlink" title="2 å®‰è£…"></a>2 å®‰è£…</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sh Anaconda2-4.3.1-Linux-x86_64.sh</div></pre></td></tr></table></figure>
<p>é€‰æ‹©å®‰è£…ç›®å½•ã€‚ä¸ºäº†èŠ‚çº¦ æ ¹ç›®å½•ç©ºé—´ï¼Œå®‰è£…åœ¨</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># ç›®å½•äº‹å…ˆå¿…é¡»ä¸å­˜åœ¨</div><div class="line">/data/min.zhu/anaconda2</div></pre></td></tr></table></figure>
<p><img src="http://static.zybuluo.com/zhumin1990719/trullxxzkf24s8z8xbhppybo/14937997286423.jpg" alt="14937997286423.jpg-166kB"></p>
<p>ä¸‹é¢</p>
<p>source ä¸€ä¸‹ <code>.bashrc</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">source ~/.bashrc</div></pre></td></tr></table></figure>
<h4 id="3-è®¾ç½®å›½å†…Anacondaæº"><a href="#3-è®¾ç½®å›½å†…Anacondaæº" class="headerlink" title="3 è®¾ç½®å›½å†…Anacondaæº"></a>3 è®¾ç½®å›½å†…Anacondaæº</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># æ·»åŠ Anacondaçš„TUNAé•œåƒ</span></div><div class="line">conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/</div><div class="line"><span class="comment"># TUNAçš„helpä¸­é•œåƒåœ°å€åŠ æœ‰å¼•å·ï¼Œéœ€è¦å»æ‰# è®¾ç½®æœç´¢æ—¶æ˜¾ç¤ºé€šé“åœ°å€</span></div><div class="line">conda config --set show_channel_urls yes</div></pre></td></tr></table></figure>
<h4 id="4-å®‰è£…éœ€è¦çš„ç¯å¢ƒ"><a href="#4-å®‰è£…éœ€è¦çš„ç¯å¢ƒ" class="headerlink" title="4 å®‰è£…éœ€è¦çš„ç¯å¢ƒ"></a>4 å®‰è£…éœ€è¦çš„ç¯å¢ƒ</h4><p>æ¯”å¦‚å®‰è£… 3.5 çš„python</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">conda create -n lr3 python=3.5</div></pre></td></tr></table></figure>
<p>æ¿€æ´»</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">source activate lr3</div></pre></td></tr></table></figure>
<p>ä¹‹åè¿›å…¥è™šæ‹Ÿç¯å¢ƒ</p>
<p><img src="http://static.zybuluo.com/zhumin1990719/us41d1smtqaxgfxt558kbeyn/14927645672574.jpg" alt="14927645672574.jpg-153.7kB"></p>
<p>å¯ä»¥åœ¨é€šè¿‡ <code>conda</code> è¿›è¡ŒåŒ…çš„ç®¡ç†</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">conda install xxx</div></pre></td></tr></table></figure>
<h4 id="5-ä¿®æ”¹-pip-æºä¸ºé˜¿é‡Œæº"><a href="#5-ä¿®æ”¹-pip-æºä¸ºé˜¿é‡Œæº" class="headerlink" title="5 ä¿®æ”¹ pip æºä¸ºé˜¿é‡Œæº"></a>5 ä¿®æ”¹ pip æºä¸ºé˜¿é‡Œæº</h4><p>å› ä¸ºæœ‰äº›åŒ…ç‚¹è¯„ç›´æ¥å°±æ²¡æœ‰ æ¯”å¦‚ <code>tflearn</code> å’Œ <code>tensorflow</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">vim ~/.pip/pip.conf</div><div class="line">trusted-host=mirrors.aliyun.com</div><div class="line">index-url=http://mirrors.aliyun.com/pypi/simple/</div></pre></td></tr></table></figure>
<h4 id="6-è¿œç¨‹juypter-è®¿é—®"><a href="#6-è¿œç¨‹juypter-è®¿é—®" class="headerlink" title="6 è¿œç¨‹juypter è®¿é—®"></a>6 è¿œç¨‹juypter è®¿é—®</h4><p>é¦–å…ˆï¼Œä¸å»ºè®®ä½¿ç”¨root , å½“ä½ ä½¿ç”¨ root çš„æ—¶å€™ï¼Œéœ€è¦ä½¿ç”¨å¦‚ä¸‹æ–¹æ³•ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">jupyter notebook --allow-root</div></pre></td></tr></table></figure>
<p>ç¬¬äºŒï¼Œè¿œç¨‹æœåŠ¡å™¨è®¿é—®éœ€è¦åšä¸€äº›é…ç½®</p>
<p>å¯ä»¥å‚è€ƒå¦‚ä¸‹æ–‡ç« </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">http://blog.leanote.com/post/jevonswang/è¿œç¨‹è®¿é—®jupyter-notebook</div></pre></td></tr></table></figure>
<p>è¿›è¡Œé…ç½®</p>
<h3 id="4-ç®¡ç†ç¯å¢ƒ"><a href="#4-ç®¡ç†ç¯å¢ƒ" class="headerlink" title="4 ç®¡ç†ç¯å¢ƒ"></a>4 ç®¡ç†ç¯å¢ƒ</h3><p>å¦‚æœä½ å®‰è£…äº†å¤šä¸ªç¯å¢ƒï¼Œä½†æ˜¯ä¸è®°å¾—åå­—ï¼Œæˆ–è€…æƒ³ä¿®æ”¹çš„è¯ï¼Œé€šè¿‡ <code>conda-env</code> è¿™ä¸ªå‘½ä»¤å°±å¯ä»¥çœ‹åˆ°ä½ æ‰€æœ‰çš„ç¯å¢ƒäº†ã€‚ å¯ä»¥çœ‹åˆ°é™„å¸¦æ‰€æœ‰æ“ä½œ<br><img src="http://static.zybuluo.com/zhumin1990719/87mdmv1tpyp79dnmy8mdzhye/14931020058855.jpg" alt="14931020058855.jpg-188.6kB"></p>
<p>æ¯”å¦‚ <code>conda-env list</code> å°±æ˜¯æŸ¥çœ‹æ‰€æœ‰å‘½ä»¤çš„æ ¼å¼</p>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;1-ä»€ä¹ˆæ˜¯-Anaconda&quot;&gt;&lt;a href=&quot;#1-ä»€ä¹ˆæ˜¯-Anaconda&quot; class=&quot;headerlink&quot; title=&quot;1 ä»€ä¹ˆæ˜¯ Anaconda&quot;&gt;&lt;/a&gt;1 ä»€ä¹ˆæ˜¯ Anaconda&lt;/h3&gt;&lt;p&gt;Anaconda èƒ½è®©ä½ è½»æ¾å®‰è£…åœ¨æ•°æ®ç§‘å­¦å·¥ä½œä¸­ç»å¸¸ä½¿ç”¨çš„åŒ…ã€‚ä½ è¿˜å°†ä½¿ç”¨å®ƒåˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼Œä»¥ä¾¿æ›´è½»æ¾åœ°å¤„ç†å¤šä¸ªé¡¹ç›®ã€‚Anaconda ç®€åŒ–äº†æˆ‘çš„å·¥ä½œæµç¨‹ï¼Œå¹¶ä¸”è§£å†³äº†æˆ‘åœ¨å¤„ç†åŒ…å’Œå¤šä¸ª Python ç‰ˆæœ¬æ—¶é‡åˆ°çš„å¤§é‡é—®é¢˜ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="coding life" scheme="http://yoursite.com/tags/coding-life/"/>
    
      <category term="æœºå™¨å­¦ä¹ " scheme="http://yoursite.com/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/"/>
    
      <category term="conda" scheme="http://yoursite.com/tags/conda/"/>
    
  </entry>
  
  <entry>
    <title>CentOS 6.x å¦‚ä½•å‡çº§ glibc 2.17</title>
    <link href="http://yoursite.com/2017/05/05/CentOS-6-x-%E5%A6%82%E4%BD%95%E5%8D%87%E7%BA%A7-glibc-2-17/"/>
    <id>http://yoursite.com/2017/05/05/CentOS-6-x-å¦‚ä½•å‡çº§-glibc-2-17/</id>
    <published>2017-05-05T08:55:00.000Z</published>
    <updated>2017-05-05T10:04:20.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å¼•å­"><a href="#å¼•å­" class="headerlink" title="å¼•å­"></a>å¼•å­</h2><p>æœ¬æ–‡æè¿°å¦‚ä½•åœ¨ <code>CentOS 6.x</code> å‡çº§è›‹ç–¼çš„ <code>glibc 2.17</code>.</p>
<p>å­¦ä¹ æœºå™¨çš„å†…å®¹ï¼Œéœ€è¦ç”¨åˆ° <code>tensorFlow</code>, åœ¨è‡ªå·± <code>Mac</code> ä¸Šè·‘å¤ªå¿ƒç–¼äº†ã€‚ äºæ˜¯å°è¯•åœ¨å…¬å¸çš„æµ‹è¯•æœºä¸Šè·‘ã€‚ç„¶è€Œæˆ‘æ­å»ºå¥½ <code>conda</code>, <code>jupyter notebook</code> , å¼•å…¥ <code>tf</code> çš„æ—¶å€™æŠ¥é”™ã€‚<br>ï¼ˆå…³äºå¦‚ä½• å®‰è£…ç§‘å­¦è®¡ç®—ç¯å¢ƒï¼Œä»¥åŠè¿œç¨‹è®¿é—® <code>jupyter notebook</code>, è¯·çœ‹ä¸‹ä¸€ç¯‡æ–‡ç« ï¼‰</p>
<p>å¦‚ä¸‹<br><img src="http://static.zybuluo.com/zhumin1990719/1qx1afr47y8ok3gyzwlqobeu/image_1bfbrng2h1mgr110uuqj1l0239n9.png" alt="image_1bfbrng2h1mgr110uuqj1l0239n9.png-26.6kB"></p>
<a id="more"></a>
<p>åœ¨ä¸€çœ‹æœºå™¨ä¸Šçš„æƒ…å†µ æœ€é«˜åªæœ‰ 2.15<br><img src="http://static.zybuluo.com/zhumin1990719/iey92s8tqlehk14a5dddq5lo/image_1bfbrqvjh3eg1qjl1g0i1d1r3kvm.png" alt="image_1bfbrqvjh3eg1qjl1g0i1d1r3kvm.png-55.9kB"></p>
<p>å…¶å®å·²ç»æ˜¯è¿ç»´å‡çº§è¿‡äº†çš„ï¼Œé»˜è®¤åªåˆ° 12ã€‚ä¸»è¦è¿˜æ˜¯æˆ‘ä»¬çš„ç³»ç»Ÿç‰ˆæœ¬å¤ªä½ã€‚</p>
<blockquote>
<p>CentOS 7.Xï¼ŒGLIBC å·²ç»åˆ° <code>2.17</code>ï¼ŒGCC ä¹Ÿæ˜¯ <code>4.8.5</code><br>ä½†æ˜¯å¯¹äºå…¬å¸æ¥è¯´ï¼Œç¨³å®šæ˜¯ç¬¬ä¸€ä½çš„ã€‚æ‰€ä»¥ã€‚ã€‚ã€‚</p>
</blockquote>
<h2 id="å¦‚ä½•å®‰è£…"><a href="#å¦‚ä½•å®‰è£…" class="headerlink" title="å¦‚ä½•å®‰è£…"></a>å¦‚ä½•å®‰è£…</h2><p>ä¸¤ç§æ–¹æ³•ï¼Œä¸€ç§æºç ç¼–è¯‘ï¼Œä¸€ç§æ˜¯ç”¨ rpm æ¥å®‰è£…ï¼Œä¹‹å‰çœ‹åˆ°è¿™ç¯‡æ–‡ç« <a href="http://blog.ttionya.com/article-1559.html" target="_blank" rel="external">ç‚¹è¿™é‡Œ</a>ï¼Œå…¶å®è¯´çš„è¿˜è›®å¥½çš„ï¼Œä½†æ˜¯åªæ˜¯å‡çº§åˆ° <code>2.15</code>ï¼Œ è€Œæœ€æ–°çš„ <code>tf 1.1</code> ç‰ˆæœ¬ï¼Œéœ€è¦ <code>2.17</code> çš„ç‰ˆæœ¬ã€‚</p>
<p>å…¶å®é—®é¢˜æœ€å¤§çš„å°±æ˜¯æ‰¾ä¸åˆ°ç»™ <code>CentOS 6.x</code> ç”¨çš„ <code>2.17</code> çš„ <code>rpm</code> åŒ…ï¼Œç›´åˆ°ä»Šæ—¥ï¼Œæˆ‘æœåˆ°äº†æœ‰äººæ˜¨å¤©å‘å¸ƒä¸€æ®µè„šæœ¬ï¼Œæ‰ç®—æ‰¾åˆ°äº†è§£å†³æ–¹æ³•<br>ï¼Œç›´æ¥ç»™é“¾æ¥ <a href="https://gist.github.com/harv/f86690fcad94f655906ee9e37c85b174" target="_blank" rel="external">æ„Ÿæ¿€ä¸‡åˆ†çš„ç‚¹è¿™é‡Œ</a></p>
<p>ä½ ä¸æ„¿ç‚¹çœ‹ï¼Œæˆ‘å°±å†™ä¸‹æ¥ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">#! /bin/sh</div><div class="line"></div><div class="line"># update glibc to 2.17 for CentOS 6</div><div class="line"></div><div class="line">wget http://copr-be.cloud.fedoraproject.org/results/mosquito/myrepo-el6/epel-6-x86_64/glibc-2.17-55.fc20/glibc-2.17-55.el6.x86_64.rpm</div><div class="line">wget http://copr-be.cloud.fedoraproject.org/results/mosquito/myrepo-el6/epel-6-x86_64/glibc-2.17-55.fc20/glibc-common-2.17-55.el6.x86_64.rpm</div><div class="line">wget http://copr-be.cloud.fedoraproject.org/results/mosquito/myrepo-el6/epel-6-x86_64/glibc-2.17-55.fc20/glibc-devel-2.17-55.el6.x86_64.rpm</div><div class="line">wget http://copr-be.cloud.fedoraproject.org/results/mosquito/myrepo-el6/epel-6-x86_64/glibc-2.17-55.fc20/glibc-headers-2.17-55.el6.x86_64.rpm</div><div class="line"></div><div class="line">sudo rpm -Uvh glibc-2.17-55.el6.x86_64.rpm \</div><div class="line">glibc-common-2.17-55.el6.x86_64.rpm \</div><div class="line">glibc-devel-2.17-55.el6.x86_64.rpm \</div><div class="line">glibc-headers-2.17-55.el6.x86_64.rpm</div></pre></td></tr></table></figure>
<p>å…¶å®å°±æ˜¯ä¸‹è½½èµ„æºï¼Œç„¶åç”¨ <code>rpm</code> å®‰è£…ã€‚</p>
<h2 id="å¯èƒ½é‡åˆ°çš„é”™è¯¯"><a href="#å¯èƒ½é‡åˆ°çš„é”™è¯¯" class="headerlink" title="å¯èƒ½é‡åˆ°çš„é”™è¯¯"></a>å¯èƒ½é‡åˆ°çš„é”™è¯¯</h2><p>å½“ä½ æ‰§è¡Œ</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">rpm -Uvh glibc-2.17-55.el6.x86_64.rpm \ </div><div class="line">glibc-common-2.17-55.el6.x86_64.rpm \ </div><div class="line">glibc-devel-2.17-55.el6.x86_64.rpm \ </div><div class="line">glibc-headers-2.17-55.el6.x86_64.rpm</div></pre></td></tr></table></figure>
<p>çš„æ—¶å€™ä¼šæŠ¥é”™</p>
<p><img src="http://static.zybuluo.com/zhumin1990719/qbu7fz3fl6784ng3k9nv7dkm/image_1bfbsmbs2h3m1o5t163o1luhkhe13.png" alt="image_1bfbsmbs2h3m1o5t163o1luhkhe13.png-84.4kB"></p>
<p>è§£å†³æ–¹æ¡ˆï¼š<br>å‘½ä»¤ç»“å°¾åŠ ä¸Šå‚æ•°</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">--force --nodeps</div></pre></td></tr></table></figure>
<p>åŸå› å¯ä»¥çœ‹è¿™ç¯‡æ–‡ç«  <a href="http://blog.csdn.net/wulantian/article/details/8804696" target="_blank" rel="external">ç‚¹è¿™é‡Œ</a>ï¼Œé€ æˆè¿™ä¸ªé—®é¢˜çš„ä¸»è¦åŸå› æ˜¯å¥—ä»¶è¢«é‡è¤‡ (å¼ºåˆ¶) å®‰è£…äº†ä¸¤æ¬¡ä»¥ä¸Š. å¯ä»¥ç”¨ä¸Šé¢çš„å‘½ä»¤è¿›è¡Œä¾èµ–å¿½ç•¥ï¼Œä¹Ÿå¯ä»¥å¸è½½ã€‚</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><ul>
<li>æœç´¢çš„å…³é”®è¯çœŸçš„å¾ˆé‡è¦ï¼Œè°·æ­Œå¾ˆé‡è¦ï¼Œè‹±è¯­å¾ˆé‡è¦ã€‚</li>
<li>è¿æ°”å¾ˆé‡è¦(è¿™ä¸ªé—®é¢˜æŠ˜è…¾æˆ‘ä¸¤ä¸ªç¤¼æ‹œ)</li>
<li>åˆ«ç”¨ç™¾åº¦æœæŠ€æœ¯é—®é¢˜ã€‚</li>
</ul>
<h2 id="è¿˜æœ‰ï¼Œå¦‚æœä½ æ‰‹åŠ¨ç¼–è¯‘å®‰è£…glibcã€‚ã€‚ã€‚ã€‚"><a href="#è¿˜æœ‰ï¼Œå¦‚æœä½ æ‰‹åŠ¨ç¼–è¯‘å®‰è£…glibcã€‚ã€‚ã€‚ã€‚" class="headerlink" title="è¿˜æœ‰ï¼Œå¦‚æœä½ æ‰‹åŠ¨ç¼–è¯‘å®‰è£…glibcã€‚ã€‚ã€‚ã€‚"></a>è¿˜æœ‰ï¼Œå¦‚æœä½ æ‰‹åŠ¨ç¼–è¯‘å®‰è£…glibcã€‚ã€‚ã€‚ã€‚</h2><p>ä¸‡ä¸€ä½ å®‰è£…å¤±è´¥å°±ä¼šå¯¼è‡´ç³»ç»Ÿå„ç§å‘½ä»¤æ— æ³•æ‰§è¡Œã€‚ã€‚åƒä¸‡åˆ«é€€å‡ºã€‚ã€‚ä½ ä¸€æ—¦é€€å‡ºï¼Œå°±æ— æ³•ç™»é™†äº†ï¼Œåªèƒ½ç”¨å…‰ç›˜æ¢å¤ç³»ç»Ÿäº†ã€‚ã€‚</p>
<p>ä½†æ˜¯è¿™ç¯‡æ–‡ç« é‡Œçš„æ–¹æ³•ï¼Œå¯ä»¥è¯•ä¸€è¯• <a href="https://cnodejs.org/topic/56dc21f1502596633dc2c3dc" target="_blank" rel="external">è§£å†³æ–¹æ³•</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;å¼•å­&quot;&gt;&lt;a href=&quot;#å¼•å­&quot; class=&quot;headerlink&quot; title=&quot;å¼•å­&quot;&gt;&lt;/a&gt;å¼•å­&lt;/h2&gt;&lt;p&gt;æœ¬æ–‡æè¿°å¦‚ä½•åœ¨ &lt;code&gt;CentOS 6.x&lt;/code&gt; å‡çº§è›‹ç–¼çš„ &lt;code&gt;glibc 2.17&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;å­¦ä¹ æœºå™¨çš„å†…å®¹ï¼Œéœ€è¦ç”¨åˆ° &lt;code&gt;tensorFlow&lt;/code&gt;, åœ¨è‡ªå·± &lt;code&gt;Mac&lt;/code&gt; ä¸Šè·‘å¤ªå¿ƒç–¼äº†ã€‚ äºæ˜¯å°è¯•åœ¨å…¬å¸çš„æµ‹è¯•æœºä¸Šè·‘ã€‚ç„¶è€Œæˆ‘æ­å»ºå¥½ &lt;code&gt;conda&lt;/code&gt;, &lt;code&gt;jupyter notebook&lt;/code&gt; , å¼•å…¥ &lt;code&gt;tf&lt;/code&gt; çš„æ—¶å€™æŠ¥é”™ã€‚&lt;br&gt;ï¼ˆå…³äºå¦‚ä½• å®‰è£…ç§‘å­¦è®¡ç®—ç¯å¢ƒï¼Œä»¥åŠè¿œç¨‹è®¿é—® &lt;code&gt;jupyter notebook&lt;/code&gt;, è¯·çœ‹ä¸‹ä¸€ç¯‡æ–‡ç« ï¼‰&lt;/p&gt;
&lt;p&gt;å¦‚ä¸‹&lt;br&gt;&lt;img src=&quot;http://static.zybuluo.com/zhumin1990719/1qx1afr47y8ok3gyzwlqobeu/image_1bfbrng2h1mgr110uuqj1l0239n9.png&quot; alt=&quot;image_1bfbrng2h1mgr110uuqj1l0239n9.png-26.6kB&quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="coding life" scheme="http://yoursite.com/tags/coding-life/"/>
    
      <category term="linux" scheme="http://yoursite.com/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>jdk8 ä¸€ä¸ªé¢ è¦†äº†é¢å‘å¯¹è±¡è®¤çŸ¥çš„ä¾‹å­</title>
    <link href="http://yoursite.com/2017/05/03/jdk8-%E4%B8%80%E4%B8%AA%E9%A2%A0%E8%A6%86%E4%BA%86%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E8%AE%A4%E7%9F%A5%E7%9A%84%E4%BE%8B%E5%AD%90/"/>
    <id>http://yoursite.com/2017/05/03/jdk8-ä¸€ä¸ªé¢ è¦†äº†é¢å‘å¯¹è±¡è®¤çŸ¥çš„ä¾‹å­/</id>
    <published>2017-05-03T15:27:20.000Z</published>
    <updated>2017-05-03T15:35:02.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="1-èµ·æº"><a href="#1-èµ·æº" class="headerlink" title="1 èµ·æº"></a>1 èµ·æº</h2><p>å¦‚æœä½ çœ‹äº†ä¸Šä¸€ç¯‡æ–‡ç« å…³äº <code>Spliterator</code> åˆ†å‰²è¿­ä»£å™¨ï¼Œæœ€åä¸€éƒ¨åˆ†è¯´åˆ°äº†å›¾ä¸­çš„ä¸¤ä¸ªå¼ºåˆ¶è½¬æ¢é€»è¾‘çš„ä¸åˆç†ä¹‹å¤„ã€‚</p>
<ul>
<li>ç¬¬ä¸€å¤„ï¼Œæˆ‘ä¼ å…¥çš„æ˜¯ä¸€ä¸ª <code>Consumer</code> æ¥å£ï¼Œä½†æ˜¯åˆ¤æ–­çš„æƒ…å†µå´æ˜¯åˆ¤æ–­ </li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">action <span class="keyword">instanceof</span>  IntConsumer</div></pre></td></tr></table></figure>
<p>è€Œ IntConsumer å’Œ Consumer æ˜¯æ²¡æœ‰ç»§æ‰¿å…³ç³»çš„å¹³è¡Œå‡½æ•°å¼æ¥å£ã€‚è¿™æ ·çš„è½¬æ¢ä¸ºä½•ä¼šæˆåŠŸï¼Ÿ</p>
<ul>
<li>ç¬¬äºŒå¤„ï¼Œå½“ç¬¬ä¸€ä¸ªåˆ¤æ–­æ¡ä»¶ä¸æ»¡è¶³çš„æ˜¯æ—¶å€™ï¼Œä½¿ç”¨ï¼ˆIntConsumerï¼‰å¼ºè½¬ <code>lambda</code> è¡¨è¾¾å¼ï¼Œè¿™æ ·ä¸ºä½•èƒ½æˆåŠŸè¢«éœ€è¦ä¼ å…¥ <code>IntConsumer</code> å‡½æ•°æ‰€æ¥å—å‘¢ï¼Ÿ</li>
</ul>
<p>å¦‚ä¸‹å›¾ï¼š</p>
<p><img src="http://static.zybuluo.com/zhumin1990719/b5fvbgzis7apng5pcmv4rxfj/image_1bf48rn8nbi1lrs1hgq1f72ass1t.png" alt="image_1bf48rn8nbi1lrs1hgq1f72ass1t.png-236.6kB"></p>
<a id="more"></a>
<h2 id="2-å°è¯•è§£é‡Šçœ‹çœ‹å–½"><a href="#2-å°è¯•è§£é‡Šçœ‹çœ‹å–½" class="headerlink" title="2 å°è¯•è§£é‡Šçœ‹çœ‹å–½"></a>2 å°è¯•è§£é‡Šçœ‹çœ‹å–½</h2><h3 id="å…ˆçœ‹ç¬¬äºŒå¤„ï¼šlambdaè¡¨è¾¾å¼ä¹Ÿå¯ä»¥å¼ºè½¬ï¼Ÿ"><a href="#å…ˆçœ‹ç¬¬äºŒå¤„ï¼šlambdaè¡¨è¾¾å¼ä¹Ÿå¯ä»¥å¼ºè½¬ï¼Ÿ" class="headerlink" title="å…ˆçœ‹ç¬¬äºŒå¤„ï¼šlambdaè¡¨è¾¾å¼ä¹Ÿå¯ä»¥å¼ºè½¬ï¼Ÿ"></a>å…ˆçœ‹ç¬¬äºŒå¤„ï¼šlambdaè¡¨è¾¾å¼ä¹Ÿå¯ä»¥å¼ºè½¬ï¼Ÿ</h3><p>æˆ‘ä»¬å…ˆå†™ä¸€ä¸ªç±»ä¼¼çš„ä¾‹å­ï¼Œæœ‰ä¸€ä¸ªéœ€è¦ä¼ å…¥ <code>Consumer</code> çš„æ–¹æ³•ï¼Œæˆ‘ä»¬å°è¯•ä¼ å…¥ä¸€ä¸ª <code>IntConsumer</code> ä¼šå‘ç”Ÿä»€ä¹ˆæƒ…å†µã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConsumerTest</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">(Consumer&lt;? <span class="keyword">super</span> Integer&gt; consumer)</span> </span>&#123;</div><div class="line">        System.out.println(consumer <span class="keyword">instanceof</span> IntConsumer);</div><div class="line">        consumer.accept(<span class="number">100</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">        ConsumerTest consumerTest = <span class="keyword">new</span> ConsumerTest();</div><div class="line"></div><div class="line">        Consumer&lt;Integer&gt; consumer = i -&gt; System.out.println(i);</div><div class="line">        IntConsumer intConsumer = i -&gt; System.out.println(i);</div><div class="line"></div><div class="line">        consumerTest.test(consumer);  <span class="comment">// é¢å‘å¯¹è±¡çš„æ–¹å¼</span></div><div class="line">        consumerTest.test(consumer::accept); <span class="comment">// å‡½æ•°å¼çš„æ–¹å¼</span></div><div class="line">        consumerTest.test(intConsumer::accept); <span class="comment">// å‡½æ•°å¼çš„æ–¹å¼</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™ä¸ªä¾‹å­çš„è¾“å‡ºç»“æœæ˜¯ï¼š</p>
<p><img src="http://static.zybuluo.com/zhumin1990719/twikzu01ww4e7t9u8x63tw9h/image_1bf77758l13l11agu1ekeshv1134l.png" alt="image_1bf77758l13l11agu1ekeshv1134l.png-28kB"></p>
<p>æˆ‘ä»¬å‘ç°è¿™ä¸‰ç§ä¼ å…¥æ–¹å¼éƒ½æ˜¯å¯ä»¥çš„ï¼Œç¬¬ä¸€ç¬¬äºŒç§æ²¡ä»€ä¹ˆå¥½è¯´çš„ï¼Œå› ä¸º <code>Test</code> æ–¹æ³•å°±æ˜¯éœ€è¦ä¼ å…¥ä¸€ä¸ª <code>Consumer</code>ï¼Œ æ— è®ºä½ ä½¿ç”¨åŸæ¥ä¼ é€’å¯¹è±¡çš„æ–¹å¼ï¼Œè¿˜æ˜¯é€šè¿‡æ–¹æ³•å¼•ç”¨çš„æ–¹æ³•ï¼Œéƒ½æ˜¯æ²¡æœ‰é—®é¢˜ï¼Œå¯ä»¥è¢«æ‰§è¡Œã€‚</p>
<p>é—®é¢˜åœ¨äºï¼Œç¬¬ä¸‰ç§æ–¹å¼</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">consumerTest.test(intConsumer::accept); <span class="comment">// å‡½æ•°å¼çš„æ–¹å¼</span></div></pre></td></tr></table></figure>
<p>å½“ä½ æŒ‰ä½ command æŠŠé¼ æ ‡æ”¾åœ¨åŒå†’å·çš„æ—¶å€™ å‡ºç°çš„å¦‚ä¸‹ï¼š<br><img src="http://static.zybuluo.com/zhumin1990719/kk9ld6ktzbhctlv3xitujalv/image_1bf7diai619ibfi64uk13hp1viv1s.png" alt="image_1bf7diai619ibfi64uk13hp1viv1s.png-121.5kB"></p>
<p>å½“ä½ æŒ‰ä½ command æŠŠé¼ æ ‡æ”¾åœ¨çš„ <code>accept</code> æ—¶å€™ å‡ºç°çš„å¦‚ä¸‹ï¼š<br><img src="http://static.zybuluo.com/zhumin1990719/wne2ek9nxhs90tx5zygzc7cc/image_1bf7dhepa1cpp7gi28b1r7v1m3r1f.png" alt="image_1bf7dhepa1cpp7gi28b1r7v1m3r1f.png-155.1kB"></p>
<p>åŒå†’å·ä»£è¡¨æ˜¯çš„å½“å‰ <code>lambda</code> è¡¨è¾¾å¼çš„ç±»å‹ã€‚å› ä¸ºä½ çœ‹æˆ‘åˆå§‹åŒ–ä¸¤ä¸ªconsumerçš„ä»£ç </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Consumer&lt;Integer&gt; consumer = i -&gt; System.out.println(i);</div><div class="line">IntConsumer intConsumer = i -&gt; System.out.println(i);</div></pre></td></tr></table></figure>
<p>æˆ‘åé¢çš„è¡¨è¾¾å¼æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ã€‚ä½†æ˜¯å´å¯ä»¥èµ‹äºˆä¸¤ä¸ªä¸åŒçš„ç±»å‹ã€‚<br>æ‰€ä»¥ï¼Œé‡ç‚¹æ¥äº†</p>
<blockquote>
<p>é‡ç‚¹æ˜¯ lambda è¡¨è¾¾å¼çš„ç±»å‹ï¼Œ<code>æ˜¯è¦é ä¸Šä¸‹æ–‡è¿›è¡Œæ¨æ–­çš„</code>ã€‚</p>
</blockquote>
<p>è¿™ä¸ªæ˜¯å’Œä¼ ç»Ÿé¢å‘çš„ç¼–ç¨‹ä¸ä¸€æ ·çš„åœ°æ–¹ã€‚éœ€è¦æ³¨æ„ã€‚<br>åˆšåˆšä¸Šé¢çš„ç¬¬ä¸‰ç§è°ƒç”¨çš„æ–¹å¼ï¼Œå°±æ˜¯å¦‚æ­¤ï¼Œç¼–è¯‘å™¨æ¨æ–­å‡ºï¼Œä½ è¿™ä¸ª <code>lambda</code> è¡¨è¾¾å¼ <code>intConsumer::accept</code> è‚¯å®šæ˜¯ <code>Consumer&lt;T super Integer&gt;</code> ç±»å‹çš„ã€‚æ‰€ä»¥ä¸æŠ¥é”™è€Œè¿™ä¸ªæ—¶å€™å¦‚æœä½ å‰é¢åŠ ä¸€ä¸ªå¼ºåˆ¶è½¬æ¢ï¼Œå°±åƒæ–‡ç« ä¸€å¼€å§‹çš„é‚£å¼ å›¾çš„ç¬¬äºŒä¸ªå¼ºè½¬é€»è¾‘ä¸€æ ·ï¼Œä¹Ÿæ˜¯å¯ä»¥çš„ã€‚ä¸è¿‡ï¼Œç•¥æ˜¾å¤šä½™å°±æ˜¯äº†ã€‚</p>
<p><img src="http://static.zybuluo.com/zhumin1990719/s65e3diseksbvgh87sgxu6t5/image_1bf7e1upp1aa69mamubh2krap29.png" alt="image_1bf7e1upp1aa69mamubh2krap29.png-57.5kB"></p>
<h3 id="åœ¨çœ‹ç¬¬ä¸€å¤„"><a href="#åœ¨çœ‹ç¬¬ä¸€å¤„" class="headerlink" title="åœ¨çœ‹ç¬¬ä¸€å¤„"></a>åœ¨çœ‹ç¬¬ä¸€å¤„</h3><p>é‚£ä¹ˆä»€ä¹ˆæƒ…å†µä¸‹ï¼Œæ‰ä¼šå‡ºç°ç¬¬ä¸€ç§æƒ…å†µï¼Œä¼ å…¥çš„æ˜¯ <code>Consumer</code> ï¼Œä½†å´åŒæ—¶æ˜¯ <code>instanceof IntConsumer</code> å‘¢ï¼Ÿ</p>
<p>å¯¹äº†ï¼ï¼ˆå¯¹ä»€ä¹ˆå¯¹ï¼Œä½ åˆæ²¡æƒ³åˆ°ï¼‰å°±æ˜¯è¿™æ ·ï¼Œä½ åŒæ—¶ç»§æ‰¿è€…ä¸¤ä¸ªæ¥å£å°±å¯ä»¥äº†å‘€ï¼</p>
<p>ä¸Šä»£ç ï¼</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * Created by charleszhu on 2017/5/2.</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConsumerTest</span> </span>&#123;</div><div class="line">    <span class="comment">// è¦æ±‚ä¼ å…¥ Consumer</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testInt</span><span class="params">(Consumer&lt;Integer&gt; consumer)</span> </span>&#123;</div><div class="line">        <span class="comment">// åˆ¤æ–­æ˜¯å¦ä¸º IntConsumer</span></div><div class="line">        System.out.println(consumer <span class="keyword">instanceof</span> IntConsumer);</div><div class="line">        consumer.accept(<span class="number">100</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line"></div><div class="line">        ConsumerTest consumerTest = <span class="keyword">new</span> ConsumerTest();</div><div class="line"></div><div class="line">        consumerTest.testInt(<span class="keyword">new</span> MyConsumer2&lt;&gt;());</div><div class="line"></div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> * åŒæ—¶å®ç°ä¸¤ä¸ªæ–¹æ³•</div><div class="line"> * <span class="doctag">@param</span> &lt;Integer&gt;</div><div class="line"> */</div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyConsumer2</span>&lt;<span class="title">Integer</span>&gt; <span class="keyword">implements</span> <span class="title">IntConsumer</span>, <span class="title">Consumer</span>&lt;<span class="title">Integer</span>&gt; </span>&#123;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">accept</span><span class="params">(<span class="keyword">int</span> value)</span> </span>&#123;</div><div class="line">        System.out.println(value);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">accept</span><span class="params">(Integer t)</span> </span>&#123;</div><div class="line">        System.out.println(t);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿è¡Œä¸€ä¸‹ç»“æœï¼š</p>
<p><img src="http://static.zybuluo.com/zhumin1990719/sfq22rxzqdmtkaqpnlpiqeko/image_1bf7ehq7bgaj1qrg8k61eiq1e1b2m.png" alt="image_1bf7ehq7bgaj1qrg8k61eiq1e1b2m.png-28.5kB"></p>
<p>å°±å¯ä»¥å‘ç°ï¼Œè¿™ä¸ªæ—¶å€™å°±å’Œå¼€å¤´çš„é‚£ä¸ªä¾‹å­ä¸­çš„ï¼Œç¬¬ä¸€å¤„è½¬æ¢ï¼š éœ€è¦ä¼ å…¥çš„æ˜¯ <code>Consumer</code>, ä½†æ˜¯ä¹Ÿæ˜¯ <code>IntConsumer</code> çš„å®ä¾‹ï¼Œå°±ä¼šè¿›å…¥ç¬¬ä¸€ä¸ªåˆ¤æ–­äº†</p>
<p>è‡³æ­¤ä¸¤ä¸ªå¼ºè½¬å°±è§£é‡Šå®Œæ¯•äº†ï¼</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>è¿™ä¸ªä¾‹å­æƒ³ç»™å¤§å®¶è¯´çš„å°±æ˜¯å‡½æ•°å¼æ¥å£çš„å¾ˆä¼ ç»Ÿçš„å‘½ä»¤å¼ç¼–ç¨‹è¿˜æ˜¯æœ‰ä¸€å®šå·®åˆ«çš„ã€‚å°¤å…¶æ˜¯ <code>lambda</code> è¡¨è¾¾å¼çš„ç±»å‹æ˜¯è¦é ä¸Šä¸‹æ–‡æ¨æ–­çš„è¿™ä¸€ç‚¹ï¼Œéœ€è¦å¥½å¥½çš„ç†è§£~</p>
<p>åªæœ‰æ…¢æ…¢ç†è§£è¿™äº›ï¼Œæ‰èƒ½çœŸæ­£ç†è§£å‡½æ•°å¼ç¼–ç¨‹ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;1-èµ·æº&quot;&gt;&lt;a href=&quot;#1-èµ·æº&quot; class=&quot;headerlink&quot; title=&quot;1 èµ·æº&quot;&gt;&lt;/a&gt;1 èµ·æº&lt;/h2&gt;&lt;p&gt;å¦‚æœä½ çœ‹äº†ä¸Šä¸€ç¯‡æ–‡ç« å…³äº &lt;code&gt;Spliterator&lt;/code&gt; åˆ†å‰²è¿­ä»£å™¨ï¼Œæœ€åä¸€éƒ¨åˆ†è¯´åˆ°äº†å›¾ä¸­çš„ä¸¤ä¸ªå¼ºåˆ¶è½¬æ¢é€»è¾‘çš„ä¸åˆç†ä¹‹å¤„ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç¬¬ä¸€å¤„ï¼Œæˆ‘ä¼ å…¥çš„æ˜¯ä¸€ä¸ª &lt;code&gt;Consumer&lt;/code&gt; æ¥å£ï¼Œä½†æ˜¯åˆ¤æ–­çš„æƒ…å†µå´æ˜¯åˆ¤æ–­ &lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;action &lt;span class=&quot;keyword&quot;&gt;instanceof&lt;/span&gt;  IntConsumer&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;è€Œ IntConsumer å’Œ Consumer æ˜¯æ²¡æœ‰ç»§æ‰¿å…³ç³»çš„å¹³è¡Œå‡½æ•°å¼æ¥å£ã€‚è¿™æ ·çš„è½¬æ¢ä¸ºä½•ä¼šæˆåŠŸï¼Ÿ&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç¬¬äºŒå¤„ï¼Œå½“ç¬¬ä¸€ä¸ªåˆ¤æ–­æ¡ä»¶ä¸æ»¡è¶³çš„æ˜¯æ—¶å€™ï¼Œä½¿ç”¨ï¼ˆIntConsumerï¼‰å¼ºè½¬ &lt;code&gt;lambda&lt;/code&gt; è¡¨è¾¾å¼ï¼Œè¿™æ ·ä¸ºä½•èƒ½æˆåŠŸè¢«éœ€è¦ä¼ å…¥ &lt;code&gt;IntConsumer&lt;/code&gt; å‡½æ•°æ‰€æ¥å—å‘¢ï¼Ÿ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¦‚ä¸‹å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://static.zybuluo.com/zhumin1990719/b5fvbgzis7apng5pcmv4rxfj/image_1bf48rn8nbi1lrs1hgq1f72ass1t.png&quot; alt=&quot;image_1bf48rn8nbi1lrs1hgq1f72ass1t.png-236.6kB&quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="coding life" scheme="http://yoursite.com/tags/coding-life/"/>
    
      <category term="java8" scheme="http://yoursite.com/tags/java8/"/>
    
  </entry>
  
  <entry>
    <title>jdk8 Stream è§£æ2 - Spliteratoråˆ†å‰²è¿­ä»£å™¨</title>
    <link href="http://yoursite.com/2017/05/02/jdk8-Stream-%E8%A7%A3%E6%9E%902-Spliterator%E5%88%86%E5%89%B2%E8%BF%AD%E4%BB%A3%E5%99%A8/"/>
    <id>http://yoursite.com/2017/05/02/jdk8-Stream-è§£æ2-Spliteratoråˆ†å‰²è¿­ä»£å™¨/</id>
    <published>2017-05-02T09:48:43.000Z</published>
    <updated>2017-05-02T09:57:25.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p>è¯´å®Œ<code>Stream</code> çš„ä¸€äº›æºç è§£æã€‚æˆ‘ä»¬çœ‹ä¸‹æˆ‘ä»¬çš„ <code>Stream</code> æ˜¯å¦‚ä½•äº§ç”Ÿçš„ã€‚æˆ‘ä»¬æœ€ä¸ºå¸¸è§çš„æµçš„äº§ç”Ÿæ–¹å¼æ˜¯ <code>collection.stream()</code>, ä½ ç‚¹å¼€<code>Stream()</code>æ–¹æ³•, ä»–æ˜¯é€šè¿‡ <code>Collection</code> è¿™ä¸ªä¸Šå±‚æ¥å£ä¸¤ä¸ªjava8 æ–°å¢ç‰¹æ€§ <code>default method</code> è¿›è¡Œå®ç°ã€‚</p>
<p><img src="http://static.zybuluo.com/zhumin1990719/x7mirnxozw9czo58sgxezv03/image_1bf3u1l911o5rf825gv39aqe9.png" alt="image_1bf3u1l911o5rf825gv39aqe9.png-41.3kB"></p>
<p>è¿™å°±ç‰µæ‰¯åˆ°ä¸€ä¸ªå…³é”®è¦ç‚¹ <code>Spliterator</code> ï¼šåˆ†å‰²è¿­ä»£å™¨ã€‚</p>
<p>æœ¬æ–‡ä¸»è¦æè¿° <code>Spliterator</code> çš„ä½œç”¨ï¼Œå¤§éƒ¨åˆ†æ¥æºäºä½ ä¸æ„¿æ„è¯»çš„ <code>JavaDoc</code>ã€‚</p>
<p><code>Spliterator</code> æ˜¯ <code>jdk8</code> éå¸¸é‡è¦çš„æ¦‚å¿µã€‚é‡Œé¢çš„ç»†èŠ‚å¾ˆå€¼å¾—å­¦ä¹ ç©å‘³ã€‚</p>
<a id="more"></a>
<h2 id="Spliterator-å†—é•¿çš„JavaDoc-è¯´äº†ä»€ä¹ˆï¼Ÿ"><a href="#Spliterator-å†—é•¿çš„JavaDoc-è¯´äº†ä»€ä¹ˆï¼Ÿ" class="headerlink" title="Spliterator å†—é•¿çš„JavaDoc è¯´äº†ä»€ä¹ˆï¼Ÿ"></a>Spliterator å†—é•¿çš„JavaDoc è¯´äº†ä»€ä¹ˆï¼Ÿ</h2><h3 id="åŸºæœ¬ä»‹ç»"><a href="#åŸºæœ¬ä»‹ç»" class="headerlink" title="åŸºæœ¬ä»‹ç»"></a>åŸºæœ¬ä»‹ç»</h3><p><code>Spliterator</code> æ˜¯ä¸€ä¸ªå¯¹æºï¼ˆæ•°ç»„ï¼Œé›†åˆï¼Œioæµç­‰ç­‰ï¼‰ä¸­å…ƒç´ è¿›è¡Œéå†å’Œåˆ†åŒºçš„ç±»ã€‚</p>
<p>å¯ä»¥é€šè¿‡ <code>tryAdvance()</code> æ–¹æ³•é€ä¸ªéå†ï¼Œä¹Ÿå¯ä»¥æŒ‰ç…§ <code>forEachRemaining()</code> æ–¹æ³•è¿›è¡ŒæŒ‰ <em>bulk</em> é€å—çš„éå†ã€‚ï¼ˆå†…éƒ¨è°ƒç”¨çš„è¿˜æ˜¯<em>tryAdvance</em>ï¼‰</p>
<p><code>Spliterator</code> æœ‰ç±»ä¼¼ <code>Collector</code> ä¸­çš„ <code>characteristics</code> , ä½†éƒ½æ˜¯ç”±åå…­è¿›åˆ¶æ¥è¡¨ç¤ºçš„ã€‚</p>
<blockquote>
<ul>
<li>SIZED :è¡¨ç¤ºå¤§å°å›ºå®š, Collectionå¸¸ç”¨</li>
<li>DISTINCT : å»é‡, Setå¸¸ç”¨</li>
<li>SORTED : æœ‰é¡ºåºçš„ SortedSet ä¼šç”¨<br>ç­‰ç­‰</li>
</ul>
</blockquote>
<h3 id="åŸç”Ÿç±»å‹çš„ç‰¹åŒ–ç‰ˆæœ¬"><a href="#åŸç”Ÿç±»å‹çš„ç‰¹åŒ–ç‰ˆæœ¬" class="headerlink" title="åŸç”Ÿç±»å‹çš„ç‰¹åŒ–ç‰ˆæœ¬"></a>åŸç”Ÿç±»å‹çš„ç‰¹åŒ–ç‰ˆæœ¬</h3><p>ç‰¹åŒ–åˆ†å‰²è¿­ä»£å™¨ä¹Ÿè¢«æä¾›ï¼Œå’ŒStreamç±»ä¼¼ã€‚å‡å°‘è£…ç®±å’Œæ‹†ç®±çš„æ“ä½œ<br><img src="http://static.zybuluo.com/zhumin1990719/fdux697e4pizzdyhgfsb51lx/image_1bf3vbfdl10r5vl7ef8t47kium.png" alt="image_1bf3vbfdl10r5vl7ef8t47kium.png-128.9kB"></p>
<h3 id="æ¯”è¿­ä»£å™¨Iterator-æ›´åŠ é«˜æ•ˆçš„éå†å…ƒç´ çš„æ–¹å¼"><a href="#æ¯”è¿­ä»£å™¨Iterator-æ›´åŠ é«˜æ•ˆçš„éå†å…ƒç´ çš„æ–¹å¼" class="headerlink" title="æ¯”è¿­ä»£å™¨Iterator æ›´åŠ é«˜æ•ˆçš„éå†å…ƒç´ çš„æ–¹å¼"></a>æ¯”è¿­ä»£å™¨Iterator æ›´åŠ é«˜æ•ˆçš„éå†å…ƒç´ çš„æ–¹å¼</h3><p>æä¾›æ›´åŠ é«˜æ•ˆçš„æ–¹æ³•ï¼Œè¿›è¡Œæ•°æ®çš„è¿­ä»£ã€‚<br><code>Iterator</code> çš„ä½¿ç”¨éœ€è¦è°ƒç”¨ä¸¤ä¸ªç»„åˆæ–¹æ³• <code>hasNext()</code> ä»¥åŠ <code>next()</code> ï¼ŒåŒäº‹åœ¨å¤šçº¿ç¨‹è®¿é—®çš„æƒ…å†µä¸‹è¿˜ä¼šå‡ºç°ç«äº‰ï¼Œä½ éœ€è¦å»åŒæ­¥ã€‚<br>è€Œåˆ†å‰²è¿­ä»£å™¨ <code>Spliterator</code> ä½¿ç”¨å‡½æ•°å¼ç¼–ç¨‹çš„æ–¹å¼ï¼Œåªç”¨ä¸€ä¸ªæ–¹æ³•å°±å¯ä»¥åšåˆ°è¿™ä¸ªä¸¤ä¸ªå‡½æ•°åŠ¨ä½œã€‚å°±é¿å…äº†ç«äº‰ ï¼Œå°±æ˜¯ <code>tryAdvance()</code> æ–¹æ³•ã€‚åé¢ä¼šä»‹ç»</p>
<h2 id="Spliteratorçš„æ¥å£æ–¹æ³•"><a href="#Spliteratorçš„æ¥å£æ–¹æ³•" class="headerlink" title="Spliteratorçš„æ¥å£æ–¹æ³•"></a>Spliteratorçš„æ¥å£æ–¹æ³•</h2><h3 id="tryAdvance"><a href="#tryAdvance" class="headerlink" title="tryAdvance()"></a>tryAdvance()</h3><p>åŒæ—¶åšäº†  <code>hasNext()</code> ä»¥åŠ <code>next()</code> çš„å·¥ä½œã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line">* å¯¹ç»™å®šçš„å…ƒç´ è¿›è¡Œåˆ¤æ–­ï¼Œå¦‚æœæ»¡è¶³æ¡ä»¶å°±ä¼šæ‰§è¡Œ Action</div><div class="line">*/</div><div class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">tryAdvance</span><span class="params">(Consumer&lt;? <span class="keyword">super</span> T&gt; action)</span></span>;</div></pre></td></tr></table></figure>
<h3 id="forEachRemaining"><a href="#forEachRemaining" class="headerlink" title="forEachRemaining()"></a>forEachRemaining()</h3><p>æ˜¯ä¸€ä¸ª<code>é»˜è®¤æ–¹æ³•</code>ï¼Œå¯¹ä½™ä¸‹çš„å…ƒç´ è¿›è¡Œæ“ä½œï¼Œç›´åˆ°å…ƒç´ å…¨éƒ¨è¢«éå†å®Œ<br>ä¸€èˆ¬æƒ…å†µä¸‹å›ç›´æ¥è°ƒç”¨ä¸Šé¢çš„<code>tryAdvance()</code> æ–¹æ³•ï¼Œä½†æ˜¯ä¹Ÿå¯ä»¥æ›´å…·éœ€è¦è¿›è¡Œé‡å†™ã€‚<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line">* å¯¹ä½™ä¸‹çš„å…ƒç´ è¿›è¡Œæ“ä½œï¼Œç›´åˆ°å…ƒç´ å…¨éƒ¨è¢«éå†å®Œ</div><div class="line">* å¦‚æœæºæ˜¯æœ‰åºçš„ï¼Œéå†ä¹Ÿæ˜¯æœ‰åºçš„</div><div class="line">*/</div><div class="line"><span class="function"><span class="keyword">default</span> <span class="keyword">void</span> <span class="title">forEachRemaining</span><span class="params">(Consumer&lt;? <span class="keyword">super</span> T&gt; action)</span> </span>&#123;</div><div class="line">        <span class="keyword">do</span> &#123; &#125; <span class="keyword">while</span> (tryAdvance(action));</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<blockquote>
<p>è¿™é‡Œæœ‰ä¸€ç‚¹å¾ˆå€¼å¾—æ³¨æ„ï¼Œæ–¹æ³•ä½“ä¸­çš„ <code>do {}</code> æ˜¯ç©ºçš„ï¼Œè¿™ä¸ªæ˜¯å› ä¸º <code>tryAdvance()</code> æ–¹æ³•æœ¬èº«å°±å®Œæˆäº†ä¸¤ä¸ªæ“ä½œ <code>hasNext()</code> ä»¥åŠ <code>next()</code>ï¼Œæ‰€ä»¥æ–¹æ³•ä½“ä¸­ä¸éœ€è¦æœ‰ä»»ä½•æ“ä½œäº†ã€‚è¿™ä¸ªæ˜¯ å‡½æ•°å¼ç¼–ç¨‹å¸¦æ¥çš„å¥½å¤„ã€‚ä»¥åŠä¸å‘½ä»¤å¼ç¼–ç¨‹çš„åŒºåˆ«ã€‚</p>
</blockquote>
<h3 id="trySplit"><a href="#trySplit" class="headerlink" title="trySplit()"></a>trySplit()</h3><p>å°è¯•åˆ‡åˆ†æºæ¥çš„ <code>Spliterator</code>ï¼Œ è¿”å›çš„æ˜¯ï¼ˆæ³¨æ„ï¼ï¼ï¼ï¼‰è¿”å›çš„æ˜¯ <strong><code>åˆ†å‰²å‡ºæ¥çš„é‚£ä¸€éƒ¨åˆ†</code></strong> æ•°æ®ï¼ŒåŸæœ‰çš„æ•°æ®é›†å°†ä¸åœ¨åŒ…å«è¿™éƒ¨åˆ†æ•°æ®é›†åˆã€‚ä¸¤è€… <code>æ²¡æœ‰äº¤é›†</code>ã€‚å‰©ä¸‹çš„å¯ä»¥ç»§ç»­åˆ†å‰²ï¼Œä¹Ÿè®¸ä¸å¯ä»¥ç»§ç»­åˆ†å‰²äº†</p>
<blockquote>
<p>ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘åŸæ¥æœ‰ 100ä¸ªå…ƒç´ ï¼Œæˆ‘é€šè¿‡ <code>trySplit</code> åˆ‡åˆ†å‡º <code>30</code> ä¸ªï¼Œä½œä¸ºä¸€ä¸ªæ–°çš„ <code>åˆ†å‰²è¿­ä»£å™¨</code> è¿”å›ï¼ŒåŸæœ‰çš„ï¼Œå°±è¿˜å‰©ä¸‹ <code>70</code> ä¸ªã€‚</p>
</blockquote>
<ul>
<li>å¦‚æœæ˜¯åŸæœ‰æ•°æ®é›†åˆæ˜¯ <code>ORDERD</code> çš„ï¼Œåˆ†å‡ºæ¥çš„ä¹Ÿæ˜¯æœ‰åºçš„ã€‚</li>
<li>é™¤éå…ƒç´ æ•°é‡æ˜¯æ— ç©·çš„ï¼Œå¦åˆ™ï¼Œæœ€åä¸€å®šä¼šå‡ºç°ä¸èƒ½åœ¨åˆ†å‰²çš„æƒ…å†µï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œè¿”å›çš„ç»“æœæ˜¯ <code>null</code></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function">Spliterator&lt;T&gt; <span class="title">trySplit</span><span class="params">()</span></span>;</div></pre></td></tr></table></figure>
<h3 id="estimateSize"><a href="#estimateSize" class="headerlink" title="estimateSize()"></a>estimateSize()</h3><p>ä¼°ç®—é›†åˆå‰©ä½™ç»™<code>forEachRemaining</code>å¤§å°ï¼Œä¸ä¸€å®šç²¾ç¡®ã€‚<br>ä½†æ˜¯å¦‚æœè¿™ä¸ª <code>Spliterator</code> æ˜¯ <code>SIZED</code>ï¼Œæ²¡æœ‰è¢«éå†æˆ–è€… splitï¼Œ æˆ–æ˜¯ <code>SUBSIZED</code>çš„ï¼Œæ²¡æœ‰è¢«éå†ï¼Œé‚£ä¹ˆä»–è¿™ä¸ªå€¼ä¸€å®šæ˜¯å‡†ç¡®çš„ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">long</span> <span class="title">estimateSize</span><span class="params">()</span></span>;</div></pre></td></tr></table></figure>
<p>è¿˜æœ‰ä¸ªä¸ä¹‹ç›¸å…³çš„é»˜è®¤æ–¹æ³•ï¼Œå°±æ˜¯åˆ©ç”¨è¿™ä¸ªç‰¹æ€§ã€‚<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">default</span> <span class="keyword">long</span> <span class="title">getExactSizeIfKnown</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> (characteristics() &amp; SIZED) == <span class="number">0</span> ? -<span class="number">1L</span> : estimateSize();</div><div class="line">    &#125;</div></pre></td></tr></table></figure></p>
<h3 id="characteristics"><a href="#characteristics" class="headerlink" title="characteristics()"></a>characteristics()</h3><p>è¡¨ç¤ºé›†åˆçš„ç‰¹æ€§ï¼Œä¸€å…±8ä¸ªã€‚</p>
<ul>
<li>åˆ†å‰²ä¹‹å‰ï¼Œè¿”å›çš„ç»“æœéƒ½æ˜¯ä¸€è‡´çš„</li>
</ul>
<blockquote>
<p>å¦‚æœè¿”å›ç»“æœä¸ä¸€è‡´ï¼Œåˆ™æ“ä½œæ˜¯ä¸å—ä¿è¯çš„</p>
</blockquote>
<ul>
<li>è€Œåˆ†å‰²ä¹‹åï¼Œä¸ä¿è¯ä¸€è‡´</li>
</ul>
<p>æœ‰ä¸€ä¸ªé»˜è®¤æ–¹æ³•ç”¨äºåˆ¤æ–­ <code>Spliterator</code> æ˜¯å¦åŒ…å«è¿™ä¸ªç‰¹æ€§<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">default</span> <span class="keyword">boolean</span> <span class="title">hasCharacteristics</span><span class="params">(<span class="keyword">int</span> characteristics)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> (characteristics() &amp; characteristics) == characteristics;</div><div class="line">    &#125;</div></pre></td></tr></table></figure></p>
<h3 id="getComparator"><a href="#getComparator" class="headerlink" title="getComparator"></a>getComparator</h3><p>å¦‚æœæºæ˜¯<code>SORTED</code> ç±»å‹çš„ï¼Œä¸”æœ‰æ¯”è¾ƒå™¨ <code>Comparator</code> çš„è¯ï¼Œåˆ™è¿”å›è¿™ä¸ª <code>Comparator</code>ï¼Œå¦‚æœæ˜¯<code>SORTED</code> ç±»å‹çš„ï¼Œä½†æ˜¯æ²¡æœ‰æ¯”è¾ƒå™¨ï¼Œåˆ™è¿”å› <code>null</code> , é™¤æ­¤ä¹‹å¤–ï¼Œéƒ½æŠ›å‡ºå¼‚å¸¸</p>
<p>æ¥å£çš„é»˜è®¤æ–¹æ³•é‡Œï¼Œå°±æ˜¯æŠ›å‡ºäº†å¼‚å¸¸</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">default Comparator&lt;? super T&gt; getComparator() &#123;</div><div class="line">        throw new IllegalStateException();</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<h2 id="Spliteratorçš„8ä¸ªCharacteristics-ç‰¹æ€§"><a href="#Spliteratorçš„8ä¸ªCharacteristics-ç‰¹æ€§" class="headerlink" title="Spliteratorçš„8ä¸ªCharacteristics ç‰¹æ€§"></a>Spliteratorçš„8ä¸ªCharacteristics ç‰¹æ€§</h2><h3 id="ORDERED"><a href="#ORDERED" class="headerlink" title="ORDERED"></a>ORDERED</h3><p>æºçš„å…ƒç´ æœ‰åºï¼Œ<code>tryAdvance</code> ï¼Œ<code>forEachRemaining</code>å’Œ <code>trySplit</code> éƒ½ä¼šä¿è¯æœ‰åºçš„è¿›è¡Œå…ƒç´ çš„å¤„ç†</p>
<ul>
<li>éœ€è¦æ³¨æ„ <code>hashSet</code> è¿™ç±» <code>Collection</code> æ˜¯ä¸ä¿è¯æœ‰åºçš„</li>
<li>æœ‰<code>ORDERED</code> ç‰¹æ€§çš„æ•°æ®ï¼Œåœ¨å¹¶å‘è®¡ç®—çš„æ—¶å€™å®¢æˆ·ç«¯ä¹Ÿè¦åšé¡ºåºé™åˆ¶çš„ä¿è¯</li>
</ul>
<h3 id="DISTINCT"><a href="#DISTINCT" class="headerlink" title="DISTINCT"></a>DISTINCT</h3><p>å¤ªç®€å•ï¼Œå”¯ä¸€æ€§ã€‚ ç±»ä¼¼ <code>Set</code> è¿™æ ·çš„ä¼ å…¥é›†åˆä¼šæ‹¥æœ‰è¿™æ ·çš„ç‰¹æ€§</p>
<h3 id="SORTED"><a href="#SORTED" class="headerlink" title="SORTED"></a>SORTED</h3><p>æœ‰è¿™ç§ç‰¹æ€§çš„ <code>Spliterator</code> ï¼Œæœ‰ä¸€ä¸ªç‰¹å®šçš„é¡ºåºã€‚æˆ–è€…æ˜¯æ‰€æœ‰å…ƒç´ éƒ½æ˜¯å¯æ¯”è¾ƒçš„ï¼Œæˆ–è€…æ˜¯æœ‰ç‰¹å®šçš„æ¯”è¾ƒå™¨ã€‚</p>
<ul>
<li>æœ‰ <code>SORTED</code> ä¸€å®šä¼šæœ‰ <code>ORDERED</code></li>
</ul>
<h3 id="SIZED"><a href="#SIZED" class="headerlink" title="SIZED"></a>SIZED</h3><p>æœ‰è¿™ç§å±æ€§çš„ <code>Spliterator</code> åœ¨éå†å’Œåˆ†å‰²ä¹‹å‰ï¼Œ<code>estimateSize()</code> è¿”å›çš„å¤§å°æ˜¯å›ºå®šçš„ï¼Œå¹¶ä¸”æ˜¯å‡†ç¡®çš„ã€‚</p>
<h3 id="NONNULL"><a href="#NONNULL" class="headerlink" title="NONNULL"></a>NONNULL</h3><p>ä¸ä¸º <code>NULL</code>, å¤§éƒ¨åˆ†å¹¶å‘çš„é›†åˆï¼Œé˜Ÿåˆ—ï¼ŒMap éƒ½å¯èƒ½ä¼šæœ‰è¿™æ ·çš„ç‰¹æ€§ã€‚</p>
<h3 id="IMMUTABLE"><a href="#IMMUTABLE" class="headerlink" title="IMMUTABLE"></a>IMMUTABLE</h3><p>ä¸å¯å˜çš„ã€‚å…ƒç´ éå†æœŸé—´ä¸å¯ä»¥è¢« æ·»åŠ ï¼Œæ›¿æ¢ï¼Œåˆ é™¤ï¼ˆcannot be added, replaced, or removedï¼‰<br>å¦åˆ™ï¼Œåº”è¯¥æŠ›å‡ºå¼‚å¸¸ã€‚</p>
<h3 id="CONCURRENT"><a href="#CONCURRENT" class="headerlink" title="CONCURRENT"></a>CONCURRENT</h3><p>æ”¯æŒå¹¶å‘æ“ä½œçš„ã€‚ </p>
<ul>
<li>é¡¶å±‚çš„ <code>Spliterator</code> ä¸å¯ä»¥ <code>CONCURRENT</code> ä¸ <code>SIZED</code>ã€‚ è¿™ä¸¤è€…æ˜¯ç›¸äº’å†²çªçš„ã€‚</li>
<li>ä½†æ˜¯åˆ†å‰²ä¹‹åçš„ <code>Spliterator</code> ï¼Œ å¯èƒ½æ˜¯ <code>SIZED</code>ï¼Œ é¡¶å±‚ä¸èƒ½å†³å®šåº•å±‚</li>
</ul>
<h3 id="SUBSIZED"><a href="#SUBSIZED" class="headerlink" title="SUBSIZED"></a>SUBSIZED</h3><p>ä»<code>trySplit()</code>è¢«åˆ†å‰²åçš„æ‰€æœ‰åˆ†å‰²è¿­ä»£å™¨éƒ½æ˜¯ <code>SIZED</code> ä»¥åŠ <code>SUBSIZED</code> çš„ã€‚<br>å¦‚æœåˆ†å‰²åï¼Œæ²¡æœ‰æŒ‰ç…§è¦æ±‚è¿”å›<code>SIZED</code> ä»¥åŠ <code>SUBSIZED</code> å±æ€§ï¼Œé‚£ä¹ˆæ“ä½œæ˜¯ä¸è¢«ä¿è¯çš„ï¼Œä¹Ÿå°±æ˜¯ç»“æœä¸å¯é¢„æµ‹ã€‚</p>
<blockquote>
<p>è¿™ä¸ªå±æ€§å’Œ <code>SIZED</code> çš„åŒºåˆ«å°±æ˜¯ï¼Œ <code>SIZED</code> ä¸ä¿è¯ <code>SUBSIZED</code>ã€‚è€Œ <code>SUBSIZED</code> ä¼šè¦æ±‚ä¿è¯ <code>SIZED</code></p>
</blockquote>
<h2 id="å†…éƒ¨ç‰¹åŒ–è€Œåšçš„å‡½æ•°å¼æ¥å£-OfPrimitive"><a href="#å†…éƒ¨ç‰¹åŒ–è€Œåšçš„å‡½æ•°å¼æ¥å£-OfPrimitive" class="headerlink" title="å†…éƒ¨ç‰¹åŒ–è€Œåšçš„å‡½æ•°å¼æ¥å£ (OfPrimitive)"></a>å†…éƒ¨ç‰¹åŒ–è€Œåšçš„å‡½æ•°å¼æ¥å£ (OfPrimitive)</h2><p>é™¤äº†ä¸Šé¢çš„å‡½æ•°ï¼Œä»¥åŠç‰¹æ€§ï¼Œ<code>Spliterator</code> è¿­ä»£å™¨ä¸­ï¼Œè¿˜æœ‰å‡ ä¸ªå®šä¹‰åœ¨å†…éƒ¨çš„æ¥å£ã€‚</p>
<p><img src="http://static.zybuluo.com/zhumin1990719/ai9cdxr36s7o0zv3bdb67d1r/image_1bf4821k2kft1nsq13981l5j1h1d13.png" alt="image_1bf4821k2kft1nsq13981l5j1h1d13.png-207.1kB"></p>
<p><code>OfPrimitive</code> é‡è½½äº†ï¼ˆoverloadsï¼‰äº† <code>Spliterator</code> çš„æ–¹æ³•ã€‚ç”¨äºå®ç°ç‰¹åŒ–çš„åˆ†å‰²è¿­ä»£å™¨ã€‚</p>
<p><img src="http://static.zybuluo.com/zhumin1990719/gj8uepdtipdysdlreaypan5n/image_1bf487rnqvk11cpuoeve911ss81g.png" alt="image_1bf487rnqvk11cpuoeve911ss81g.png-41.2kB"></p>
<blockquote>
<p><strong>overloads</strong>ï¼šè¿”å›ç±»å‹åç§°ä¸€è‡´ï¼Œå‚æ•°ä¸ä¸€è‡´ã€‚<br>æ³¨æ„ä¸ <code>override</code> çš„åŒºåˆ«</p>
</blockquote>
<h3 id="ä¸€ä¸ªé¢ è¦†é¢å‘å¯¹è±¡ç¼–ç¨‹å¸¸è¯†çš„ç°è±¡"><a href="#ä¸€ä¸ªé¢ è¦†é¢å‘å¯¹è±¡ç¼–ç¨‹å¸¸è¯†çš„ç°è±¡" class="headerlink" title="ä¸€ä¸ªé¢ è¦†é¢å‘å¯¹è±¡ç¼–ç¨‹å¸¸è¯†çš„ç°è±¡"></a>ä¸€ä¸ªé¢ è¦†é¢å‘å¯¹è±¡ç¼–ç¨‹å¸¸è¯†çš„ç°è±¡</h3><p>è¯·å¤§å®¶çœ‹å›¾<br><img src="http://static.zybuluo.com/zhumin1990719/tr2zzp41rvb62w9t2xo1lb38/image_1bf48rn8nbi1lrs1hgq1f72ass1t.png" alt="image_1bf48rn8nbi1lrs1hgq1f72ass1t.png-236.6kB"></p>
<p>è¿™ä¸¤æ¬¡ç±»å‹è½¬æ¢å¥‡æ€ªçš„åœ°æ–¹æ˜¯ï¼š</p>
<p><code>IntConsumer</code> ä¸ <code>Consumer</code> ä¸¤ä¸ªæ¥å£ï¼Œæ²¡æœ‰ç»§æ‰¿å…³ç³»ï¼Œä¸¤ä¸ªæ¥å£æ˜¯å¹³è¡Œçš„ã€‚ è¿™æ ·çš„è½¬æ¢ï¼Œåœ¨ä¹‹å‰æ˜¯ä¸å¯èƒ½æˆåŠŸçš„ã€‚ ç®€ç›´æ˜¯é¢ è¦†è®¤çŸ¥å•Šï¼</p>
<blockquote>
<p>æˆ‘æ‚„æ‚„è¯´å•Šï¼ˆå¹¶æ²¡æœ‰ã€‚ã€‚ä½ ä¹ŸåŸºæœ¬ä¸ä¼šå…³å¿ƒä¸æ˜¯ä¹ˆã€‚ã€‚ï¼‰</p>
</blockquote>
<p>ä½†æ˜¯åœ¨å‡½æ•°å¼ç¼–ç¨‹ä¸­èƒ½è½¬æ¢æˆåŠŸå‘¢ï¼Ÿ ä½ å¯ä»¥ç­‰æˆ‘ä¸‹ä¸€ç¯‡æ–‡ç« ~</p>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;æ¦‚è¿°&quot;&gt;&lt;a href=&quot;#æ¦‚è¿°&quot; class=&quot;headerlink&quot; title=&quot;æ¦‚è¿°&quot;&gt;&lt;/a&gt;æ¦‚è¿°&lt;/h2&gt;&lt;p&gt;è¯´å®Œ&lt;code&gt;Stream&lt;/code&gt; çš„ä¸€äº›æºç è§£æã€‚æˆ‘ä»¬çœ‹ä¸‹æˆ‘ä»¬çš„ &lt;code&gt;Stream&lt;/code&gt; æ˜¯å¦‚ä½•äº§ç”Ÿçš„ã€‚æˆ‘ä»¬æœ€ä¸ºå¸¸è§çš„æµçš„äº§ç”Ÿæ–¹å¼æ˜¯ &lt;code&gt;collection.stream()&lt;/code&gt;, ä½ ç‚¹å¼€&lt;code&gt;Stream()&lt;/code&gt;æ–¹æ³•, ä»–æ˜¯é€šè¿‡ &lt;code&gt;Collection&lt;/code&gt; è¿™ä¸ªä¸Šå±‚æ¥å£ä¸¤ä¸ªjava8 æ–°å¢ç‰¹æ€§ &lt;code&gt;default method&lt;/code&gt; è¿›è¡Œå®ç°ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://static.zybuluo.com/zhumin1990719/x7mirnxozw9czo58sgxezv03/image_1bf3u1l911o5rf825gv39aqe9.png&quot; alt=&quot;image_1bf3u1l911o5rf825gv39aqe9.png-41.3kB&quot;&gt;&lt;/p&gt;
&lt;p&gt;è¿™å°±ç‰µæ‰¯åˆ°ä¸€ä¸ªå…³é”®è¦ç‚¹ &lt;code&gt;Spliterator&lt;/code&gt; ï¼šåˆ†å‰²è¿­ä»£å™¨ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡ä¸»è¦æè¿° &lt;code&gt;Spliterator&lt;/code&gt; çš„ä½œç”¨ï¼Œå¤§éƒ¨åˆ†æ¥æºäºä½ ä¸æ„¿æ„è¯»çš„ &lt;code&gt;JavaDoc&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Spliterator&lt;/code&gt; æ˜¯ &lt;code&gt;jdk8&lt;/code&gt; éå¸¸é‡è¦çš„æ¦‚å¿µã€‚é‡Œé¢çš„ç»†èŠ‚å¾ˆå€¼å¾—å­¦ä¹ ç©å‘³ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="coding life" scheme="http://yoursite.com/tags/coding-life/"/>
    
      <category term="java8" scheme="http://yoursite.com/tags/java8/"/>
    
  </entry>
  
  <entry>
    <title>jdk8 Stream &amp; BaseStream æºç éš¾ç‚¹æµ…æ1</title>
    <link href="http://yoursite.com/2017/05/02/jdk8-Stream-BaseStream-%E6%BA%90%E7%A0%81%E9%9A%BE%E7%82%B9%E6%B5%85%E6%9E%901/"/>
    <id>http://yoursite.com/2017/05/02/jdk8-Stream-BaseStream-æºç éš¾ç‚¹æµ…æ1/</id>
    <published>2017-05-02T04:15:00.000Z</published>
    <updated>2017-05-02T04:27:32.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><ul>
<li>ç®€è¦ä»‹ç» <code>Stream</code> çš„ javadocï¼Œä¸é›†åˆçš„å…³ç³»ä»¥åŠåŒºåˆ«ï¼Œä¸€äº›é‡è¦çš„æ³¨æ„äº‹é¡¹</li>
<li>éš¾æ‡‚çš„ <code>Stream</code> ç±»çš„å£°æ˜ï¼Œä»‹ç»æ¯”è¾ƒéš¾æ‡‚çš„ <code>onClose()</code> æ–¹æ³•çš„è°ƒç”¨</li>
</ul>
<a id="more"></a>
<h2 id="Streamçš„javadoc"><a href="#Streamçš„javadoc" class="headerlink" title="Streamçš„javadoc"></a>Streamçš„javadoc</h2><h3 id="Stream-çš„ä½œç”¨ä¸ç‰¹åŒ–ç‰ˆæœ¬"><a href="#Stream-çš„ä½œç”¨ä¸ç‰¹åŒ–ç‰ˆæœ¬" class="headerlink" title="Stream çš„ä½œç”¨ä¸ç‰¹åŒ–ç‰ˆæœ¬"></a>Stream çš„ä½œç”¨ä¸ç‰¹åŒ–ç‰ˆæœ¬</h3><p>Stream æ˜¯å¯¹ä¸€ä¸ªåºåˆ—åš <code>ä¸²è¡Œ</code> æˆ–è€… <code>å¹¶è¡Œ</code> èšåˆæ“ä½œã€‚ä»–ç»§æ‰¿è‡ª <code>Stream</code><br>Stream åŒæ—¶è¿˜æœ‰å‡ ä¸ªç‰¹åŒ–çš„ç‰ˆæœ¬ ï¼Œ<code>IntStream</code> , <code>LongStream</code>, <code>DoubleStream</code>. ä»–ä»¬ä¸ºäº†å‡å°‘æµæ“ä½œçš„æ—¶å€™ä¸€äº›ä¸å¿…è¦çš„è£…ç®±å’Œæ‹†ç®±çš„æ“ä½œã€‚</p>
<blockquote>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä»¥ä¸Šå››ä¸ª <code>Stream</code> æ˜¯å¹³è¡Œå…³ç³»ï¼Œä»–ä»¬éƒ½æ˜¯ç»§æ‰¿è‡ª <code>BaseStream</code></p>
</blockquote>
<p>ä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line">* å°†é›†åˆ widgets ä¸­çš„å…ƒç´ ä¸­çº¢è‰²çš„å…ƒç´ çš„é‡é‡æ±‚å’Œ</div><div class="line">* ç¬¬ä¸€æ­¥ filter() è¿‡æ»¤çº¢è‰²</div><div class="line">* ç¬¬äºŒæ­¥ mapToInt() æ‹¿å‡ºæ‰€æœ‰çš„Redçš„é‡é‡ï¼Œç”Ÿæˆä¸€ä¸ª IntStream</div><div class="line">* ç¬¬ä¸‰æ­¥ sum() æ±‚å’Œï¼Œå¹¶è¿”å›</div><div class="line">*/</div><div class="line"><span class="keyword">int</span> sum = widgets.stream()</div><div class="line">                      .filter(w -&gt; w.getColor() == RED)</div><div class="line">                      .mapToInt(w -&gt; w.getWeight())</div><div class="line">                      .sum();</div></pre></td></tr></table></figure>
<h3 id="Stream-çš„ç»„æˆä¸ç‰¹ç‚¹"><a href="#Stream-çš„ç»„æˆä¸ç‰¹ç‚¹" class="headerlink" title="Stream çš„ç»„æˆä¸ç‰¹ç‚¹"></a>Stream çš„ç»„æˆä¸ç‰¹ç‚¹</h3><p>è¦æƒ³å®ç°è®¡ç®—ï¼Œæ‰€æœ‰æ“ä½œï¼Œéƒ½ä¼šè¢«æ”¾å…¥ä¸€ä¸ª <code>pipeline</code> å½“ä¸­ï¼ˆç±»ä¼¼liunxï¼‰ä¸­çš„æ“ä½œã€‚</p>
<p>è€Œä¸€ä¸ªæµç®¡é“ï¼ˆpipelineï¼‰åŒ…å«ï¼š</p>
<blockquote>
<ul>
<li>source(æº)ï¼š æ•°ç»„ï¼Œé›†åˆï¼Œè¿­ä»£å™¨ï¼ŒI/O æ“ä½œç­‰ç­‰</li>
<li>0ä¸ªæˆ–è€…å¤šä¸ªä¸­é—´æ“ä½œï¼š å°†ä¸€ä¸ªæµè½¬æˆå¦å¤–ä¸€ä¸ªæµ</li>
<li>1ä¸ªç»ˆæ­¢æ“ä½œ : äº§ç”Ÿä¸€ä¸ªç»“æœ(æ¯”å¦‚ä¸Šé¢çš„ä¾‹å­ä¸­çš„æ±‚å’Œ) or æˆ–è€…ä¿®æ”¹ä¼ å…¥å¯¹è±¡çš„å±æ€§ã€‚</li>
</ul>
</blockquote>
<p>æµæ˜¯Lazyçš„æ‡’æƒ°çš„ï¼ï¼ ä½ ä¸åŠ  <code>ç»ˆæ­¢æ“ä½œ</code> æµçš„æ“ä½œï¼Œå°±ä¸ä¼šè¢«æ‰§è¡Œã€‚<br>å¦‚ä¸Šé¢çš„ä¾‹å­ï¼Œæ²¡æœ‰æœ€åçš„ <code>Sum()</code> å‡½æ•°ï¼Œå‰é¢çš„æ“ä½œæ˜¯ä¸ä¼šè¢«æ‰§è¡Œçš„ã€‚</p>
<h3 id="é›†åˆå’ŒStream-çš„åŒºåˆ«"><a href="#é›†åˆå’ŒStream-çš„åŒºåˆ«" class="headerlink" title="é›†åˆå’ŒStream çš„åŒºåˆ«"></a>é›†åˆå’ŒStream çš„åŒºåˆ«</h3><p>é›†åˆï¼š æ³¨é‡å­˜å‚¨ï¼Œä¸»è¦è€ƒè™‘å…ƒç´ çš„è®¿é—®ä¸ç®¡ç†<br>Stream ï¼šæ³¨é‡è®¡ç®—ï¼Œä¸»è¦è€ƒè™‘ä»¥ä¸€ç§<code>æè¿°æ€§</code> çš„è¯­è¨€æ¥å¯¹æºè¿›è¡Œä¸€ç³»åˆ—çš„æ“ä½œï¼Œå¹¶å°†æ“ä½œèšåˆèµ·æ¥ã€‚</p>
<h3 id="æµçš„æ³¨æ„äº‹é¡¹"><a href="#æµçš„æ³¨æ„äº‹é¡¹" class="headerlink" title="æµçš„æ³¨æ„äº‹é¡¹"></a>æµçš„æ³¨æ„äº‹é¡¹</h3><p>1 æµä¸­çš„æ“ä½œï¼Œéƒ½åº”æ˜¯å‡½æ•°å¼æ¥å£ï¼ˆlambdaè¡¨è¾¾å¼æˆ–è€…æ–¹æ³•å¼•ç”¨ï¼‰<br>2 æµä¸èƒ½è¢«é‡ç”¨ï¼Œæ¯ä¸ªæµåªèƒ½åº”ç”¨ä¸€æ¬¡ã€‚æƒ³å†æ¬¡æ“ä½œä½ éœ€è¦é‡æ–°ç”Ÿæˆä¸€ä¸ªæµ</p>
<p>3 æµè™½ç„¶å®ç°äº† <code>AutoCloseable</code> æ¥å£ï¼Œä½†æ˜¯å‡ ä¹æ‰€æœ‰çš„æµéƒ½æ˜¯ä¸ç”¨å…³é—­çš„ï¼Œå› ä¸ºä»–çš„æºå¤§éƒ¨åˆ†æƒ…å†µä¸‹éƒ½æ˜¯é›†åˆï¼Œè€Œé›†åˆæ˜¯ä¸ç”¨å…³é—­çš„ã€‚</p>
<blockquote>
<p>é™¤éæºæ˜¯ä¸€ä¸ª <code>I/O Channel</code>ã€‚ æ¯”å¦‚ Files.lines() æ–¹æ³•ã€‚<br>å¦‚æœæ˜¯è¿™æ ·ï¼ŒStream å°±å¯ä»¥ç”³æ˜åœ¨ <code>try-with-resources block</code> ä¸­ã€‚<br>å…³äºè¿™ä¸ª <code>j7</code> æ–°æ¥å£çš„ä½¿ç”¨ï¼Œå¯ä»¥çœ‹æˆ‘ä¹‹å‰çš„ä¸€ç¯‡å…³äº <code>AutoCloseable</code> çš„ä»‹ç» <a href="http://movingon.cn/2017/05/02/jdk1-7%E6%96%B0%E5%A2%9E%E8%87%AA%E5%8A%A8%E5%85%B3%E9%97%AD%E6%8E%A5%E5%8F%A3AutoCloseable/" target="_blank" rel="external">jdk1.7æ–°å¢è‡ªåŠ¨å…³é—­æ¥å£AutoCloseable</a></p>
</blockquote>
<p>å¤šè¯´ä¸€å¥ï¼Œ<code>Files.lines()</code> æ˜¯ j8 ä¸­æ–°å¢çš„æ–¹æ³•ï¼Œæœ‰ç‚¹ç±»ä¼¼ <code>python</code> ä¸­ <code>readlines()</code> æ–¹æ³•ã€‚å¾ˆå¥½ç”¨ã€‚</p>
<h2 id="Stream-amp-BaseStream-è§£æ"><a href="#Stream-amp-BaseStream-è§£æ" class="headerlink" title="Stream &amp; BaseStream è§£æ"></a>Stream &amp; BaseStream è§£æ</h2><h3 id="çœ‹ä¸æ‡‚çš„å£°æ˜"><a href="#çœ‹ä¸æ‡‚çš„å£°æ˜" class="headerlink" title="çœ‹ä¸æ‡‚çš„å£°æ˜"></a>çœ‹ä¸æ‡‚çš„å£°æ˜</h3><p>æˆ‘ä»¬å¯ä»¥çœ‹ä¸€ä¸‹ <code>Stream</code> ä»¥åŠ <code>BaseStream</code> çš„ç±»çš„å£°æ˜</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">//Stream</div><div class="line">public interface Stream&lt;T&gt; extends BaseStream&lt;T, Stream&lt;T&gt;&gt; </div><div class="line">//BaseStream</div><div class="line">public interface BaseStream&lt;T, S extends BaseStream&lt;T, S&gt;&gt;</div></pre></td></tr></table></figure>
<blockquote>
<p><code>BaseStream</code> ä¸­ï¼Œç¬¬äºŒä¸ªæ³›å‹æ˜¯ <code>S extends BaseStream&lt;T, S&gt;</code> ï¼Œè€Œ <code>Stream</code> ä¸­ï¼Œç¬¬äºŒä¸ªæ³›å‹æ˜¯ <code>Stream&lt;T&gt;</code>ï¼Œ æ­£å¥½æ˜¯æ»¡è¶³ <code>extends BaseStream&lt;T, S&gt;</code> çš„æ¡ä»¶çš„ï¼Œæ‰€ä»¥å¯ä»¥è¿™ä¹ˆå†™ã€‚</p>
</blockquote>
<p>ä¸¤ä¸ªæ³›å‹æœ‰æ²¡æœ‰æ„Ÿè§‰æœ‰ç‚¹æ™•ã€‚å…¶å®æ¯”è¾ƒå¥½ç†è§£ã€‚</p>
<ul>
<li><code>T</code> è¿™ä¸ªæ³›å‹å¾ˆå¥½ç†è§£ï¼Œå°±æ˜¯æµä¸­å…ƒç´ çš„ç±»å‹</li>
<li><code>S</code> ï¼Ÿ</li>
</ul>
<p>å¦‚æœä½ çœ‹è¿‡javadocçš„æè¿°ï¼Œæµçš„æ‰€æœ‰ä¸­é—´æ“ä½œï¼Œéƒ½ä¼šè¿”å›ä¸€ä¸ªæµï¼Œè€Œè¿™ä¸ª<code>S</code> å°±ä»£è¡¨ç€ä¸­é—´æ“ä½œè¿”å›çš„æµçš„ç±»å‹ã€‚<br>æ¯”å¦‚æˆ‘ä»¬çœ‹ä¸€ä¸‹è¿™ä¸ªåœ¨ <code>Stream</code> ä¸­çš„æ–¹æ³•ï¼ˆå…¶ä»–æ–¹æ³•ä¸å…¶ä¸€è‡´ï¼‰</p>
<p><img src="http://static.zybuluo.com/zhumin1990719/m1x94rwz2ygkwzgfwbap4prp/image_1bf3j7bv61mi710k61td11d8l5o79.png" alt="image_1bf3j7bv61mi710k61td11d8l5o79.png-124.2kB"></p>
<h3 id="éš¾æ‡‚çš„-onClose-æ–¹æ³•"><a href="#éš¾æ‡‚çš„-onClose-æ–¹æ³•" class="headerlink" title="éš¾æ‡‚çš„ onClose() æ–¹æ³•"></a>éš¾æ‡‚çš„ onClose() æ–¹æ³•</h3><p>ä¸Šé¢æˆ‘ä»¬çŸ¥é“ <code>BaseStream</code> å®ç°äº† <code>AutoCloseable</code> æ¥å£ï¼Œä¹Ÿå°±æ˜¯ <code>Close()</code> æ–¹æ³•å¯ä»¥å¾—åˆ°è°ƒç”¨ã€‚ä½†æ˜¯ <code>BaseStream</code> ä¸­ï¼Œç»™æˆ‘ä»¬æä¾›äº†è¦ç»™<code>OnClose()</code> æ–¹æ³•ã€‚æˆ‘ä»¬çœ‹ä¸‹æˆªå›¾</p>
<p><img src="http://static.zybuluo.com/zhumin1990719/p8cudj4reir8u8t9eenmtrct/image_1bf3kmgk61641d2k1euk992t28m.png" alt="image_1bf3kmgk61641d2k1euk992t28m.png-165.3kB"></p>
<p>è¿™ä¸ªæ–¹æ³•ï¼Œå°±æ˜¯å½“ <code>Close()</code> æ–¹æ³•è¢«è°ƒç”¨çš„æ—¶å€™ <code>onClose()</code>ä¼šè¢«è°ƒç”¨ã€‚ä½†æ˜¯æœ‰å‡ ä¸ªæ³¨æ„çš„ç‚¹</p>
<blockquote>
<ul>
<li><code>onColse()</code> æ–¹æ³•ä¹Ÿè¿”å›ä¸€ä¸ªæµï¼Œä¹Ÿå°±æ˜¯è¯´å¯ä»¥å¤šæ¬¡è°ƒç”¨ã€‚</li>
<li>å¦‚æœä½ å†™äº†å¤šä¸ª<code>onClose()</code> æ–¹æ³•ï¼Œå®ƒä¼šæŒ‰ç…§é¡ºåºè°ƒç”¨ã€‚</li>
<li>å‰ä¸€ä¸ª <code>onClose()</code> æ–¹æ³•é™¤äº†å¼‚å¸¸ä¸å½±å“åç»­ <code>onClose</code> æ–¹æ³•çš„ä½¿ç”¨</li>
<li>å¦‚æœå¤šä¸ª <code>onClose()</code> æ–¹æ³•éƒ½æŠ›å‡ºå¼‚å¸¸ï¼Œåªå±•ç¤ºç¬¬ä¸€ä¸ªå¼‚å¸¸çš„å †æ ˆï¼Œè€Œå…¶ä»–å¼‚å¸¸ä¼šè¢«å‹ç¼©ï¼Œåªå±•ç¤ºéƒ¨åˆ†ä¿¡æ¯</li>
</ul>
</blockquote>
<p>ä¸Šä»£ç ï¼ï¼ï¼ï¼ï¼ï¼</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> * Created by charleszhu on 2017/5/2.</div><div class="line"> */</div><div class="line">public class StreamTestOnCloseTest &#123;</div><div class="line">    </div><div class="line">    public static void main(String[] args) &#123;</div><div class="line"></div><div class="line">        List&lt;String&gt; testString = Arrays.asList(&quot;min&quot;, &quot;ge&quot;, &quot;da&quot;, &quot;shuaibi&quot;);</div><div class="line"></div><div class="line">        /**</div><div class="line">         * ä¸¤æ¬¡å…³é—­</div><div class="line">         * ä¸¤æ¬¡å¼‚å¸¸</div><div class="line">         * é¢„æœŸï¼šä¸¤æ¬¡å…³é—­è¾“å‡ºä¾æ¬¡æ‰“å‡ºï¼›ä¸¤æ¬¡å…³é—­å¼‚å¸¸åªæ‰“å°ä¸€æ¬¡å †æ ˆï¼Œå¦å¤–ä¸€æ¬¡åªå±•ç¤º</div><div class="line">         */</div><div class="line">        try(Stream&lt;String&gt; stream = testString.stream()) &#123;</div><div class="line">            stream.onClose(() -&gt;&#123;</div><div class="line">                System.out.println(&quot;closing 1&quot;); //</div><div class="line">                throw new NullPointerException(&quot;exception 1&quot;);</div><div class="line">            &#125;).onClose(() -&gt; &#123;</div><div class="line">                System.out.println(&quot;closing 2&quot;);</div><div class="line">                throw new NullPointerException(&quot;exception 2&quot;);</div><div class="line">            &#125;).forEach(System.out::println);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ç»“æœå¦‚ä¸‹å›¾ï¼š</p>
<p><img src="http://static.zybuluo.com/zhumin1990719/qzz76okwh4vyzc62m1u0ibuj/image_1bf3lgle8tfjq0nqm2jjd17hk13.png" alt="image_1bf3lgle8tfjq0nqm2jjd17hk13.png-149.2kB"></p>
<p>ä½ ä»¬æ˜ç™½äº†å§ï¼ˆæˆ‘æ˜¯å¤©æ‰ï¼‰</p>
<h3 id="å¥½æ‡‚çš„å…¶ä»–æ–¹æ³•"><a href="#å¥½æ‡‚çš„å…¶ä»–æ–¹æ³•" class="headerlink" title="å¥½æ‡‚çš„å…¶ä»–æ–¹æ³•"></a>å¥½æ‡‚çš„å…¶ä»–æ–¹æ³•</h3><p><code>BaseStream</code> ä¸­æœ‰çš„ä¸€äº›å…¶ä»–æ–¹æ³•ï¼Œé™¤äº†<strong><em>åˆ†å‰²è¿­ä»£å™¨</em></strong>(åé¢ä¼šå•ç‹¬è¯´ï¼Œå› ä¸ºå¤ªé‡è¦)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Spliterator&lt;T&gt; spliterator();</div></pre></td></tr></table></figure>
<p>å…¶ä»–éƒ½æ¯”è¾ƒå¥½æ‡‚ã€‚å€¼å¾—ä¸€è¯´çš„æ˜¯ä»¥ä¸‹ä¸¤ä¸ªæ–¹æ³•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">S sequential(); // è¿”å›ä¸²è¡Œæµ</div><div class="line">S parallel(); // è¿”å›å¹¶è¡Œæµ</div></pre></td></tr></table></figure>
<p>ä½ å¯ä»¥çœ‹åˆ°ä»–ä»¬éƒ½è¿”å›æµå¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥ç»§ç»­è°ƒç”¨ <code>sequential</code> æˆ–è€… <code>parallel</code> æ–¹æ³•ã€‚ä½†æ˜¯ï¼ï¼ï¼</p>
<blockquote>
<p>æ— è®ºä½ ä¸­é—´æ€ä¹ˆè°ƒç”¨ ï¼Œæ¯”å¦‚ sequential.parallel.parallel.sequentialâ€¦. </p>
<p><strong>åªä»¥æœ€åä¸€ä¸ªä¸ºæœ€ç»ˆæµçš„ç±»å‹ï¼ï¼ï¼</strong></p>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;æ¦‚è¿°&quot;&gt;&lt;a href=&quot;#æ¦‚è¿°&quot; class=&quot;headerlink&quot; title=&quot;æ¦‚è¿°&quot;&gt;&lt;/a&gt;æ¦‚è¿°&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;ç®€è¦ä»‹ç» &lt;code&gt;Stream&lt;/code&gt; çš„ javadocï¼Œä¸é›†åˆçš„å…³ç³»ä»¥åŠåŒºåˆ«ï¼Œä¸€äº›é‡è¦çš„æ³¨æ„äº‹é¡¹&lt;/li&gt;
&lt;li&gt;éš¾æ‡‚çš„ &lt;code&gt;Stream&lt;/code&gt; ç±»çš„å£°æ˜ï¼Œä»‹ç»æ¯”è¾ƒéš¾æ‡‚çš„ &lt;code&gt;onClose()&lt;/code&gt; æ–¹æ³•çš„è°ƒç”¨&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
      <category term="coding life" scheme="http://yoursite.com/tags/coding-life/"/>
    
      <category term="java8" scheme="http://yoursite.com/tags/java8/"/>
    
  </entry>
  
  <entry>
    <title>jdk1.7æ–°å¢è‡ªåŠ¨å…³é—­æ¥å£AutoCloseable</title>
    <link href="http://yoursite.com/2017/05/02/jdk1-7%E6%96%B0%E5%A2%9E%E8%87%AA%E5%8A%A8%E5%85%B3%E9%97%AD%E6%8E%A5%E5%8F%A3AutoCloseable/"/>
    <id>http://yoursite.com/2017/05/02/jdk1-7æ–°å¢è‡ªåŠ¨å…³é—­æ¥å£AutoCloseable/</id>
    <published>2017-05-02T01:13:09.000Z</published>
    <updated>2017-05-02T09:54:30.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1-AutoCloseable-æ¥å£"><a href="#1-AutoCloseable-æ¥å£" class="headerlink" title="1 AutoCloseable æ¥å£"></a>1 AutoCloseable æ¥å£</h3><p>è¿™æ˜¯JDK1.7 çš„æ–°å¢è¯­æ³•ã€‚å¸®åŠ©ä½ è‡ªåŠ¨å…³é—­ä¸€äº›èµ„æºã€‚å¯èƒ½ä½ è¿˜ä¸çŸ¥é“è¿™ä¸ªæ¥å£<br><img src="http://static.zybuluo.com/zhumin1990719/rydvwpav6zkm6jhel6244jxl/image_1bf3bdg6r6da1bha17s9cm81bej13.png" alt="image_1bf3bdg6r6da1bha17s9cm81bej13.png-90.6kB"></p>
<a id="more"></a>
<p>è¿™ä¸ªæ¥å£å¥½å°±å¥½åœ¨ï¼Œåªæœ‰ä¸€ä¸ªæ–¹æ³•ï¼Œåå« <code>close()</code>, è€Œè¿™æ­£å¥½æœ‰æ˜¯æˆ‘ä»¬å„ä¸ªèµ„æºå…³é—­çš„æ–¹æ³•åï¼Œæ‰€ä»¥ä½¿ç”¨èµ·æ¥ç›¸å½“æ–¹ä¾¿ï¼Œå› ä¸ºåç§°ä¸€æ ·ï¼Œä»£ç å…¼å®¹ã€‚</p>
<p>JDK8 ä¸­å°±åœ¨å¾ˆå¤šåœ°æ–¹åº”ç”¨äº†è¿™ä¸ªæ¥å£ï¼Œæ¯”å¦‚ <code>Stream</code> ç»§æ‰¿äº† <code>BaseStream</code>ï¼Œè€Œ <code>BaseStream</code> åˆ™ç»§æ‰¿äº† <code>AutoCloseable</code> è¿™ä¸ªæ¥å£ã€‚</p>
<p><img src="http://static.zybuluo.com/zhumin1990719/tmv8f7uvw289fjrfibxcr77y/image_1bf3avqeh1sjr8061aa9kr1bpc9.png" alt="image_1bf3avqeh1sjr8061aa9kr1bpc9.png-45.6kB"></p>
<p>è¿™ä¸ªæ¥å£çš„è¯´æ˜å¾ˆæ¸…æ¥šï¼Œå½“ä½ åœ¨ä½¿ç”¨ <code>try-with-resources block</code> è¿™ç§è¯­æ³•è°ƒç”¨æ¥è¿›è¡Œèµ„æºè·å–çš„æ—¶å€™ï¼Œåœ¨ <code>block</code> é€€å‡ºä¹‹åè‡ªåŠ¨å…³é—­</p>
<blockquote>
<p> <code>try-with-resources block</code>  ä»£ç å—ï¼Œå°±æ˜¯å°†èµ„æºçš„å£°æ˜ï¼Œæ”¾åœ¨ <code>try</code> é‡Œé¢ï¼› å¯ä»¥çœ‹åé¢çš„ä»£ç ç¤ºä¾‹</p>
</blockquote>
<p>ä½ ä¸ç”¨åƒä¹‹å‰å†™ <code>finally{}</code> ä»£ç é‚£æ ·çš„è¿›è¡Œå…³é—­ã€‚å°±ä¸ä¼šæœ‰èµ„æºæœªè¢«é‡Šæ”¾çš„é—®é¢˜ã€‚</p>
<h3 id="2-æµ‹è¯•ä»£ç "><a href="#2-æµ‹è¯•ä»£ç " class="headerlink" title="2 æµ‹è¯•ä»£ç "></a>2 æµ‹è¯•ä»£ç </h3><p>ç®€å•æµ‹è¯•ä»£ç å¦‚ä¸‹</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * Created by charleszhu on 2017/5/2.</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AutoCloseAbleTest</span> <span class="keyword">implements</span> <span class="title">AutoCloseable</span></span>&#123;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doSth</span><span class="params">()</span> </span>&#123;</div><div class="line">        System.out.println(<span class="string">"doStm"</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">        System.out.println(<span class="string">"Close() çœ‹åˆ°æ²¡ï¼Œæˆ‘è¢«åŠäº†"</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</div><div class="line">        <span class="comment">/**</span></div><div class="line">         * try-with-resources è¯­æ³•å—</div><div class="line">         */</div><div class="line">        <span class="keyword">try</span>(AutoCloseAbleTest autoCloseAbleTest = <span class="keyword">new</span> AutoCloseAbleTest()) &#123;</div><div class="line">            autoCloseAbleTest.doSth();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿è¡Œä¸€ä¸‹ï¼Œç»“æœå¦‚ä¸‹ï¼š<br><img src="http://static.zybuluo.com/zhumin1990719/c709aferpg4yr5myxks8txnu/image_1bf3bcj84433l37sm41vrf10dhm.png" alt="image_1bf3bcj84433l37sm41vrf10dhm.png-120.6kB"></p>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;1-AutoCloseable-æ¥å£&quot;&gt;&lt;a href=&quot;#1-AutoCloseable-æ¥å£&quot; class=&quot;headerlink&quot; title=&quot;1 AutoCloseable æ¥å£&quot;&gt;&lt;/a&gt;1 AutoCloseable æ¥å£&lt;/h3&gt;&lt;p&gt;è¿™æ˜¯JDK1.7 çš„æ–°å¢è¯­æ³•ã€‚å¸®åŠ©ä½ è‡ªåŠ¨å…³é—­ä¸€äº›èµ„æºã€‚å¯èƒ½ä½ è¿˜ä¸çŸ¥é“è¿™ä¸ªæ¥å£&lt;br&gt;&lt;img src=&quot;http://static.zybuluo.com/zhumin1990719/rydvwpav6zkm6jhel6244jxl/image_1bf3bdg6r6da1bha17s9cm81bej13.png&quot; alt=&quot;image_1bf3bdg6r6da1bha17s9cm81bej13.png-90.6kB&quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="coding life" scheme="http://yoursite.com/tags/coding-life/"/>
    
      <category term="java" scheme="http://yoursite.com/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>è€ç‰ˆæœ¬MacBookPro (åšçš„) æ ¼å¼åŒ–, Uç›˜å®‰è£… MacOS Sierra</title>
    <link href="http://yoursite.com/2017/05/01/%E8%80%81%E7%89%88%E6%9C%ACMacBookPro-%E5%8E%9A%E7%9A%84-%E6%A0%BC%E5%BC%8F%E5%8C%96-U%E7%9B%98%E5%AE%89%E8%A3%85-MacOS-Sierra/"/>
    <id>http://yoursite.com/2017/05/01/è€ç‰ˆæœ¬MacBookPro-åšçš„-æ ¼å¼åŒ–-Uç›˜å®‰è£…-MacOS-Sierra/</id>
    <published>2017-05-01T15:12:25.000Z</published>
    <updated>2017-05-02T00:51:50.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="å¼•å­"><a href="#å¼•å­" class="headerlink" title="å¼•å­"></a>å¼•å­</h2><p>ä¸»è¦å†™çš„ç‚¹æ˜¯ï¼šU ç›˜å®‰è£…ç›˜çš„åˆ¶ä½œï¼Œä»¥åŠï¼Œä¸ºä»€ä¹ˆä¼šæœ‰ </p>
<ul>
<li>canâ€™t be verified</li>
<li>å·²æŸåï¼Œé‡æ–°ä¸‹è½½</li>
</ul>
<p>è¿™äº›é—®é¢˜ï¼Œå³ä½¿ä½ æ˜¯ä» app store ä¸­ä¸‹è½½çš„å®Œæ•´ç‰ˆæœ¬ã€‚</p>
<a id="more"></a>
<p>å‰ä¸¤å¤©ï¼Œæˆ‘ä¸€ä¸ªæœ‹å‹æ‹¿äº†ä¸€å°å¾ˆè€çš„ <code>MacBook pro</code> , è¯´ä»–ä¸å°å¿ƒæ ¼å¼åŒ–äº†ç¡¬ç›˜ï¼Œè¦æˆ‘é‡è£…ç³»ç»Ÿã€‚ã€‚</p>
<p>ç”µè„‘å›¾å¦‚ä¸‹ã€‚ã€‚<br><img src="http://static.zybuluo.com/zhumin1990719/ky6nya8775sxhivrqgdiqq7c/image_1bf10mmqp1ifr1lgpklstgs1h9o9.png" alt="image_1bf10mmqp1ifr1lgpklstgs1h9o9.png-308.8kB"></p>
<p>æœ‰ç‚¹æ´ç™–çš„æˆ‘çœ‹åˆ°äº†æƒ³è¯´è¯´ï¼Œè¦ä¸ä½ ç ¸äº†å§ï¼ˆå½“ç„¶æˆ‘æ²¡è¯´ã€‚ã€‚ï¼‰<br>ä½†æ˜¯ç¢äºé¢å­ï¼ˆæ¯•ç«Ÿæˆ‘æ˜¯ç¨‹åºå‘˜ï¼Œå¤–ç•Œéƒ½è¯´æ˜¯æç”µè„‘çš„ï¼Œçº¦ç­‰äº ä¿®ç”µè„‘çš„ï¼Œè¿‘ä¼¼äºä½ æ˜¯ä¿®ç”µè„‘çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ç”µè„‘ç›¸å…³çš„ä½ å…¨éƒ½ä¼šï¼Œä¸ä¼šå°±æ˜¯å¤§å‚»é€¼ï¼‰ã€‚ã€‚</p>
<blockquote>
<p>æˆ‘å½“ç„¶æ˜¯å¾ˆæ„¤æ€’çš„ï¼Œä¹‹æ‰€ä»¥æ²¡æœ‰å‘ä½œæ˜¯å› ä¸ºä»–æ˜¯æˆ‘è€å¸ˆã€‚ã€‚</p>
</blockquote>
<h2 id="å¦‚ä½•åˆ¶ä½œå®‰è£…ç›˜"><a href="#å¦‚ä½•åˆ¶ä½œå®‰è£…ç›˜" class="headerlink" title="å¦‚ä½•åˆ¶ä½œå®‰è£…ç›˜"></a>å¦‚ä½•åˆ¶ä½œå®‰è£…ç›˜</h2><h3 id="å‡†å¤‡å·¥ä½œ"><a href="#å‡†å¤‡å·¥ä½œ" class="headerlink" title="å‡†å¤‡å·¥ä½œ"></a>å‡†å¤‡å·¥ä½œ</h3><p>ä½ éœ€è¦ä¸€ä¸‹ç‰©å“ï¼š</p>
<blockquote>
<ul>
<li>ä¸€ä¸ªåªè¦8Gçš„Uç›˜</li>
<li>ä¸€å°å·¥ä½œè‰¯å¥½çš„ macbook pro</li>
<li>è‰¯å¥½çš„ç½‘ç»œ</li>
<li>æˆ‘ï¼ˆä½ æ²¡æˆäº†ï¼‰</li>
</ul>
</blockquote>
<p>è¨€å½’æ­£ä¼ ï¼š</p>
<h3 id="æ­¥éª¤ä¸€-ï¼š-åœ¨App-Store-ä¸­ä¸‹è½½æœ€æ–°çš„-macos"><a href="#æ­¥éª¤ä¸€-ï¼š-åœ¨App-Store-ä¸­ä¸‹è½½æœ€æ–°çš„-macos" class="headerlink" title="æ­¥éª¤ä¸€ ï¼š åœ¨App Store ä¸­ä¸‹è½½æœ€æ–°çš„ macos"></a>æ­¥éª¤ä¸€ ï¼š åœ¨App Store ä¸­ä¸‹è½½æœ€æ–°çš„ macos</h3><p>è¿æ¥å¦‚ä¸‹ <a href="https://itunes.apple.com/cn/app/macos-sierra/id1127487414?mt=12" target="_blank" rel="external">ä¸‹è½½åœ°å€</a><br>å¥¹ä¼šè·³è½¬åˆ° app store. ç‚¹å‡»ä¸‹è½½å³å¯ã€‚å®ƒä¼šå¼¹å‡ºæç¤ºè®©ä½ æ›´æ–°å•¥çš„ï¼Œä¸ç”¨ç®¡å®ƒï¼Œç›´æ¥ä¸‹è½½</p>
<p>ä¸‹è½½å¥½äº†ä¹‹åï¼Œä½ åœ¨ä½ çš„ <code>åº”ç”¨ç¨‹åº</code> æ–‡ä»¶å¤¹ï¼Œä½ å°±å¯ä»¥çœ‹åˆ°è¿™ä¸ªäº†</p>
<p><img src="http://static.zybuluo.com/zhumin1990719/y0agrs81opqu504ydcxb59nl/image_1bf1226d41kb315mb1ja21bi6fkbm.png" alt="image_1bf1226d41kb315mb1ja21bi6fkbm.png-253.8kB"></p>
<p>è‡³æ­¤ï¼Œä½ çš„ç¬¬ä¸€ä»»åŠ¡å®Œæˆã€‚</p>
<h3 id="æ­¥éª¤äºŒ-ï¼šç”¨ç£ç›˜å·¥å…·æ ¼å¼åŒ–ä½ çš„Uç›˜"><a href="#æ­¥éª¤äºŒ-ï¼šç”¨ç£ç›˜å·¥å…·æ ¼å¼åŒ–ä½ çš„Uç›˜" class="headerlink" title="æ­¥éª¤äºŒ ï¼šç”¨ç£ç›˜å·¥å…·æ ¼å¼åŒ–ä½ çš„Uç›˜"></a>æ­¥éª¤äºŒ ï¼šç”¨ç£ç›˜å·¥å…·æ ¼å¼åŒ–ä½ çš„Uç›˜</h3><p>æ‰“å¼€ â€œåº”ç”¨ç¨‹åº â†’ å®ç”¨å·¥å…· â†’ ç£ç›˜å·¥å…·â€ï¼Œå°†Uç›˜ã€ŒæŠ¹æ‰ã€(æ ¼å¼åŒ–) æˆã€ŒMac OS X æ‰©å±•ï¼ˆæ—¥å¿—å¼ï¼‰ã€æ ¼å¼ã€GUID åˆ†åŒºå›¾ï¼Œå¹¶å°†Uç›˜å‘½åä¸º<br>ã€ŒSierraã€ã€‚(æ³¨æ„ï¼šè¿™ä¸ªç›˜ç¬¦åç§°å°†ä¼šä¸åé¢çš„å‘½ä»¤ä¸€ä¸€å¯¹åº”ï¼Œå¦‚æœä½ æ”¹äº†è¿™ç›˜ç¬¦çš„åå­—ï¼Œå¿…é¡»ä¿è¯åé¢çš„å‘½ä»¤é‡Œçš„åç§°ä¹Ÿè¦ä¸€è‡´ã€‚)</p>
<blockquote>
<p>å¦‚æœä¸æˆåŠŸï¼Œä½ å°±å¤šè¯•å‡ æ¬¡</p>
</blockquote>
<h3 id="æ­¥éª¤ä¸‰-ï¼š-åˆ¶ä½œå®‰è£…ç›˜"><a href="#æ­¥éª¤ä¸‰-ï¼š-åˆ¶ä½œå®‰è£…ç›˜" class="headerlink" title="æ­¥éª¤ä¸‰ ï¼š åˆ¶ä½œå®‰è£…ç›˜"></a>æ­¥éª¤ä¸‰ ï¼š åˆ¶ä½œå®‰è£…ç›˜</h3><p>æ‰“å¼€ä½ çš„ç»ˆç«¯ï¼Œè¾“å…¥å¦‚ä¸‹å‘½ä»¤<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo /Applications/Install\ macOS\ Sierra.app/Contents/Resources/createinstallmedia --volume /Volumes/Sierra --applicationpath /Applications/Install\ macOS\ Sierra.app --nointeraction</div></pre></td></tr></table></figure></p>
<blockquote>
<p>æ³¨æ„ç©ºæ ¼å‰é¢éœ€è¦æœ‰ <code>\</code> è¿›è¡Œè½¬ä¹‰</p>
</blockquote>
<p><img src="http://static.zybuluo.com/zhumin1990719/wx8yijvchu5smsimltbdgl9p/image_1bf28fv4l1uph1cvgv581u0uecs13.png" alt="image_1bf28fv4l1uph1cvgv581u0uecs13.png-51.3kB"></p>
<p>è€å¿ƒå¾—åˆ° <code>done</code>,  ä½ å°±å¯ä»¥æ‹¿ç€ U ç›˜å»å®‰è£…äº†</p>
<h2 id="æ— æ³•éªŒè¯ï¼Ÿor-å·²ç»æŸåï¼Ÿ"><a href="#æ— æ³•éªŒè¯ï¼Ÿor-å·²ç»æŸåï¼Ÿ" class="headerlink" title="æ— æ³•éªŒè¯ï¼Ÿor å·²ç»æŸåï¼Ÿ"></a>æ— æ³•éªŒè¯ï¼Ÿor å·²ç»æŸåï¼Ÿ</h2><p>é‡è£…çš„æ­¥éª¤ç®€å•ï¼Œæ’å…¥uç›˜ï¼Œå¼€æœºæŒ‰ä½ <code>option</code>, é€‰æ‹©u ç›˜çš„å®‰è£…ç›˜ã€‚æ¥ä¸‹æ¥é€‰æ‹©å®‰è£…å°±å¯ä»¥äº†ã€‚</p>
<p>ä½†æ˜¯ï¼Œå¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œéƒ½ä¼šé‡åˆ°ç±»ä¼¼</p>
<blockquote>
<p> This copy of the Install OS X El Capitan application canâ€™t be verified. It may have been corrupted or tampered with during downloading</p>
</blockquote>
<p><img src="http://static.zybuluo.com/zhumin1990719/v32y8u4lwltu78uco91rnee0/image_1bf28oaj5122pbej121d1nfgq831g.png" alt="image_1bf28oaj5122pbej121d1nfgq831g.png-57.5kB"></p>
<p>æˆ–è€…ï¼Œç›´æ¥å‘Šè¯‰ä½ æŸåäº†ï¼Œè®©ä½ å†å»ä¸‹è½½å®Œæ•´ç‰ˆæœ¬ã€‚</p>
<p>å¯¼è‡´è¿™ä¸ªçš„åŸå› æ˜¯ï¼Œå½“ä½ å†³å®šå°†ä¸€å°macæ ¼å¼åŒ–åï¼Œåœ¨é‡è£…ç³»ç»Ÿçš„æ—¶å€™ï¼Œç³»ç»Ÿçš„æ—¶é—´å·²ç»è¢«æ”¹å˜äº†ã€‚è¿™ä¸ªæ—¶å€™å®‰è£…ç¨‹åºå°±ä¼šçˆ†å‡ºå„ç§é”™è¯¯ã€‚ä½ å¯ä»¥é€šè¿‡ ç»ˆç«¯è¾“å…¥ date è¿›è¡ŒæŸ¥çœ‹ï¼Œæ—¶é—´åº”è¯¥å˜æˆäº† 2001 å¹´ã€‚</p>
<p>è¿™ä¸ªæ—¶å€™ï¼Œ ä½ åªè¦é€šè¿‡ <code>date</code> å‘½ä»¤é‡ç½®æ—¶é—´ï¼Œå°±å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚<br>ä»–çš„å‚æ•°å¦‚ä¸‹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">date MMDDHHmmYY replacing the letters as follows.</div><div class="line">MM - 2 digit month  01 - 12</div><div class="line">DD - 2 digit date   01 - 31</div><div class="line">HH - 2 digit hour   01 - 24</div><div class="line">mm - 2 digit minute 01 - 59</div><div class="line">YY - 2 digit year   &gt; 15</div></pre></td></tr></table></figure>
<p>ä½ å°†æ—¶é—´è®¾ç½®æˆï¼Œä½ è¦å®‰è£…çš„ç³»ç»Ÿå‘å¸ƒä¹‹åçš„ä¸€ä¸ªæ—¶é—´åï¼Œé€€å‡ºç»ˆç«¯ï¼Œå†æ¬¡ç‚¹å‡»æ“ä½œï¼Œå°±ä¸ä¼šæœ‰é—®é¢˜ã€‚</p>
<p>ä½ ä¹Ÿå¯ä»¥çœ‹åšè¿™ä¸ªè§†é¢‘ <a href="https://www.youtube.com/watch?v=LRPiynS15_U" target="_blank" rel="external">åœŸé€¼è§†é¢‘</a> ï¼Œéœ€è¦ç¿»å¢™ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;å¼•å­&quot;&gt;&lt;a href=&quot;#å¼•å­&quot; class=&quot;headerlink&quot; title=&quot;å¼•å­&quot;&gt;&lt;/a&gt;å¼•å­&lt;/h2&gt;&lt;p&gt;ä¸»è¦å†™çš„ç‚¹æ˜¯ï¼šU ç›˜å®‰è£…ç›˜çš„åˆ¶ä½œï¼Œä»¥åŠï¼Œä¸ºä»€ä¹ˆä¼šæœ‰ &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;canâ€™t be verified&lt;/li&gt;
&lt;li&gt;å·²æŸåï¼Œé‡æ–°ä¸‹è½½&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™äº›é—®é¢˜ï¼Œå³ä½¿ä½ æ˜¯ä» app store ä¸­ä¸‹è½½çš„å®Œæ•´ç‰ˆæœ¬ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="mac" scheme="http://yoursite.com/tags/mac/"/>
    
  </entry>
  
  <entry>
    <title>jdk8-32-groupingBy æºç åˆ†æ</title>
    <link href="http://yoursite.com/2017/04/30/jdk8-32-groupingBy-%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/"/>
    <id>http://yoursite.com/2017/04/30/jdk8-32-groupingBy-æºç åˆ†æ/</id>
    <published>2017-04-30T08:58:34.000Z</published>
    <updated>2017-04-30T09:02:32.000Z</updated>
    
    <content type="html"><![CDATA[<p>jdk8 é›†åˆçš„å·¥å‚ç±» <code>Collectors</code> æä¾›äº†ä¸¤ä¸ªå¾ˆå¥½ç”¨çš„é™æ€å‡½æ•°ã€‚</p>
<ul>
<li>groupingBy</li>
<li>partitioningBy</li>
</ul>
<a id="more"></a>
<p><code>groupingBy</code> å®ç°ç±»ä¼¼ Mysql ä¸­åˆ†åˆ†ç»„åŠŸèƒ½ã€‚è¿”å›ä¸€ä¸ª Map; è€Œ <code>partitioningBy</code>å¯ä»¥çœ‹åšæ˜¯ <code>groupingBy</code> çš„ç‰¹æ®Šå½¢å¼ã€‚æˆ‘ä»¬åé¢ä¼šæ¥ç€ä»‹ç»ã€‚ ä½¿ç”¨çš„æ˜¯æ¯”å¦‚ç»Ÿè®¡æ¯ä¸ªåŸå¸‚äººçš„â€œå§“â€ï¼Œå¯ä»¥è¿™ä¹ˆå†™</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Map&lt;City, Set&lt;String&gt;&gt; namesByCity = people.stream().collect(groupingBy(Person::getCity,                                            mapping(Person::getLastName, toSet())));</div></pre></td></tr></table></figure>
<p>é‚£ä¹ˆï¼Œä»–åˆ°åº•å¦‚ä½•åˆ©ç”¨ <code>Collector</code> çš„å„ä¸ªæ¥å£æ¥å®ç°çš„å‘¢ï¼Ÿä¸‹é¢æˆ‘ä»¬å°†æ·±å…¥ JDK çš„ <code>Collectors</code> çš„æºç ä¸­ï¼Œåˆ†æä¸€ä¸‹ä»–æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚ </p>
<h2 id="groupingBy"><a href="#groupingBy" class="headerlink" title="groupingBy"></a>groupingBy</h2><h3 id="1-ç¬¬ä¸€ä¸ªé‡è½½æ–¹æ³•-è¦ç®€å•å°±åˆ«é‚£ä¹ˆå¤šè¦æ±‚ï¼Œç»™ä½ ä¸ªListä¸é”™äº†"><a href="#1-ç¬¬ä¸€ä¸ªé‡è½½æ–¹æ³•-è¦ç®€å•å°±åˆ«é‚£ä¹ˆå¤šè¦æ±‚ï¼Œç»™ä½ ä¸ªListä¸é”™äº†" class="headerlink" title="1 ç¬¬ä¸€ä¸ªé‡è½½æ–¹æ³•, è¦ç®€å•å°±åˆ«é‚£ä¹ˆå¤šè¦æ±‚ï¼Œç»™ä½ ä¸ªListä¸é”™äº†"></a>1 ç¬¬ä¸€ä¸ªé‡è½½æ–¹æ³•, è¦ç®€å•å°±åˆ«é‚£ä¹ˆå¤šè¦æ±‚ï¼Œç»™ä½ ä¸ªListä¸é”™äº†</h3><p>åˆ†ç»„ <code>groupingBy</code> æœ‰ä¸‰ä¸ªé‡è½½æ–¹æ³•ã€‚ä¸€ä¸ªæ¯”ä¸€å¤æ‚ã€‚</p>
<p>å…ˆçœ‹æœ€ç®€å•çš„</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line">     * <span class="doctag">@param</span> &lt;T&gt; the type of the input elements</div><div class="line">     * <span class="doctag">@param</span> &lt;K&gt; the type of the keys</div><div class="line">*/</div><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;T, K&gt; Collector&lt;T, ?, Map&lt;K, List&lt;T&gt;&gt;&gt;</div><div class="line">    groupingBy(Function&lt;? <span class="keyword">super</span> T, ? extends K&gt; classifier) &#123;</div><div class="line">        <span class="keyword">return</span> groupingBy(classifier, toList());</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>è¿™é‡Œ <code>T</code> æ˜¯è¾“å…¥é›†åˆçš„å…ƒç´ ç±»å‹ï¼Œ <code>K</code> æ˜¯æœ€åäº§ç”Ÿçš„ Map çš„ä¸»é”®key çš„ç±»å‹ã€‚</p>
<p>å‡½æ•°éœ€è¦ä¼ å…¥ä¸€ä¸ª <code>Function</code> çš„å‡½æ•°å¼æ¥å£ï¼Œ<code>Function</code> çš„ä¸­ä½œå°±æ˜¯åˆ†ç±»å™¨ï¼Œæ¯”å¦‚ä¼ å…¥çš„ç±»å‹æ˜¯<code>T</code> æ˜¯ä¸€ä¸ª <code>Person</code>ç±»å‹ ï¼Œ é€šè¿‡ <code>apply()</code> æ–¹æ³•ï¼Œè¿”å› <code>Person</code> çš„å±æ€§ <code>name</code>ï¼›å› ä¸ºæˆ‘ä»¬è¦æŒ‰ç…§ <code>name</code> æ¥åˆ†ç»„ã€‚</p>
<p>æ‰€ä»¥ï¼Œå¦‚æœ <code>name</code> çš„ç±»å‹æ˜¯ <code>String</code> ï¼› é‚£ä¹ˆ <code>K</code> å°±æ˜¯ <code>String</code></p>
<p>æ•…è€Œï¼Œè¿™ä¸ª <code>groupingBy(function)</code> çš„åŠŸèƒ½å°±å¾ˆæ¸…æ™°äº†ï¼Œå°±æ˜¯é€šè¿‡ <code>function</code> å¯¹ä¼ å…¥çš„ <code>T</code> ç±»å‹è¿›è¡Œåˆ†ç±»ã€‚ç„¶åè°ƒç”¨ <code>toList()</code> æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯è¯´æ¯ä¸ªåˆ†ç±»çš„<code>Person</code> ä¼šæ”¾è¿›ä¸€ä¸ª <code>List&lt;Person&gt;</code> ä¸­</p>
<p>æœ€ç»ˆè¿”å›çš„ç±»å‹å°±æ˜¯ <code>Map&lt;String, List&lt;Person&gt;&gt;</code>.</p>
<p>è€Œå¦‚æœä½ ä¸æƒ³è¿”å›çš„æ˜¯ä¸€ä¸ª<code>List</code> , å¸Œæœ›æ˜¯ä¸€ä¸ª <code>Set</code>. ä½ å°±è¦ä½¿ç”¨ç¬¬äºŒä¸ªé‡è½½æ–¹æ³•~ ä»–å…è®¸ä½ å®šä¹‰æœ€åçš„è¾“å‡ºå‡½æ•°ã€‚</p>
<h3 id="2-ç¬¬äºŒä¸ªé‡è½½æ–¹æ³•ï¼šæˆ‘è¦è¾“å‡ºSet"><a href="#2-ç¬¬äºŒä¸ªé‡è½½æ–¹æ³•ï¼šæˆ‘è¦è¾“å‡ºSet" class="headerlink" title="2 ç¬¬äºŒä¸ªé‡è½½æ–¹æ³•ï¼šæˆ‘è¦è¾“å‡ºSet"></a>2 ç¬¬äºŒä¸ªé‡è½½æ–¹æ³•ï¼šæˆ‘è¦è¾“å‡ºSet</h3><p>çœ‹ä¸€ä¸‹å‡½æ•°çš„å®šä¹‰ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line">     * <span class="doctag">@param</span> &lt;T&gt; the type of the input elements</div><div class="line">     * <span class="doctag">@param</span> &lt;K&gt; the type of the keys</div><div class="line">     * <span class="doctag">@param</span> &lt;A&gt; the intermediate accumulation type of the downstream collector</div><div class="line">     * <span class="doctag">@param</span> &lt;D&gt; the result type of the downstream reduction</div><div class="line">     * <span class="doctag">@param</span> classifier a classifier function mapping input elements to keys</div><div class="line">     * <span class="doctag">@param</span> downstream a &#123;<span class="doctag">@code</span> Collector&#125; implementing the downstream reduction</div><div class="line">*/</div><div class="line"><span class="keyword">public</span> <span class="keyword">static</span> &lt;T, K, A, D&gt;</div><div class="line">    Collector&lt;T, ?, Map&lt;K, D&gt;&gt; groupingBy(Function&lt;? <span class="keyword">super</span> T, ? extends K&gt; classifier,</div><div class="line">                                          Collector&lt;? <span class="keyword">super</span> T, A, D&gt; downstream) &#123;</div><div class="line">        <span class="keyword">return</span> groupingBy(classifier, HashMap::<span class="keyword">new</span>, downstream);</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>è¿™ä¸ªå‡½æ•°ï¼Œæ˜æ˜¾æ¯”ä¸Šä¸€ä¸ªè¦å¤æ‚ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œå¤šäº†ä¸€ä¸ª <code>Collector</code> çš„ <code>downstream</code> , å¯ä»¥è‡ªå®šä¹‰è¾“å‡ºçš„é›†åˆã€‚ä¸Šé¢é‚£ä¸ªç®€å•ç‰ˆæœ¬çš„å‡½æ•°æ˜¯æ˜¯å†™æ­»çš„ <code>List</code></p>
<p>è¿™ä¸ªå‡½æ•°æœ‰å››ä¸ªæ³›å‹ã€‚</p>
<ul>
<li><code>T</code> åŸå§‹å…ƒç´ ç±»å‹ï¼Œæ¯”å¦‚æˆ‘ä»¬è¿™æ˜¯ <code>Person</code></li>
<li><code>K</code> è¿”å› Map çš„ key, å³æœ€ç»ˆè¿”å›çš„Map çš„å»ºçš„ç±»å‹ã€‚å¦‚æœä½ æƒ³æŒ‰ç…§äººçš„åå­—åˆ†ç±»ï¼Œé‚£Tå°±æ˜¯ <code>String</code>, å¦‚æœæŒ‰ç…§å¹´é¾„åˆ†ç±»ï¼Œé‚£å°±æ˜¯ <code>Interger</code></li>
<li><code>A</code> æ˜¯ downstream çš„ accumulation çš„ä¸­é—´ç»“æœç±»å‹</li>
<li><code>D</code> æ˜¯æœ€ç»ˆè¾“å‡º Map çš„ Value çš„ç±»å‹ã€‚æ¯”å¦‚ <code>List</code> æˆ–è€… <code>Set</code> </li>
</ul>
<p>è¿™ä¸ªæ–¹æ³•ä¼šè°ƒç”¨ç¬¬ä¸‰ä¸ªé‡è½½å‡½æ•°ï¼Œæ¯”ç¬¬äºŒä¸ªå‡½æ•°ï¼Œå¤šäº†ä¸­é—´çš„ <code>HashMap::new</code>ï¼› è¿™ä¸ªæ˜¯æœ€ç»ˆè¿”å›çš„ Map çš„ç±»å‹ï¼Œè¿™é‡Œå†™æ­»çš„æ˜¯ HashMap, å¦‚æœä½ æƒ³ç”¨å…¶ä»–ç±»å‹ï¼Œå°±éœ€è¦ä½¿ç”¨æœ€ç»ˆçš„ä¹Ÿæ˜¯æœ€å¤æ‚çš„ç¬¬ä¸‰ä¸ªé‡è½½å‡½æ•°ã€‚</p>
<p>è¶Šæ˜¯ä½ ç”¨èµ·æ¥ç®€å•çš„å‡½æ•°ï¼ŒèƒŒåçš„å®ç°å°±è¶Šæ¥è¶Šå¤æ‚ã€‚</p>
<h3 id="3-ç¬¬ä¸‰ä¸ªé‡è½½æ–¹æ³•-èƒ½çœ‹æ‡‚å°±éšä¾¿ä½ æ€ä¹ˆç©"><a href="#3-ç¬¬ä¸‰ä¸ªé‡è½½æ–¹æ³•-èƒ½çœ‹æ‡‚å°±éšä¾¿ä½ æ€ä¹ˆç©" class="headerlink" title="3 ç¬¬ä¸‰ä¸ªé‡è½½æ–¹æ³•: èƒ½çœ‹æ‡‚å°±éšä¾¿ä½ æ€ä¹ˆç©"></a>3 ç¬¬ä¸‰ä¸ªé‡è½½æ–¹æ³•: èƒ½çœ‹æ‡‚å°±éšä¾¿ä½ æ€ä¹ˆç©</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line">* <span class="doctag">@param</span> &lt;T&gt; the type of the input elements</div><div class="line">* <span class="doctag">@param</span> &lt;K&gt; the type of the keys</div><div class="line">* <span class="doctag">@param</span> &lt;A&gt; the intermediate accumulation type of the downstream collector</div><div class="line">* <span class="doctag">@param</span> &lt;D&gt; the result type of the downstream reduction</div><div class="line">* <span class="doctag">@param</span> &lt;M&gt; the type of the resulting &#123;<span class="doctag">@code</span> Map&#125;</div><div class="line">* <span class="doctag">@param</span> classifier a classifier function mapping input elements to keys</div><div class="line">* <span class="doctag">@param</span> downstream a &#123;<span class="doctag">@code</span> Collector&#125; implementing the downstream reduction</div><div class="line">* <span class="doctag">@param</span> mapFactory a function which, when called, produces a new empty</div><div class="line">*                   &#123;<span class="doctag">@code</span> Map&#125; of the desired type</div><div class="line">*/</div><div class="line"></div><div class="line"> <span class="keyword">public</span> <span class="keyword">static</span> &lt;T, K, D, A, M extends Map&lt;K, D&gt;&gt;</div><div class="line">    Collector&lt;T, ?, M&gt; groupingBy(Function&lt;? <span class="keyword">super</span> T, ? extends K&gt; classifier,</div><div class="line">                                  Supplier&lt;M&gt; mapFactory,</div><div class="line">                                  Collector&lt;? <span class="keyword">super</span> T, A, D&gt; downstream) &#123;</div><div class="line">        Supplier&lt;A&gt; downstreamSupplier = downstream.supplier();</div><div class="line">        BiConsumer&lt;A, ? <span class="keyword">super</span> T&gt; downstreamAccumulator = downstream.accumulator();</div><div class="line">        BiConsumer&lt;Map&lt;K, A&gt;, T&gt; accumulator = (m, t) -&gt; &#123;</div><div class="line">            K key = Objects.requireNonNull(classifier.apply(t), <span class="string">"element cannot be mapped to a null key"</span>);</div><div class="line">            A container = m.computeIfAbsent(key, k -&gt; downstreamSupplier.get());</div><div class="line">            downstreamAccumulator.accept(container, t);</div><div class="line">        &#125;;</div><div class="line">        BinaryOperator&lt;Map&lt;K, A&gt;&gt; merger = Collectors.&lt;K, A, Map&lt;K, A&gt;&gt;mapMerger(downstream.combiner());</div><div class="line">        <span class="meta">@SuppressWarnings</span>(<span class="string">"unchecked"</span>)</div><div class="line">        Supplier&lt;Map&lt;K, A&gt;&gt; mangledFactory = (Supplier&lt;Map&lt;K, A&gt;&gt;) mapFactory;</div><div class="line"></div><div class="line">        <span class="keyword">if</span> (downstream.characteristics().contains(Collector.Characteristics.IDENTITY_FINISH)) &#123;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">new</span> CollectorImpl&lt;&gt;(mangledFactory, accumulator, merger, CH_ID);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">else</span> &#123;</div><div class="line">            <span class="meta">@SuppressWarnings</span>(<span class="string">"unchecked"</span>)</div><div class="line">            Function&lt;A, A&gt; downstreamFinisher = (Function&lt;A, A&gt;) downstream.finisher();</div><div class="line">            Function&lt;Map&lt;K, A&gt;, M&gt; finisher = intermediate -&gt; &#123;</div><div class="line">                intermediate.replaceAll((k, v) -&gt; downstreamFinisher.apply(v));</div><div class="line">                <span class="meta">@SuppressWarnings</span>(<span class="string">"unchecked"</span>)</div><div class="line">                M castResult = (M) intermediate;</div><div class="line">                <span class="keyword">return</span> castResult;</div><div class="line">            &#125;;</div><div class="line">            <span class="keyword">return</span> <span class="keyword">new</span> CollectorImpl&lt;&gt;(mangledFactory, accumulator, merger, finisher, CH_NOID);</div><div class="line">        &#125;</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p>è¿™ä¸ªå‡½æ•°æœ‰5ä¸ªæ³›å‹ï¼Œé™¤å»ä¸Šé¢è¯´çš„ <code>T</code>ï¼Œ<code>K</code>ï¼Œ<code>A</code>ï¼Œ<code>D</code><br>å¤šäº†ä¸€ä¸ª mapFactory çš„ Supplier() , ç”¨äºå¾—åˆ°æœ€ç»ˆè¿”å›çš„ Map çš„ç±»å‹ï¼Œç¬¬äºŒä¸ªé‡è½½å‡½æ•°å†™æ­»çš„ HashMapï¼Œè¿™å°±å¯ä»¥è¿›è¡Œè‡ªå®šä¹‰ã€‚</p>
<p>è¿™ä¸ªå‡½æ•°æœ‰è¿ä¸ªå€¼å¾—æ³¨æ„çš„ç‚¹ï¼š</p>
<ul>
<li>æ‰€æœ‰çš„Collectors ä¸­å‡½æ•°ï¼Œå¦‚æœå‡½æ•°å†…éƒ¨è¿˜è¦åšé›†åˆå¤„ç†çš„ï¼Œéƒ½æ˜¯ä½¿ç”¨ <code>downstream</code> è¿™ç§æ¨¡å¼ï¼Œåˆ©ç”¨ <code>downstream</code> çš„å„ç§å·²æœ‰çš„çš„ <code>Supplier</code> <code>Accumulator</code>ç­‰ï¼Œä¿®æ”¹æ¥å®ç°è‡ªå·±çš„åŠŸèƒ½ã€‚æ¯”å¦‚åœ¨ <code>groupingBy</code> è¿™ä¸ªå‡½æ•°ï¼Œä¸€å¼€å§‹å°±è·å–äº† <code>downstream</code> çš„å„ä¸ªç»„ä»¶ï¼Œç»„åˆæˆè‡ªå·±éœ€è¦çš„æ”¶é›†å™¨ï¼Œè¿›è€Œç”¨äºå®Œæˆåˆ†ç±»çš„è¡Œä¸ºã€‚ï¼ˆä½ è¿˜å¯ä»¥å»çœ‹ä¸€çœ‹ <code>collectingAndThen()</code> è¿™ä¸ªå‡½æ•°ï¼‰</li>
</ul>
<p><img src="http://static.zybuluo.com/zhumin1990719/r9lzmhqejhu4poxfa65jrwg0/image_1be34fqkpdosrnqo8317uhcnc9.png" alt="image_1be34fqkpdosrnqo8317uhcnc9.png-228kB"></p>
<ul>
<li><code>groupingBy</code> å‡½æ•°ä¸­æœ‰æœ‰ä¸¤å¤„å¼ºåˆ¶ç±»å‹è½¬æ¢ã€‚è¿™é‡Œå…¶å®å¾ˆéš¾ç†è§£ï¼Œä¸ºä½•å¯ä»¥ç›´æ¥æˆåŠŸçš„è½¬æ¢å‘¢ï¼Ÿ</li>
</ul>
<p>ç¬¬ä¸€å¤„<br><img src="http://static.zybuluo.com/zhumin1990719/9aw6m36vtunxhzintfqzhw8x/image_1be351ek7187m19721kb3vijudj13.png" alt="image_1be351ek7187m19721kb3vijudj13.png-186.2kB"></p>
<p>ç¬¬äºŒå¤„<br><img src="http://static.zybuluo.com/zhumin1990719/lqq4sk8y37vbchc9m7ajs0cn/image_1be353p451uuhvefd57r2u16ad1g.png" alt="image_1be353p451uuhvefd57r2u16ad1g.png-161.3kB"></p>
<p>ä¸¤å¤„å…¶å®éƒ½æ˜¯å°†æœ€ç»ˆç»“æœæ³›å‹ <code>D</code> è½¬æˆ ä¸­é—´ç»“æœ <code>A</code>ã€‚<br>å¯¹äºç¬¬ä¸€å¤„ï¼Œ mapFactory æ˜¯ä½œä¸ºä¸€ä¸ª <code>Supplier</code> å‡ºç°ï¼Œè€Œä»–çš„ç›®çš„æ˜¯æä¾›ä¸­é—´ç»“æœç±»å‹ï¼Œè€Œä»–ä¸Šé¢çš„ <code>accumulator</code> çš„ä¸­é—´ç»“æœç±»å‹ï¼Œå°±æ˜¯<strong>K,A</strong>ï¼Œ æ‰€ä»¥è¿™æ ·çš„å¼ºè½¬æ˜¯ä¸€å®šå¯ä»¥æˆåŠŸçš„</p>
<p><img src="http://static.zybuluo.com/zhumin1990719/sqtr5d56vcc4y5qtm6yhv271/image_1be35m758itj1grmlc71nu81rrm1t.png" alt="image_1be35m758itj1grmlc71nu81rrm1t.png-139.5kB"></p>
<p>ç¬¬äºŒå¤„ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œå› ä¸ºå…¨ç§°éƒ½ä½¿ç”¨äº† <code>A</code>ï¼Œå…¶å® <code>A</code> å’Œ <code>D</code> åœ¨è¿™é‡Œï¼Œæ˜¯ç­‰ä»·çš„ã€‚æ‰€ä»¥è½¬æ¢éƒ½å¯ä»¥æˆåŠŸã€‚</p>
<p>ä½ å»å¯ä»¥ä»è¿™ä¹ˆä¸€ä¸ªè§’åº¦æ€è€ƒé—®é¢˜ï¼š</p>
<blockquote>
<p>ä½ æœ€ç»ˆéœ€è¦ç”Ÿæˆ <code>D</code> ç±»å‹ï¼Œä¸ºä½•ä¸­é—´è¦ç»™è‡ªå·±ç”Ÿæˆä¸€ä¸ªä¸ä¸€æ ·çš„ <code>A</code> ç±»å‹æ·»å µå‘¢ï¼Ÿ ä½  4 ä¸ 4 saï¼Ÿ</p>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;jdk8 é›†åˆçš„å·¥å‚ç±» &lt;code&gt;Collectors&lt;/code&gt; æä¾›äº†ä¸¤ä¸ªå¾ˆå¥½ç”¨çš„é™æ€å‡½æ•°ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;groupingBy&lt;/li&gt;
&lt;li&gt;partitioningBy&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
      <category term="coding life" scheme="http://yoursite.com/tags/coding-life/"/>
    
      <category term="java8" scheme="http://yoursite.com/tags/java8/"/>
    
  </entry>
  
  <entry>
    <title>jdk8-31-å·¥å‚æ–¹æ³•æ”¶é›†å™¨Collectorsçš„ä¸­çš„å¸¸ç”¨å‡½æ•°</title>
    <link href="http://yoursite.com/2017/04/13/jdk8-31-%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95%E6%94%B6%E9%9B%86%E5%99%A8Collectors%E7%9A%84%E4%B8%AD%E7%9A%84%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0/"/>
    <id>http://yoursite.com/2017/04/13/jdk8-31-å·¥å‚æ–¹æ³•æ”¶é›†å™¨Collectorsçš„ä¸­çš„å¸¸ç”¨å‡½æ•°/</id>
    <published>2017-04-13T13:28:28.000Z</published>
    <updated>2017-04-14T07:07:24.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1-collectorImpl"><a href="#1-collectorImpl" class="headerlink" title="1   collectorImpl"></a>1   collectorImpl</h3><ul>
<li><code>Collectors</code> ä¸­çš„ çš„åŸºç¡€ <code>collectorImpl</code> ä¸¤ä¸ªæ„é€ æ–¹æ³•ä¸€ä¸ªæœ‰ <code>finisher()</code>, ä¸€ä¸ªæ²¡æœ‰ã€‚è¿™ä¸ªå¾ˆå®¹æ˜“ç†è§£ï¼Œä¸€ä¸ªéœ€è¦è½¬æ¢ä¸­é—´ç»“æœï¼Œä¸€ä¸ªä¸­é—´ç»“æœå’Œæœ€ç»ˆç»“æœä¸€è‡´ï¼Œæ‰€ä»¥ä¸éœ€è¦ä½¿ç”¨ <code>finisher()</code> æ–¹æ³•</li>
</ul>
<a id="more"></a>
<h3 id="2-ä¸¤ç§å®ç°æ–¹å¼"><a href="#2-ä¸¤ç§å®ç°æ–¹å¼" class="headerlink" title="2  ä¸¤ç§å®ç°æ–¹å¼"></a>2  ä¸¤ç§å®ç°æ–¹å¼</h3><p>å¯¹äºå·¥å‚ç±» ä¸¤ç§å®ç°æ–¹å¼</p>
<ol>
<li><code>CollectorImpl</code> æ¥å®ç°ã€‚</li>
<li><code>reduceing</code> æ¥å®ç°ï¼Œ è€Œ <code>reducing</code> æ–¹æ³•å½’æ ¹è¿˜æ˜¯ç”¨çš„æ˜¯ <code>CollectorImpl</code> æ–¹æ³•æ¥å®ç°</li>
</ol>
<h3 id="3-å¸¸è§å‡½æ•°"><a href="#3-å¸¸è§å‡½æ•°" class="headerlink" title="3  å¸¸è§å‡½æ•°"></a>3  å¸¸è§å‡½æ•°</h3><h4 id="1ï¼‰-toList-amp-toCollection"><a href="#1ï¼‰-toList-amp-toCollection" class="headerlink" title="1ï¼‰  toList() &amp; toCollection"></a>1ï¼‰  <code>toList()</code> &amp; <code>toCollection</code></h4><ul>
<li><p>ä¸¤ä¸ªæœ€å¸¸ç”¨çš„æ–¹æ³• <code>toList()</code> &amp; <code>toCollection</code><br><img src="http://ooapi4q4v.bkt.clouddn.com/14918251558881.jpg" alt=""></p>
</li>
<li><p><code>toSet()</code> æ–¹æ³•æ˜¯ä¹Ÿæ˜¯ <code>toCollection</code> çš„ç‰¹åŒ–ã€‚</p>
</li>
</ul>
<h4 id="2ï¼‰-joining"><a href="#2ï¼‰-joining" class="headerlink" title="2ï¼‰  joining()"></a>2ï¼‰  <code>joining()</code></h4><ul>
<li><code>joining</code> ä¸‰ç§é‡è½½æ–¹æ³•</li>
</ul>
<h4 id="3ï¼‰-mapping"><a href="#3ï¼‰-mapping" class="headerlink" title="3ï¼‰  mapping()"></a>3ï¼‰  <code>mapping()</code></h4><ul>
<li><code>mapping()</code> å°†è¾“å…¥å…ƒç´ è½¬æ¢æˆè¾“å‡ºå…ƒç´ </li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">Map&lt;City, Set&lt;String&gt;&gt; lastNamesByCity= people.stream().collect(groupingBy(</div><div class="line">Person::getCity,</div><div class="line">mapping(Person::getLastName, toSet()) <span class="comment">// Mapping , å°†Person è½¬æ¢æˆString , æä¾›ç»™ä¸‹æ¸¸ Collector ä½¿ç”¨</span></div><div class="line">));</div></pre></td></tr></table></figure>
<h4 id="4ï¼‰-collectingAndThen"><a href="#4ï¼‰-collectingAndThen" class="headerlink" title="4ï¼‰  collectingAndThen()"></a>4ï¼‰  <code>collectingAndThen()</code></h4><ul>
<li><p><code>collectingAndThen(Collector&lt;T,A,R&gt; downstream, Function&lt;R,RR&gt; finisher)</code>  å…ˆè¿‡å®Œä¸Šå±‚æ”¶é›†å™¨ <code>downstream</code> ï¼Œåœ¨è¿›è¡Œä¸€æ¬¡ <code>finisher()</code> è½¬æ¢ç»“æœ</p>
<p> æ¯”å¦‚è¯´ï¼Œä½ åœ¨ <code>toList()</code> ä¹‹åï¼Œæƒ³å°†å®ƒè½¬æ¢æˆä¸€ä¸ª <code>immutableList()</code> å°±å¯ä»¥å¦‚ä¸‹ä½¿ç”¨</p>
</li>
</ul>
<pre><code class="java">List&lt;String&gt; people = people.stream().collect(collectingAndThen(toList(), Collections::unmodifiableList));
</code></pre>
<p>å®ç°å…¶å®å¾ˆæœ‰æ„æ€<br><img src="http://ooapi4q4v.bkt.clouddn.com/14918263223655.jpg" alt=""></p>
<h4 id="5ï¼‰-counting-minBy-maxBy"><a href="#5ï¼‰-counting-minBy-maxBy" class="headerlink" title="5ï¼‰  counting() , minBy() , maxBy()"></a>5ï¼‰  <code>counting()</code> , <code>minBy()</code> , <code>maxBy()</code></h4><ul>
<li><code>counting()</code> , <code>minBy()</code> , <code>maxBy()</code> ç”¨ <code>reducing()</code> å®ç°, <code>reducing()</code> åˆæ˜¯åŸºäº <code>CollectorImpl</code> å®ç°</li>
</ul>
<h4 id="6ï¼‰-summingInt-averagingInt-averagingDouble"><a href="#6ï¼‰-summingInt-averagingInt-averagingDouble" class="headerlink" title="6ï¼‰  summingInt() , averagingInt() , averagingDouble()"></a>6ï¼‰  <code>summingInt()</code> , <code>averagingInt()</code> , <code>averagingDouble()</code></h4><ul>
<li><code>summingInt()</code> å¯¹æ¯ä¸€ä¸ªå…ƒç´ ä½¿ç”¨ <code>toIntFunction</code> åœ¨ç´¯åŠ ï¼Œå®ç°å¾ˆæœ‰æ„æ€</li>
</ul>
<p><img src="http://ooapi4q4v.bkt.clouddn.com/14918267966242.jpg" alt=""></p>
<p><code>Supplier()</code> é‡‡ç”¨ç”Ÿæˆäº†ä¸€ä¸ª é•¿åº¦ä¸º1 çš„ <code>int</code> æ•°ç»„ï¼Œè€Œä¸æ˜¯ç›´æ¥ä½¿ç”¨çš„æ•´å½¢æ•°å­—ï¼Ÿ<br>å› ä¸ºæ•°å­—æ˜¯ä¸€ä¸ª <code>å€¼</code>ï¼Œ å€¼æ˜¯æ— æ³•ä¼ é€’çš„ï¼Œè€Œæ•°ç»„æ˜¯ä¸€ä¸ª <code>å¼•ç”¨</code>ï¼Œ å¼•ç”¨æ˜¯å¯ä»¥ä¼ é€’çš„ã€‚</p>
<ul>
<li><code>averagingInt()</code> æ±‚å¹³å‡å€¼</li>
</ul>
<p><img src="http://ooapi4q4v.bkt.clouddn.com/14918270760778.jpg" alt=""></p>
<ul>
<li>å¯¹äº<code>averagingDouble()</code> çš„å®ç°å¯ä»¥å†å»çœ‹ä¸€ä¸‹ï¼Œä»–çš„åˆå§‹æ•°ç»„é•¿åº¦ä¸º4ï¼Œä»–ä»¬è§†ä¸ºæµ®ç‚¹æ•°è®¡ç®—çš„è¡¥å¿äº§ç”Ÿçš„ã€‚</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;1-collectorImpl&quot;&gt;&lt;a href=&quot;#1-collectorImpl&quot; class=&quot;headerlink&quot; title=&quot;1   collectorImpl&quot;&gt;&lt;/a&gt;1   collectorImpl&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Collectors&lt;/code&gt; ä¸­çš„ çš„åŸºç¡€ &lt;code&gt;collectorImpl&lt;/code&gt; ä¸¤ä¸ªæ„é€ æ–¹æ³•ä¸€ä¸ªæœ‰ &lt;code&gt;finisher()&lt;/code&gt;, ä¸€ä¸ªæ²¡æœ‰ã€‚è¿™ä¸ªå¾ˆå®¹æ˜“ç†è§£ï¼Œä¸€ä¸ªéœ€è¦è½¬æ¢ä¸­é—´ç»“æœï¼Œä¸€ä¸ªä¸­é—´ç»“æœå’Œæœ€ç»ˆç»“æœä¸€è‡´ï¼Œæ‰€ä»¥ä¸éœ€è¦ä½¿ç”¨ &lt;code&gt;finisher()&lt;/code&gt; æ–¹æ³•&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
      <category term="coding life" scheme="http://yoursite.com/tags/coding-life/"/>
    
      <category term="java8" scheme="http://yoursite.com/tags/java8/"/>
    
  </entry>
  
  <entry>
    <title>jdk8-28-30-è‡ªå®šä¹‰æ”¶é›†å™¨&amp;å‘</title>
    <link href="http://yoursite.com/2017/04/12/jdk8-28-30-%E8%87%AA%E5%AE%9A%E4%B9%89%E6%94%B6%E9%9B%86%E5%99%A8-%E5%9D%91/"/>
    <id>http://yoursite.com/2017/04/12/jdk8-28-30-è‡ªå®šä¹‰æ”¶é›†å™¨-å‘/</id>
    <published>2017-04-12T00:32:03.000Z</published>
    <updated>2017-05-02T01:57:38.000Z</updated>
    
    <content type="html"><![CDATA[<p>æ”¶é›†å™¨ä¸­æœ‰å¾ˆ5ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œæ¯ä¸ªæŠ½è±¡æ–¹æ³•éƒ½æœ‰è‡ªå·±ç‰¹æ®Šçš„ä½œç”¨ï¼Œå¦‚æœè¯´æˆ‘ä»¬è¦è‡ªå·±å®ç°è¦ç»™æ”¶é›†å™¨çš„è¯ï¼Œæˆ‘ä»¬å°±éœ€è¦åˆ†åˆ«å®ç°ä¸‹é¢äº”ä¸ªæ–¹æ³•ã€‚</p>
<a id="more"></a>
<h3 id="1-ç®€å•è‡ªå®šä¹‰ä¸€ä¸ªæ”¶é›†å™¨"><a href="#1-ç®€å•è‡ªå®šä¹‰ä¸€ä¸ªæ”¶é›†å™¨" class="headerlink" title="1 ç®€å•è‡ªå®šä¹‰ä¸€ä¸ªæ”¶é›†å™¨"></a>1 ç®€å•è‡ªå®šä¹‰ä¸€ä¸ªæ”¶é›†å™¨</h3><p>è¿™ä¸ªæ”¶é›†å™¨çš„ç›®çš„æ˜¯å°†ä¸€ä¸ª <code>list</code> è½¬æ¢æˆä¸€ä¸ª <code>set</code> </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MySetCollector</span>&lt;<span class="title">T</span>&gt; <span class="keyword">implements</span> <span class="title">Collector</span>&lt;<span class="title">T</span>, <span class="title">Set</span>&lt;<span class="title">T</span>&gt;, <span class="title">Set</span>&lt;<span class="title">T</span>&gt;&gt; </span>&#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="keyword">public</span> Supplier&lt;Set&lt;T&gt;&gt; supplier() &#123;</div><div class="line">        System.out.println(<span class="string">"supplier invoked!!!"</span>);</div><div class="line">        <span class="keyword">return</span> HashSet::<span class="keyword">new</span>;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="keyword">public</span> BiConsumer&lt;Set&lt;T&gt;, T&gt; accumulator() &#123;</div><div class="line">	    System.out.println(<span class="string">"accumulator invoked!!!"</span>);</div><div class="line">        <span class="keyword">return</span> Set&lt;T&gt;::add;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * å¹¶è¡Œæ€§æµæ‰ä¼šè°ƒç”¨ï¼Œå°†ä¸¤ä¸ªåˆ†æ®µçš„é›†åˆ</div><div class="line">     * <span class="doctag">@return</span></div><div class="line">     */</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="keyword">public</span> BinaryOperator&lt;Set&lt;T&gt;&gt; combiner() &#123;</div><div class="line">        System.out.println(<span class="string">"combiner invoked!!!"</span>);</div><div class="line">        <span class="keyword">return</span> (t1, t2) -&gt; &#123;</div><div class="line">            t1.addAll(t2);</div><div class="line">            <span class="keyword">return</span> t1;</div><div class="line">        &#125;;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="keyword">public</span> Function&lt;Set&lt;T&gt;, Set&lt;T&gt;&gt; finisher() &#123;</div><div class="line">        System.out.println(<span class="string">"finisher invoked!!!"</span>);</div><div class="line">        <span class="keyword">return</span> Function.identity();</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * æè¿°è¿™ä¸ªé›†åˆçš„ç‰¹æ€§</div><div class="line">     * IDENTITY_FINISH è¡¨ç¤ºç»“æœå®¹å™¨å’Œä¸­é—´å®¹å™¨æ˜¯ä¸€è‡´çš„ï¼Œè¿™ä¸ªæ—¶å€™ JDK ä¼šåœ¨è¿”å›çš„æ—¶å€™è‡ªåŠ¨å¸®åŠ©æˆ‘ä»¬åšç±»å‹è½¬æ¢ã€‚è€Œä¸ç”¨å†å»è°ƒç”¨ finisher</div><div class="line">     * <span class="doctag">@return</span></div><div class="line">     */</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> Set&lt;Characteristics&gt; <span class="title">characteristics</span><span class="params">()</span> </span>&#123;</div><div class="line">    System.out.println(<span class="string">"characteristics invoked!!!"</span>);</div><div class="line">        <span class="keyword">return</span> Collections.unmodifiableSet(EnumSet.of(IDENTITY_FINISH,UNORDERED));</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">        List&lt;String&gt; words = Arrays.asList(<span class="string">"hello"</span> , <span class="string">"world"</span>, <span class="string">"welcome"</span>, <span class="string">"hello"</span>);</div><div class="line"></div><div class="line">        Set&lt;String&gt; stringSet = words.stream().collect(<span class="keyword">new</span> MySetCollector&lt;&gt;());</div><div class="line">        System.out.println(stringSet);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>å®ç°ç±»é‡Œï¼Œæˆ‘ä»¬åˆ†åˆ«å®ç°äº†5ä¸ªæ–¹æ³•ã€‚ å…¶ä¸­æ¯”è¾ƒé‡è¦çš„ä¸¤ä¸ªæ–¹å¼ <code>finisher</code> å’Œ <code>characteristics</code>  æ–¹æ³•</p>
<p>è¿™ä¿©æ–¹æ³•æ˜¯ç›¸äº’å½±å“çš„ã€‚é¦–å…ˆçœ‹ <code>characteristics</code>  æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•è¦æ±‚è¿”å›ä¸€ä¸ª <code>Characteristics</code> æšä¸¾ç±»å‹å¯¹çš„ <code>Set</code>ã€‚è€Œ  <code>Characteristics</code> ä¸€å…±æœ‰ä¸‰ä¸ªæšä¸¾å€¼ã€‚åˆ†åˆ«æœ‰ä¸åŒçš„å«ä¹‰ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line">   * å½“æˆ‘ä»¬é‡‡ç”¨å¹¶è¡Œæµçš„æ—¶å€™ï¼ŒåŒæ—¶è®¾ç½®äº†  CONCURRENT ä½œä¸ºè¿™ä¸ªæµçš„ç‰¹æ€§</div><div class="line">   * é‚£ä¹ˆï¼Œæ“ä½œçš„æ˜¯åŒä¸€ä¸ªé›†åˆï¼Œè€Œä¸æ˜¯å¤šä¸ª</div><div class="line">   * åŒæ ·çš„é“ç†ï¼Œæˆ‘ä»¬é‡‡ç”¨äº†å¹¶è¡Œæµçš„æ–¹å¼ï¼Œä½†æ˜¯æ²¡æœ‰è¿™ä¸ªç‰¹æ€§ï¼Œæˆ‘ä»¬å°±ä¼šç”Ÿæˆå¤šä¸ª</div><div class="line">   * é›†åˆ</div><div class="line">   */</div><div class="line">  CONCURRENT,</div><div class="line"></div><div class="line">  <span class="comment">/**</span></div><div class="line">   *  ä»£è¡¨é›†åˆæ˜¯å¦æ˜¯æœ‰åºçš„</div><div class="line">   */</div><div class="line">  UNORDERED,</div><div class="line"></div><div class="line">  <span class="comment">/**</span></div><div class="line">   * è¡¨ç¤º finisher function å¯ä»¥è¢«çœç•¥ï¼Œå› ä¸ºä¸­é—´ç»“æœå’Œæœ€åçš„è¿”å›çš„ç»“æœçš„ç±»å‹æ˜¯ä¸€è‡´çš„ã€‚</div><div class="line">   * æ‰€ä»¥å½“æˆ‘ä»¬è®¾ç½®äº†è¿™ä¸ªå±æ€§ä¹‹åï¼Œæˆ‘ä»¬å°±å¿…é¡»äº†è§£åˆ°ï¼Œ æœ€åçš„è¿”å›çš„ç±»å‹ï¼Œå¯ä»¥ç”±ä¸­é—´ç»“æœç±»å‹è¿›è¡Œå¼ºåˆ¶çš„è¿”å›ã€‚</div><div class="line">   */</div><div class="line">  IDENTITY_FINISH</div></pre></td></tr></table></figure>
<p>ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ä¸ºæˆ‘ä»¬è‡ªå·±çš„ <code>collector</code> è®¾ç½®äº†ä¸¤ä¸ªå±æ€§ï¼Œ <code>IDENTITY_FINISH</code> &amp; <code>UNORDERED</code> ; æ„æ€å°±æ˜¯è¿™ä¸ªæ”¶é›†å™¨æ”¶é›†çš„å…ƒç´ æ˜¯æ— åºçš„ã€‚ è€ŒåŒæ—¶ï¼Œè¿”å›çš„ç±»å‹å’Œä¸­é—´ç»“æœç±»å‹æ˜¯å¯ä»¥å®Œå…¨å¼ºåˆ¶è½¬æ¢çš„ï¼ˆå¦‚æœä¸å¯ä»¥ï¼Œåˆ™ä¼šæŠ¥é”™ï¼Œä¸‹é¢ä¼šè¯´åˆ°ï¼‰ï¼›è€Œ <code>finisher()</code>  å‡½æ•°æ˜¯ä¸ä¼šè¢«æ‰§è¡Œçš„ï¼Œå³ä½¿ä½ åœ¨å‡½æ•°å†…éƒ¨ç›´æ¥æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸éƒ½æ²¡æœ‰é—®é¢˜ï¼Œå› ä¸ºæ ¹æœ¬ä¸ä¼šæ‰§è¡Œã€‚<br>æ‰§è¡Œç»“æœæˆ‘ä»¬å¯ä»¥çœ‹ä¸€ä¸‹ï¼š</p>
<p><img src="http://static.zybuluo.com/zhumin1990719/0cl0ol9dyihk63ocsh0qzjgi/14914603137015.jpg" alt="14914603137015.jpg-102.1kB"></p>
<p>è¿™é‡Œéœ€è¦æ³¨æ„ä¸¤ç‚¹ï¼š</p>
<ol>
<li>è™½ç„¶ <code>combiner()</code> å‡½æ•°è¢«è°ƒç”¨äº†ï¼Œä½†æ˜¯åªæ˜¯è¿”å›äº†ä¸€ä¸ª <code>BinaryOperator</code> è€Œå·²ï¼Œè€Œè¿™ä¸ª <code>BinaryOperator</code> å¹¶ä¸ä¼šè¢«è°ƒç”¨ã€‚</li>
<li><code>finisher()</code> å‡½æ•°å¹¶æ²¡æœ‰è¢«è°ƒç”¨ï¼ŒåŸå› ä¸Šé¢å·²ç»è¯´è¿‡</li>
<li><code>characteristics()</code> å‡½æ•°è¢«è°ƒç”¨äº†ä¸¤æ¬¡ï¼Œåˆ†åˆ«ä»£è¡¨ä¸åŒçš„æ„æ€</li>
</ol>
<p>å¯¹äºç¬¬3ç‚¹ï¼Œæˆ‘ä»¬è·Ÿè¿› <code>collector()</code> æºä»£ç é‡Œçœ‹ä¸€ä¸‹, ä¾¿ä¼šæœ‰ç­”æ¡ˆã€‚</p>
<p><img src="http://static.zybuluo.com/zhumin1990719/nnftv5zwqcgildzp8ddyd1x3/14914608156971.jpg" alt="14914608156971.jpg-302.5kB"></p>
<p>å›¾ä¸­ä¹¦è¯´æ³•å…¶å®ä¸å‡†ç¡®ï¼Œå…¶å®æ˜¯ <code>evaluate</code> æ–¹æ³•ä¸­çš„ <code>ReduceOps.makeRef(collector)</code> ä¸­ï¼Œä¼šé€ä¸ªè°ƒç”¨ç›¸å…³æ–¹æ³•ï¼Œ åŒ…æ‹¬ <code>characteristics()</code> æ–¹æ³•ã€‚</p>
<p><img src="http://static.zybuluo.com/zhumin1990719/gj3bj52qxy1im34hvvznjt5s/14914612652241.jpg" alt="14914612652241.jpg-351.7kB"></p>
<p>æ‰€ä»¥ <code>characteristics()</code> è¢«è°ƒç”¨äº†ä¸¤æ¬¡ï¼Œç¬¬ä¸€æ¬¡ç”¨äºåˆ¤æ–­ <strong>æ˜¯å¦æ˜¯æ— åºé›†åˆ</strong> ï¼›ç¬¬äºŒæ¬¡ç”¨äºåˆ¤æ–­ <strong>æ˜¯å¦éœ€è¦æ‰§è¡Œ finisher ç”¨äºä¸­é—´ç»“æœå’Œæœ€ç»ˆç»“æœçš„ç±»å‹è½¬æ¢</strong></p>
<h3 id="2-å½“ä¸­é—´ç»“æœä¸è¿”å›ç»“æœä¸ä¸€è‡´"><a href="#2-å½“ä¸­é—´ç»“æœä¸è¿”å›ç»“æœä¸ä¸€è‡´" class="headerlink" title="2 å½“ä¸­é—´ç»“æœä¸è¿”å›ç»“æœä¸ä¸€è‡´"></a>2 å½“ä¸­é—´ç»“æœä¸è¿”å›ç»“æœä¸ä¸€è‡´</h3><p>çœ‹ä¸‹é¢è¿™ä¸ªæ”¹é€ çš„è‡ªå®šä¹‰æ”¶é›†å™¨ï¼Œä¸­é—´ç»“æœæ˜¯ä¸ª <code>set</code> è€Œè¿”å›çš„æ˜¯ä¸ª <code>map</code>ï¼Œä¹Ÿå°±æ˜¯ä¸­é—´ç»“æœå’Œæœ€ç»ˆæœ€ç»ˆç»“æœæ˜¯ä¸ä¸€è‡´çš„ã€‚è¿™ä¸ªæ—¶å€™ï¼Œ<code>finisher</code> å‡½æ•°å°±ä¼šæ’ä¸Šç”¨åœºäº†ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MySetCollector2</span>&lt;<span class="title">T</span>&gt; <span class="keyword">implements</span> <span class="title">Collector</span>&lt;<span class="title">T</span>, <span class="title">Set</span>&lt;<span class="title">T</span>&gt;, <span class="title">Map</span>&lt;<span class="title">T</span>,<span class="title">T</span>&gt;&gt; </span>&#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="keyword">public</span> Supplier&lt;Set&lt;T&gt;&gt; supplier() &#123;</div><div class="line">        System.out.println(<span class="string">"supplier invoked!!!!!"</span>);</div><div class="line">        <span class="keyword">return</span> HashSet::<span class="keyword">new</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="keyword">public</span> BiConsumer&lt;Set&lt;T&gt;, T&gt; accumulator() &#123;</div><div class="line">        System.out.println(<span class="string">"accumulator invoked!!!!!"</span>);</div><div class="line"></div><div class="line"></div><div class="line">        <span class="keyword">return</span> (set, item) -&gt; &#123;</div><div class="line">            System.out.println(set);</div><div class="line">            System.out.println(<span class="string">"threadName: "</span> + Thread.currentThread().getName());</div><div class="line">            set.add(item);</div><div class="line">        &#125;;</div><div class="line"><span class="comment">//        return Set&lt;T&gt;::add;</span></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="keyword">public</span> BinaryOperator&lt;Set&lt;T&gt;&gt; combiner() &#123;</div><div class="line">        System.out.println(<span class="string">"combiner invoked!!!!!"</span>);</div><div class="line"></div><div class="line">        <span class="keyword">return</span> (set1, set2) -&gt; &#123;</div><div class="line">            set1.addAll(set2);</div><div class="line">            <span class="keyword">return</span> set1;</div><div class="line">        &#125;;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="keyword">public</span> Function&lt;Set&lt;T&gt;, Map&lt;T, T&gt;&gt; finisher() &#123;</div><div class="line"></div><div class="line">        System.out.println(<span class="string">"finisher invoked!!!!"</span>);</div><div class="line"></div><div class="line">        <span class="keyword">return</span> set -&gt; &#123;</div><div class="line">            Map&lt;T, T&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</div><div class="line">            set.stream().forEach(item -&gt; map.put(item, item));</div><div class="line">            <span class="keyword">return</span> map;</div><div class="line">        &#125;;</div><div class="line"></div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="comment">/**</span></div><div class="line">     * å½“æœ‰ Characteristics.CONCURRENT æ„å‘³ç€å¦‚æœæœ‰å¹¶å‘ï¼Œåˆ™æ˜¯å¤šä¸ªçº¿ç¨‹æ“ä½œä¸€ä¸ªé›†åˆã€‚</div><div class="line">     * è¿™ä¸ªæ—¶å€™ accumulator å¦‚æœæœ‰ éå†æ“ä½œï¼Œå°±æœ‰å¯èƒ½ä¼šæŠ›å‡º  ConcurrentModificationException</div><div class="line">     * <span class="doctag">@return</span></div><div class="line">     */</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> Set&lt;Characteristics&gt; <span class="title">characteristics</span><span class="params">()</span> </span>&#123;</div><div class="line">        System.out.println(<span class="string">"characteristics invoked!!!!"</span>);</div><div class="line">        <span class="keyword">return</span> Collections.unmodifiableSet(EnumSet.of(Characteristics.UNORDERED, Characteristics.CONCURRENT));</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i ++) &#123;</div><div class="line">            List&lt;String&gt; words = Arrays.asList(<span class="string">"hello"</span>, <span class="string">"word"</span>, <span class="string">"helloword"</span>, <span class="string">"hello"</span>, <span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>, <span class="string">"d"</span>, <span class="string">"e"</span>);</div><div class="line">            Set&lt;String&gt; set = <span class="keyword">new</span> HashSet&lt;&gt;();</div><div class="line">            set.addAll(words);</div><div class="line"></div><div class="line">            Map&lt;String, String&gt; map = set.parallelStream().collect(<span class="keyword">new</span> MySetCollector2&lt;&gt;());</div><div class="line">            System.out.println(map);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>è¿™é‡Œç”±äºæˆ‘è¾“å‡ºä¸ä¸­é—´ç»“æœç±»å‹å¹¶ä¸ä¸€è‡´ï¼Œæ‰€ä»¥å¦‚æœæˆ‘åœ¨ <code>characteristics()</code> æ–¹æ³•ä¸­ï¼Œä¾æ—§ä½¿ç”¨  <code>IDENTITY_FINISH</code> ï¼Œä¹Ÿå°±æ˜¯è¿›è¡Œç±»å‹å¼ºè½¬ï¼Œåˆ™å¿…ç„¶æŠ¥é”™ï¼Œç±»å‹è½¬æ¢å¼‚å¸¸ã€‚å¤§å®¶å¯ä»¥è‡ªå·±è¯•ä¸€ä¸‹ã€‚</p>
<h3 id="3-å¹¶å‘ä¸å¹¶è¡Œçš„åŒºåˆ«-å¹¶è¡Œæ—¶å€™çš„ä¸€äº›å‘"><a href="#3-å¹¶å‘ä¸å¹¶è¡Œçš„åŒºåˆ«-å¹¶è¡Œæ—¶å€™çš„ä¸€äº›å‘" class="headerlink" title="3 å¹¶å‘ä¸å¹¶è¡Œçš„åŒºåˆ«-å¹¶è¡Œæ—¶å€™çš„ä¸€äº›å‘"></a>3 å¹¶å‘ä¸å¹¶è¡Œçš„åŒºåˆ«-å¹¶è¡Œæ—¶å€™çš„ä¸€äº›å‘</h3><p>è¿™é‡Œï¼Œæœ‰å¦å¤–ä¸€ä¸ªå¾ˆè¦å‘½çš„å‘ã€‚</p>
<blockquote>
<p>åœ¨è¯´è¿™ä¸ªæ¦‚å¿µä¹‹å‰ï¼Œå…ˆè¯´ä¸€ä¸‹æ”¶é›†å™¨ä¸­ <code>parallel</code> å’Œ <code>concurrent</code> çš„åŒºåˆ«</p>
<ul>
<li><code>parallel</code> æ˜¯<strong>å¹¶è¡Œ</strong>ï¼Œä¼šå°†äº§ç”Ÿå¤šä¸ªé›†åˆï¼Œå¤šä¸ªçº¿ç¨‹æ“ä½œï¼Œæœ€ååˆå¹¶ï¼Œä¹Ÿå°±æ˜¯ä¼šè°ƒç”¨ <code>combiner()</code> æ–¹æ³•</li>
</ul>
<ul>
<li><code>concurrent</code> æ˜¯<strong>å¹¶å‘</strong>ï¼Œ æ˜¯å¤šä¸ªçº¿ç¨‹å¯¹åŒä¸€ä¸ªé›†åˆè¿›è¡Œæ“ä½œï¼Œé¦–å…ˆ <code>combiner()</code> å‡½æ•°ä¸ä¼šè¢«æ‰§è¡Œï¼Œè€ŒåŒæ—¶ï¼Œå¦‚æœä½ åœ¨ <code>accumulator()</code> å‡½æ•°ä¸­è¿›è¡Œç´¯åŠ æ“ä½œï¼Œåˆè¿›è¡Œéå†æ“ä½œï¼Œå°±ä¼šæŠ›å‡ºå¹¶å‘å¼‚å¸¸ã€‚</li>
</ul>
</blockquote>
<p>ç”¨ä¾‹å­è¯´è¯ï¼Œé¦–å…ˆæˆ‘ä»¬å¿…é¡»é‡‡ç”¨ <code>å¹¶è¡Œæµ</code> ï¼Œ åœ¨ <code>accumulator()</code> å‡½æ•°ä¸­éå† <code>set</code>, åŒæ—¶å°† <code>characteristics()</code> å‡½æ•°ä¸­åŠ å…¥ <code>CONCURRENT</code> è¿™ä¸ªå±æ€§ï¼Œä½ æ‰§è¡Œ100æ¬¡ï¼ŒåŸºæœ¬éƒ½ä¼šæŠ›å‡ºå¼‚å¸¸</p>
<p><img src="http://static.zybuluo.com/zhumin1990719/2bpiqnuxu4atmod39o4v090m/14914633115993.jpg" alt="14914633115993.jpg-397.3kB"></p>
<p>åŸå› å¾ˆç®€ç­”ä¹Ÿæ¯”è¾ƒå¤æ‚ï¼š ç¨‹åºé‡‡ç”¨äº†å¹¶è¡Œæµ <code>set.parallelStream()</code>ï¼ŒåŒæ—¶è®¾ç½®äº† <code>CONCURRENT</code> å±æ€§ï¼›ä¹Ÿå°±æ˜¯è¯´ï¼Œå¤šä¸ªçº¿ç¨‹æ“ä½œåŒä¸€ä¸ªé›†åˆã€‚</p>
<p><img src="http://static.zybuluo.com/zhumin1990719/0cy0jahcni4gnhbb00qjiivv/14914634695900.jpg" alt="14914634695900.jpg-105.6kB"></p>
<p>è€Œåœ¨ <code>accumulator()</code> å‡½æ•°ä¸­åŒæ—¶éå†äº†é›†åˆï¼Œä¹Ÿä¿®æ”¹äº†é›†åˆã€‚ç”±äºæ˜¯å¤šçº¿ç¨‹æ“ä½œï¼Œå¾ˆå¤§çš„æ¦‚ç‡å°±ä¼šå‘ç”Ÿä½ ä¸€è¾¹éå†é›†åˆï¼Œä¸€éä¿®æ”¹ï¼Œå°±ä¼šæŠ¥é”™ã€‚é¡ºè¢«å¤§å®¶å¯çœ‹çœ‹ <code>ConcurrentModificationException</code> çš„ <em>javadoc</em>. </p>
<p><img src="http://static.zybuluo.com/zhumin1990719/bgpyjod0lm1fm796tszkxw0c/14914635854475.jpg" alt="14914635854475.jpg-77.1kB"></p>
<p>è€Œå¦‚æœï¼Œä½ ä¸æ·»åŠ  <code>CONCURRENT</code> è¿™ä¸ªå±æ€§ï¼Œå°±ä¸ä¼šæŠ¥é”™ã€‚å› ä¸ºä¼šç”Ÿæˆå¤šä¸ªä¸­é—´é›†åˆã€‚è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥æ”¹é€  <code>supplier()</code> æ–¹æ³•ï¼Œåœ¨å…¶ä¸­ç­”åº”ä¸€æ¡è¯­å¥ï¼Œé€šè¿‡æ‰“å°äº†å‡ æ¡è¯­å¥ï¼Œå°±å¯ä»¥çœ‹å‡ºäº§ç”Ÿäº†å‡ ä¸ªé›†åˆã€‚</p>
<blockquote>
<p>å½“ç„¶äº†ï¼Œå¦‚æœä½ åœ¨  <code>accumulator()</code> ä¸­ä¸å»æœ‰é‚£ä¸ªéå†çš„æ“ä½œï¼Œä¹Ÿæ˜¯å³ä½¿ä½ æ·»åŠ äº† <code>CONCURRENT</code> å±æ€§ï¼Œä¹Ÿæ˜¯ä¸ä¼šæŠ¥é”™çš„ã€‚å› ä¸ºä½ æ²¡æœ‰å¹¶å‘çš„å³éå†åˆä¿®æ”¹ä¸€ä¸ªé›†åˆ</p>
</blockquote>
<p><img src="http://static.zybuluo.com/zhumin1990719/n73a6j6hol02our7kigqyo1x/14914638813587.jpg" alt="14914638813587.jpg-75.7kB"></p>
<p>è€Œä¸€èˆ¬äº§ç”Ÿå¤šå°‘é›†åˆï¼Œç”±äº§ç”Ÿå¤šå°‘ä¸ªçº¿ç¨‹å†³å®šï¼Œè€Œäº§ç”Ÿå¤šå°‘çº¿ç¨‹ä¸€èˆ¬ç”±æœºå™¨ç»è¿‡ <code>è¶…çº¿ç¨‹</code> æŠ€æœ¯ä¹‹åæœ‰å¤šå°‘ä¸ªå¤„ç†å™¨è€Œç¡®å®šçš„ã€‚å½“ç„¶ä¹Ÿæ˜¯å¯ä»¥ä¿®æ”¹çš„ï¼Œä½†æ˜¯ä¸€èˆ¬æ²¡æœ‰å¿…è¦ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// æŸ¥çœ‹æœ‰å¤šå°‘å¤„ç†å™¨</span></div><div class="line">Runtime.getRuntime().availableProcessors();</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ”¶é›†å™¨ä¸­æœ‰å¾ˆ5ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œæ¯ä¸ªæŠ½è±¡æ–¹æ³•éƒ½æœ‰è‡ªå·±ç‰¹æ®Šçš„ä½œç”¨ï¼Œå¦‚æœè¯´æˆ‘ä»¬è¦è‡ªå·±å®ç°è¦ç»™æ”¶é›†å™¨çš„è¯ï¼Œæˆ‘ä»¬å°±éœ€è¦åˆ†åˆ«å®ç°ä¸‹é¢äº”ä¸ªæ–¹æ³•ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="coding life" scheme="http://yoursite.com/tags/coding-life/"/>
    
      <category term="java8" scheme="http://yoursite.com/tags/java8/"/>
    
  </entry>
  
  <entry>
    <title>jdk8-2-æµåˆæ­¥ä»¥åŠFunctionè¯¦è§£</title>
    <link href="http://yoursite.com/2017/02/14/jdk8-2-%E6%B5%81%E5%88%9D%E6%AD%A5%E4%BB%A5%E5%8F%8AFunction%E8%AF%A6%E8%A7%A3/"/>
    <id>http://yoursite.com/2017/02/14/jdk8-2-æµåˆæ­¥ä»¥åŠFunctionè¯¦è§£/</id>
    <published>2017-02-14T06:56:17.000Z</published>
    <updated>2017-04-14T07:07:10.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ä¸€-æµåˆæ­¥"><a href="#ä¸€-æµåˆæ­¥" class="headerlink" title="ä¸€ æµåˆæ­¥"></a>ä¸€ æµåˆæ­¥</h3><p>java 8æä¾›ä¸€ç§æ›´åŠ æ–¹ä¾¿çš„æ“ä½œé›†åˆæ–¹å¼ï¼Œå³æµ~ <code>Stream</code><br>Streamçš„æ¦‚å¿µå…¶å®ç±»ä¼¼äº <em>liunx</em> æ“ä½œç³»ç»Ÿçš„ä¸­çš„ <code>PipeLine</code> çš„æ¦‚å¿µï¼Œå¯ä»¥å°†æ•°æ®ä¼ è¾“ï¼›</p>
<a id="more"></a>
<p>æµ åˆ†ä¸ºä¸¤ç§ï¼š</p>
<ol>
<li>ä¸­é—´æµï¼šæ•°æ®é€šè¿‡åè¿˜è¿”å›ä¸€ä¸ªæµï¼Œä¸æ˜¯æ•°æ®çš„ç»ˆç‚¹</li>
<li>èŠ‚ç‚¹æµï¼šæ•°æ®æµå…¥åä¸å†è¿”å›æµï¼Œæ“ä½œç»“æŸï¼Œæ²¡æœ‰è¿”å›</li>
</ol>
<p>ä½¿ç”¨java8 ä¸­çš„ <code>List</code> æ¥å†™ä¸€ä¸ªä¾‹å­ï¼Œè¿™ä¸ªä¾‹å­æ˜¯å°†é›†åˆä¸­çš„æ‰€æœ‰å…ƒç´ ï¼Œå…¨éƒ¨å˜ä¸ºå¤§å†™ï¼Œè€Œåå°†å…ƒç´ é€ä¸€è¾“å‡º<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test3</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">        List&lt;String&gt; list1 = Arrays.asList(<span class="string">"min.zhu"</span>, <span class="string">"yi.yu"</span>, <span class="string">"nai.nai"</span>);</div><div class="line"><span class="comment">//        list1.stream().map(item -&gt; item.toUpperCase()).forEach(item -&gt; System.out.println(item));</span></div><div class="line">        List&lt;String&gt; list2 = <span class="keyword">new</span> ArrayList&lt;&gt;();</div><div class="line">        </div><div class="line">        <span class="comment">// æµçš„æ“ä½œæ–¹å¼ ç±»ä¼¼ linux çš„ç®¡é“åŠŸèƒ½</span></div><div class="line">        <span class="comment">// æµ åˆ†ä¸ºï¼š ä¸­é—´æµ å’Œ èŠ‚ç‚¹æµ</span></div><div class="line">        <span class="comment">// map ç§°ä¹‹ä¸º æ˜ å°„ ä¸ mapper-reducer é˜¶æ®µçš„map åŠŸèƒ½æ˜¯ä¸€è‡´çš„ï¼Œç»™å®šä¸€ä¸ªå€¼ï¼Œè¿”å›ä¼šä¸€ä¸ªç”±äºä¹‹æ˜ å°„çš„å€¼</span></div><div class="line">        list1.stream().map(item -&gt; item.toUpperCase()).forEach(item -&gt; list2.add(item));</div><div class="line"></div><div class="line">        <span class="comment">// å‡½æ•°å¼•ç”¨çš„åšæ³•</span></div><div class="line">        <span class="comment">// String::toUpperCase å…¶å® å’Œ item -&gt; item.toUpperCase()</span></div><div class="line">        <span class="comment">/**</span></div><div class="line">         * ä¸€è‡´ï¼Œéƒ½æ˜¯æœ‰è¾“å…¥æœ‰è¾“å‡ºï¼Œè€Œ toUpperCase çš„è¾“å…¥ï¼Œå°±æ˜¯è°ƒç”¨ä»–çš„å®ä¾‹å¯¹è±¡</div><div class="line">         * å› ä¸ºä¸€ä¸ªç±»æ˜¯æ— æ³•è°ƒç”¨ä»–çš„å®ä¾‹æ–¹æ³•çš„ï¼Œä¸€å®šæ˜¯å®ä¾‹æ‰å¯ä»¥è°ƒç”¨å®ä¾‹æ–¹æ³•</div><div class="line">         */</div><div class="line">        list1.stream().map(String::toUpperCase).forEach(System.out::println);</div><div class="line">        list1.stream().map(String::toUpperCase).forEach(list2::add);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>java8 çš„è°ƒç”¨æµçš„æ–¹å¼ï¼Œæ˜¯ä½¿ç”¨é›†åˆçš„ <code>stream()</code> æ–¹æ³•ï¼Œ è¿™ä¸ªæ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªæµï¼Œä¹‹åå°±å¯ä»¥è°ƒç”¨ <code>map()</code> æ–¹æ³•å¯¹ <code>list</code> ä¸­çš„å…ƒç´ åšä¸€å®šçš„å¤„ç†ã€‚ <code>map()</code> å‡½æ•°ï¼Œè¿˜æ˜¯è¿”å›äº†ä¸€ä¸ªæµï¼Œè¿™ä¸ªæµä¹Ÿæœ‰ <code>forEach</code> æ–¹æ³•ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬è¿˜å¯ä»¥è°ƒç”¨ <code>forEach</code> æ–¹æ³•å¯¹æµä¸­çš„æ•°æ®è¿›è¡Œé€ä¸€çš„å¤„ç†ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>forEach</code> å‡½æ•°ä¸­, éœ€è¦ä¼ é€’çš„å‡½æ•°çš„å‚æ•°æ˜¯ä¸€ä¸ª <code>Consumer</code> çš„å‡½æ•°å¼æ¥å£ï¼Œè¿™ä¸ªæ¥å£çš„æŠ½è±¡æ–¹æ³• <code>accpt()</code> æ˜¯æ²¡æœ‰è¿”å›å€¼çš„ï¼Œæ‰€ä»¥ï¼Œä»–ä¸åœ¨å¯ä»¥è¿”å›ä¸€ä¸ªå¯ä»¥ç»§ç»­æ“ä½œçš„æµã€‚</p>
<p>è€Œæˆ‘ä»¬åœ¨çœ‹çœ‹ <code>map</code> æ–¹æ³•ä¸­ï¼Œéœ€è¦ä¼ é€’çš„æ˜¯ä¸€ä¸ªæˆ‘ä»¬æ²¡æœ‰è§è¿‡çš„ <code>Function</code> çš„å‡½æ•°å¼æ¥å£ï¼Œè¿™ä¸ªå‡½æ•°å¼æ¥å£ï¼Œæœ‰ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯è¾“å…¥å‚æ•°ï¼Œä¸€ä¸ªæ˜¯è¿”å›å€¼ã€‚ä»–çš„å”¯ä¸€çš„æŠ½è±¡æ–¹æ³•ä¸­ï¼Œæ˜¯æ¥å—ä¸€ä¸ªå‚æ•°ï¼Œè¿”å›ä¸€ä¸ªå€¼ã€‚å…·ä½“è§ä¸‹å›¾ï¼Œå”¯ä¸€çš„æ–¹æ³•æ˜¯ <code>apply</code> æ–¹æ³•ï¼Œå®ƒæ˜¯æœ‰è¿”å›å€¼çš„ï¼Œè¿™ä¸€ç‚¹å’Œç°å®ä¸­çš„å‡½æ•°å¾ˆåƒ</p>
<p><img src="http://static.zybuluo.com/zhumin1990719/a0gnbt50hdkjtfdk2ug54yws/image_1b5ng26f4el33qb92s1itsgpl9.png" alt="image_1b5ng26f4el33qb92s1itsgpl9.png-43.2kB"></p>
<blockquote>
<p>æˆ‘ä»¬ä¹‹å‰è¯´è¿‡ï¼Œjava8 ä¸­ï¼Œæ–°å¢äº†å¾ˆå¤šä¸ªå‡½æ•°å¼æ¥å£ï¼Œåˆ†åˆ«ç”¨äºä¸åŒçš„åœºæ™¯<br>å¦‚ä¹‹å‰è¯´çš„ <code>Consumer</code> æ¥å£ï¼Œä»–æ˜¯æ²¡æœ‰è¿”å›å€¼çš„ä¸€ä¸ªåœºæ™¯ï¼Œä¸“ç”¨äºå¤„ç†æ•°æ®<br>ä»¥åŠä»Šå¤©è¯´çš„æœ‰è¿”å›å€¼çš„ <code>Function</code> æ¥å£</p>
</blockquote>
<p>é‚£ä¹ˆè¿™ä¸ª <code>Function</code> çš„å‡½æ•°å¼æ¥å£ï¼Œå°±æ˜¯æˆ‘ä»¬ä»Šå¤©çš„é‡ç‚¹ã€‚</p>
<h3 id="äºŒ-Functon-æ¥å£-ä»¥åŠ-BiFunctionç®€ä»‹"><a href="#äºŒ-Functon-æ¥å£-ä»¥åŠ-BiFunctionç®€ä»‹" class="headerlink" title="äºŒ Functon æ¥å£ ä»¥åŠ BiFunctionç®€ä»‹"></a>äºŒ Functon æ¥å£ ä»¥åŠ BiFunctionç®€ä»‹</h3><p>æˆ‘ä»¬å¯ä»¥ç”¨ä¸€ä¸ªä¾‹å­æ¥å®Œæ•´çš„è¯´æ˜é—®é¢˜ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> * å‡½æ•°å¼æ¥å£ Function çš„ç»å…¸æ¡ˆä¾‹</div><div class="line"> * jdk 8 æ–°å¢å¾ˆå¤š å‡½æ•°å¼æ¥å£</div><div class="line"> * ä¹‹å‰çœ‹çš„ forEach æ–¹æ³•ä¸­çš„ Consumer æ¥å£ ï¼Œä»–çš„ä½œç”¨å°±æ˜¯ å¯¹ç»™å®šçš„å‚æ•°è¿›è¡Œä¸€ç³»åˆ—æ“ä½œï¼Œä¸è¿”å›å€¼</div><div class="line"> * è€Œç°åœ¨çš„ ä»¥åŠ Test3 ä¸­æµçš„ map æ–¹æ³•ä¸­ Function æ¥å£ ï¼Œä»–å”¯ä¸€çš„æ“ä½œ æ˜¯apply , ä»–æœ‰è¿”å›å€¼ï¼Œä¸€ä¸ªvalue ä¸€ä¸ª Return ï¼Œä¸ç°å®å½“ä¸­æ•°å­¦çš„å‡½æ•°å¾ˆç±»ä¼¼</div><div class="line"> *</div><div class="line"> * jdk 8 ä¸­ï¼Œæ¥å£ä¸­ é™¤äº†å¯ä»¥æœ‰ default æ–¹æ³•ä»¥å¤–ï¼Œ è¿˜å¯ä»¥æœ‰ä¸€ä¸ª static æ–¹æ³•ï¼Œ static æ–¹æ³•å¯ä»¥æœ‰é»˜è®¤çš„å®ç°</div><div class="line"> * å¯ä»¥å‚è€ƒ Function è¿™ä¸ªå‡½æ•°å¼æ¥å£</div><div class="line"> */</div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FunctionTest</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line"></div><div class="line">        FunctionTest functionTest = <span class="keyword">new</span> FunctionTest();</div><div class="line"></div><div class="line">        <span class="comment">// å‡½æ•°å¼æ¥å£ï¼Œä»¥åŠ lambda è¡¨è¾¾å¼ï¼Œè®©æˆ‘ä»¬å¯ä»¥åœ¨å‡½æ•°æ“ä½œçš„æ—¶å€™ï¼Œä¼ é€’å‡½æ•°ï¼Œå³ä¼ é€’è¡Œä¸º</span></div><div class="line">        <span class="comment">// è€Œä¹‹å‰çš„ç¼–ç¨‹æ–¹æ³•ï¼Œè¡Œä¸ºå¿…é¡»å·²ç»ç¡®å®šï¼Œè€Œåè¿›è¡Œè°ƒç”¨</span></div><div class="line">        <span class="comment">// æ•…è€Œ ä¹‹å‰çš„ç¼–ç¨‹æ–¹æ³•ç§°ä¹‹ä¸ºå‘½ä»¤å¼ç¼–ç¨‹ï¼Œè€Œåé¢çš„æ–¹æ³•ç§°ä¹‹ä¸º å‡½æ•°å¼ç¼–ç¨‹</span></div><div class="line">        <span class="comment">// è€Œ å¯ä»¥ä¼ é€’ï¼Œæˆ–è€… è¿”å›å‡½æ•°çš„å‡½æ•°ï¼Œç§°ä¹‹ä¸ºé«˜é˜¶å‡½æ•°ï¼ˆ js ä¸­éšå¤„å¯è§é«˜é˜¶å‡½æ•°</span></div><div class="line">        System.out.println(functionTest.compute(<span class="number">1</span>, item -&gt; <span class="number">2</span> * item));</div><div class="line"></div><div class="line">        <span class="comment">// è¿™ç§è¿”å›æ–¹å¼æ˜¯ statement æ–¹æ³•</span></div><div class="line">        <span class="comment">// ä¸Šé¢é‚£ç§æ–¹å¼æ˜¯ expression æ–¹å¼</span></div><div class="line">        <span class="comment">// ä¸€ä¸ªæ˜¯ä¸€ä¸ªæ ‡å‡†çš„è¯­å¥ï¼Œè€Œä¸€ä¸ªæ˜¯ä¸€ä¸ªè¡¨è¾¾å¼</span></div><div class="line">        <span class="comment">/*</span></div><div class="line">         * è¡¨è¾¾å¼æ˜¯ä¸éœ€è¦åˆ†å¥½ç»“å°¾çš„</div><div class="line">         * è€Œä½¿ç”¨ æ ‡å‡†è¯­å¥ï¼Œåˆ™å¿…é¡»è¦ ï¼› è€Œä¸”è¦ &#123;&#125;</div><div class="line">         */</div><div class="line">        System.out.println(functionTest.compute(<span class="number">1</span>, item -&gt; &#123;<span class="keyword">return</span>  <span class="number">2</span> * item;&#125;));</div><div class="line">        System.out.println(functionTest.compute(<span class="number">2</span>, item -&gt; item * item));</div><div class="line">        System.out.println(functionTest.convert(<span class="string">"hello"</span>, item -&gt; item + <span class="string">" world !!"</span>));</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compute</span><span class="params">(<span class="keyword">int</span> value, Function&lt;Integer, Integer&gt; function)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> function.apply(value);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">convert</span><span class="params">(String value , Function&lt;String, String&gt; function)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> function.apply(value);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¸»è¦å»çœ‹ä»£ç çš„æ³¨é‡Šï¼Œä¸Šé¢å†™å®Œäº†æ‰€æœ‰é‡ç‚¹çš„å†…å®¹ï¼Œæˆ‘ä»¬å†å»çœ‹çœ‹ <code>Function</code> è¿™ä¸ªå‡½æ•°å¼æ¥å£çš„å®ç°ï¼Œæˆ‘ä»¬çŸ¥é“ï¼Œ<code>java8</code> å…è®¸æ¥å£æœ‰ <code>default</code> æ–¹æ³•ï¼Œè€Œ <code>Function</code> æ¥å£ä¸­æœ‰ä¸¤ä¸ªé»˜è®¤æ–¹æ³•ï¼š</p>
<p><img src="http://static.zybuluo.com/zhumin1990719/o6nkgv0l1c4kjmaot2r0hd9u/image_1b5ngi5f21mha13p0uu4d06851m.png" alt="image_1b5ngi5f21mha13p0uu4d06851m.png-66.8kB"></p>
<p>åˆ©ç”¨è¿™ä¸ªä¸¤ä¸ªæ–¹æ³•ï¼Œå¯ä»¥åšå‡½æ•°çš„ç»„åˆï¼Œç”¨ä¸€ä¸ªå‡½æ•°çš„è¾“å‡ºï¼Œä½œä¸ºä¸€ä¸ªå‡½æ•°çš„è¾“å…¥ã€‚</p>
<ul>
<li><code>compose</code> æ–¹æ³•ï¼Œæ˜¯å…ˆæ‰§è¡Œ <code>before</code> è¿™ä¸ªfunction, åœ¨æ‰§è¡Œæœ¬èº«è¿™ä¸ªfunctionï¼›</li>
<li><code>andThen</code> æ–¹æ³•ï¼Œåˆ™æ˜¯å…ˆæ‰§è¡Œ <code>Function</code> æœ¬ä½“çš„ <code>apply</code> æ–¹æ³•ï¼Œåœ¨æ‰§è¡Œä¼ å…¥çš„ <code>after</code> çš„æ–¹æ³•</li>
</ul>
<p>æˆ‘ä»¬æ¥å†™ä¸ªä¾‹å­ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FunctionTest2</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line"></div><div class="line">        FunctionTest2 functionTest2 = <span class="keyword">new</span> FunctionTest2();</div><div class="line"></div><div class="line">        <span class="comment">// 12</span></div><div class="line">        System.out.println(functionTest2.compute(<span class="number">2</span>, item -&gt; item * <span class="number">3</span>, item -&gt; item * item));</div><div class="line">        <span class="comment">// 36</span></div><div class="line">        System.out.println(functionTest2.compute2(<span class="number">2</span>, item -&gt; item * <span class="number">3</span>, item -&gt; item * item));</div><div class="line">        <span class="comment">// 25</span></div><div class="line">        System.out.println(functionTest2.compute3(<span class="number">2</span>, <span class="number">3</span>, (a,b)-&gt; a+b , result -&gt; result * result));</div><div class="line"></div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compute</span> <span class="params">(<span class="keyword">int</span> a, Function&lt;Integer, Integer&gt; function1, Function&lt;Integer, Integer&gt; function2)</span> </span>&#123;</div><div class="line"></div><div class="line">        <span class="comment">/**</span></div><div class="line">         * compose å°±æ˜¯ å…ˆæ‰§è¡Œ function2.apply</div><div class="line">         * å†å°† function2.apply çš„è¿”å›å€¼ï¼Œä½œä¸º function1 çš„è¾“å…¥</div><div class="line">         * æ­¤æ—¶å†æ‰§è¡Œ function1 apply</div><div class="line">         */</div><div class="line">        <span class="keyword">return</span> function1.compose(function2).apply(a);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compute2</span> <span class="params">(<span class="keyword">int</span> a, Function&lt;Integer, Integer&gt; function1, Function&lt;Integer, Integer&gt; function2)</span> </span>&#123;</div><div class="line">        <span class="comment">/**</span></div><div class="line">         * compose å°±æ˜¯ å…ˆæ‰§è¡Œ function1.apply</div><div class="line">         * å†å°† function1.apply çš„è¿”å›å€¼ï¼Œä½œä¸º function2 çš„è¾“å…¥</div><div class="line">         * æ­¤æ—¶å†æ‰§è¡Œ function2 apply</div><div class="line">         */</div><div class="line">        <span class="keyword">return</span> function1.andThen(function2).apply(a);</div><div class="line">    &#125;</div><div class="line"></div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * å¦‚æœæƒ³åšæœ‰ä¸¤ä¸ªå‚æ•°çš„Function å°±éœ€è¦ä½¿ç”¨BiFunction</div><div class="line">     * è€Œ BiFunction åªæœ‰ä¸€ä¸ª andThen , andThen çš„è¾“å…¥ æ˜¯ Functionï¼Œ</div><div class="line">     * å› ä¸ºæ˜¯å°† Apply çš„ç»“æœè¿”å›ï¼Œç»“æœåªæœ‰ä¸€ä¸ªï¼Œæ‰€ä»¥ å‚æ•°åªèƒ½æ˜¯ Function , è€Œä¸æ˜¯ BiFunction</div><div class="line">     * æ‰€ä»¥ BiFunction æ–¹æ³•ä¸å¯èƒ½æœ‰ compose æ–¹æ³•</div><div class="line">     *</div><div class="line">     * å¯¹åº”çš„  consumer ä¹Ÿæœ‰ç€ BiConsumer åŒæ—¶ï¼ŒäºŒè€…å› ä¸ºæ²¡æœ‰è¿”å›å€¼ï¼Œæ‰€ä»¥ä¹Ÿåªå¯èƒ½æœ‰ andThen æ–¹æ³•</div><div class="line">     * <span class="doctag">@return</span></div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">compute3</span> <span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b, BiFunction&lt;Integer, Integer, Integer&gt; biFunction, Function&lt;Integer, Integer&gt; function)</span> </span>&#123;</div><div class="line"></div><div class="line">        <span class="keyword">return</span> biFunction.andThen(function).apply(a,b);</div><div class="line"></div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<p><code>compose</code> å’Œ <code>andThen</code> çš„åŠŸèƒ½å¯ä»¥ä»ä¾‹å­ä¸­å¾ˆå¥½çš„çœ‹å‡ºæ¥ï¼Œä¾‹å­ä¸­è¿˜æœ‰ä¸€ä¸ªæ–°çš„æ¥å£å« <code>BiFunction</code>, è¿™ä¸ªå‡½æ•°å¼æ¥å£æ˜¯ç»™å®šä¸¤ä¸ªè¾“å…¥ï¼Œè¿”å›ä¸€ä¸ªè¾“å‡ºï¼Œè§£å†³äº†æœ‰ä¸¤ä¸ªå‚æ•°çš„å‡½æ•°çš„é—®é¢˜ï¼Œå¯¹åº”çš„ï¼Œå…¶å® <code>Comsumer</code> æ¥å£ä¹Ÿè¿˜æœ‰ä¸€ä¸ªå¯¹åº”çš„ <code>BiConsumer</code> æ¥å£ã€‚</p>
<p>è€Œå½“æˆ‘ä»¬å»è§‚å¯Ÿè¿™ä¿© <code>Bi</code> çš„æ¥å£ï¼Œéƒ½åªæœ‰ä¸€ä¸ª <code>andThen</code> çš„æ¥å£ï¼Œä¸ºå•¥æ²¡æœ‰ <code>compose</code> æ–¹æ³•å‘¢ï¼Ÿ<br>ç»™è¯»è€…è‡ªå·±æ€è€ƒå§~</p>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;ä¸€-æµåˆæ­¥&quot;&gt;&lt;a href=&quot;#ä¸€-æµåˆæ­¥&quot; class=&quot;headerlink&quot; title=&quot;ä¸€ æµåˆæ­¥&quot;&gt;&lt;/a&gt;ä¸€ æµåˆæ­¥&lt;/h3&gt;&lt;p&gt;java 8æä¾›ä¸€ç§æ›´åŠ æ–¹ä¾¿çš„æ“ä½œé›†åˆæ–¹å¼ï¼Œå³æµ~ &lt;code&gt;Stream&lt;/code&gt;&lt;br&gt;Streamçš„æ¦‚å¿µå…¶å®ç±»ä¼¼äº &lt;em&gt;liunx&lt;/em&gt; æ“ä½œç³»ç»Ÿçš„ä¸­çš„ &lt;code&gt;PipeLine&lt;/code&gt; çš„æ¦‚å¿µï¼Œå¯ä»¥å°†æ•°æ®ä¼ è¾“ï¼›&lt;/p&gt;
    
    </summary>
    
    
      <category term="coding life" scheme="http://yoursite.com/tags/coding-life/"/>
    
      <category term="java8" scheme="http://yoursite.com/tags/java8/"/>
    
  </entry>
  
  <entry>
    <title>jdk8-1.1-æ–¹æ³•å¼•ç”¨ï¼šlambdaè¡¨è¾¾å¼çš„è¯­æ³•ç³–</title>
    <link href="http://yoursite.com/2017/02/12/jdk8-1-1-%E6%96%B9%E6%B3%95%E5%BC%95%E7%94%A8%EF%BC%9Alambda%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%9A%84%E8%AF%AD%E6%B3%95%E7%B3%96/"/>
    <id>http://yoursite.com/2017/02/12/jdk8-1-1-æ–¹æ³•å¼•ç”¨ï¼šlambdaè¡¨è¾¾å¼çš„è¯­æ³•ç³–/</id>
    <published>2017-02-12T07:31:46.000Z</published>
    <updated>2017-04-14T07:33:54.000Z</updated>
    
    <content type="html"><![CDATA[<blockquote>
<p>æ–¹æ³•åº”ç”¨å…¶å®æ˜¯ jdk 8 ä¸­çš„å¯¹äº  <em>lambda</em> è¡¨è¾¾å¼ç»™äºˆçš„ä¸€ç§ <strong>è¯­æ³•ç³–</strong></p>
</blockquote>
<p>è€Œæ–¹æ³•å¼•ç”¨ä¸€å…±åˆ†ä¸º 4 ç§ï¼›</p>
<ul>
<li>1 <code>ç±»å::é™æ€æ–¹æ³•å</code></li>
<li>2 <code>å¯¹è±¡å::æ–¹æ³•å</code></li>
<li>3 <code>ç±»å::å®ä¾‹æ–¹æ³•å</code></li>
<li>4 <code>æ„é€ æ–¹æ³•å¼•ç”¨::new</code></li>
</ul>
<a id="more"></a>
<p>æˆ‘ä»¬æœ‰intellj ç¼–å†™ lambda è¡¨è¾¾å¼çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨æ€»æ˜¯æ ‡é»„æ¥å‘Šè¯‰ä½ ï¼Œè¿™é‡Œå¯ä»¥ä½¿ç”¨æ–¹æ³•å¼•ç”¨çš„æ–¹æ³•æ¥è¿›è¡Œä»£ç çš„ç®€åŒ–</p>
<p><img src="http://static.zybuluo.com/zhumin1990719/6sl7hr28156h9kmv9jsmstb6/image_1b7k0qtepmls15v3rjv19691om39.png" alt="image_1b7k0qtepmls15v3rjv19691om39.png-86kB"></p>
<p>è€Œæ–¹æ³•å¼•ç”¨ï¼Œ<strong><em>method reference</em></strong> å…¶å®å°±æ˜¯lambdaè¡¨è¾¾å¼ä¸€ç§è¯­æ³•ç³–<br>ä½†æ˜¯ </p>
<blockquote>
<p><strong>ä¸æ˜¯æ‰€æœ‰çš„ lambda è¡¨è¾¾å¼ï¼Œéƒ½å¯ä»¥ç”¨æ–¹æ³•å¼•ç”¨çš„æ–¹å¼æ¥ç¼–å†™</strong><br>å¤æ‚çš„ lambda è¡¨è¾¾å¼è¿˜æ˜¯éœ€è¦è€è€å®å®å†™ç›¸å…³ä»£ç </p>
</blockquote>
<p>æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥åˆ†åˆ«è®²è§£è¿™å››ç§æ–¹æ³•å¼•ç”¨çš„æ–¹å¼</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">        <span class="comment">// ç¬¬ä¸€ç§</span></div><div class="line"></div><div class="line">        Student student1 = <span class="keyword">new</span> Student(<span class="string">"zhumin1"</span>,<span class="number">10</span>);</div><div class="line">        Student student2 = <span class="keyword">new</span> Student(<span class="string">"zhumin2"</span>,<span class="number">20</span>);</div><div class="line">        Student student3 = <span class="keyword">new</span> Student(<span class="string">"zhumin3"</span>,<span class="number">40</span>);</div><div class="line">        Student student4 = <span class="keyword">new</span> Student(<span class="string">"zhumin4"</span>,<span class="number">80</span>);</div><div class="line"></div><div class="line">        List&lt;Student&gt; students = Arrays.asList(student1, student2, student3, student4);</div><div class="line"></div><div class="line">        <span class="comment">// jdk 1.8 çš„æ–°æ–¹æ³•  List ä¸­æ–°å¢åŠ äº† sort æ–¹æ³•</span></div><div class="line">        <span class="comment">// ä¼ ç»Ÿçš„ lambda è¡¨è¾¾å¼</span></div><div class="line">        students.sort((studentP1, studentP2) -&gt; Student.compareByScore(studentP1, studentP2));</div><div class="line">        <span class="comment">// ç¬¬ä¸€ç§æ–¹æ³•å¼•ç”¨çš„æ–¹å¼ ç±»å::é™æ€æ–¹æ³•å</span></div><div class="line">        <span class="comment">// ä¸éœ€è¦ä¼ å‚æ•°ï¼Œå› ä¸ºå¯ä»¥è‡ªåŠ¨æ¨æ–­å‡º Student ç±»å‹</span></div><div class="line">        students.sort(Student::compareByScore);</div><div class="line"></div><div class="line"></div><div class="line">        <span class="comment">// ç¬¬äºŒç§ å¯¹è±¡åç§°::æ–¹æ³•åç§°</span></div><div class="line">        <span class="comment">// å…¶å®å’Œç¬¬ä¸€ç§å¾ˆç±»ä¼¼</span></div><div class="line">        StudentComparator studentComparator = <span class="keyword">new</span> StudentComparator();</div><div class="line"></div><div class="line">        students.sort((studentP1, studentP2) -&gt; studentComparator.comparator(studentP1, studentP2));</div><div class="line">        <span class="comment">// å¯¹è±¡åç§°::æ–¹æ³•åç§° (æ–¹æ³•å¼•ç”¨çš„ç¬¬äºŒç§æ–¹å¼)</span></div><div class="line">        students.sort(studentComparator::comparator);</div><div class="line"></div><div class="line"></div><div class="line">        <span class="comment">// ç¬¬ä¸‰ç§æ–¹æ³• ç±»å::å®ä¾‹æ–¹æ³•</span></div><div class="line">        <span class="comment">/**</span></div><div class="line">         * æ¯”è¾ƒéš¾ç†è§£çš„çš„åœ°æ–¹æ˜¯ï¼Œä½ ä¼šçœ‹åˆ°è°ƒç”¨çš„å‡½æ•°ï¼Œå’Œ lambda è¡¨è¾¾å¼éœ€è¦çš„å‚æ•°ä¸ªæ•°ä¸ä¸€è‡´ï¼Œ ä¼šå°‘ä¸€ä¸ª</div><div class="line">         * è€Œä¸”ç±»åæ˜¯æ²¡æ³•è°ƒç”¨æ–¹æ³•åçš„</div><div class="line">         * è€Œç†è§£æ–¹å¼æ˜¯ï¼šè°ƒç”¨æ–¹æ³•çš„å®ä¾‹ï¼Œå°±æ˜¯ä¼ å…¥lambda è¡¨è¾¾å¼çš„ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œè€Œå‰©ä¸‹æ‰€æœ‰å‚æ•°ï¼Œéƒ½ä½œä¸º è°ƒç”¨çš„å®ä¾‹æ–¹æ³• çš„å‚æ•°</div><div class="line">         * æˆ‘ä»¬çœ‹ä¸‹é¢çš„ä¾‹å­ ï¼Œ Student ç±»è°ƒç”¨çš„æ˜¯å…¶çš„å®ä¾‹æ–¹æ³• compareï¼ˆStudentï¼‰ åªæœ‰ä¸€ä¸ªå‚æ•°</div><div class="line">         * è€Œ List çš„é»˜è®¤æ–¹æ³•éœ€è¦çš„ Comparator çš„å‡½æ•°å¼æ¥å£éœ€è¦ä¸¤ä¸ªå‚æ•°ï¼Œçœ‹ä¼¼å¯¹åº”ä¸ä¸Šï¼Œè€Œä¸”ï¼Œç±»åä¹Ÿæ— æ³•è°ƒç”¨å®ä¾‹æ–¹æ³•</div><div class="line">         * å®é™…æ˜¯ï¼Œä¼ å…¥çš„ç¬¬ä¸€å‚æ•°å°±æ˜¯ comareï¼ˆstudentï¼‰è¿™ä¸ªå‡½æ•°çš„è°ƒç”¨è€…ï¼Œè€Œç¬¬äºŒä¸ªå‚æ•°ä»¥åŠåç»­æ‰€æœ‰çš„å‚æ•°ï¼ˆå¦‚æœæœ‰è·Ÿå¤šä¹Ÿæ˜¯ä¸€æ ·ï¼‰ï¼Œæ˜¯ä½œä¸ºå®ä¾‹æ–¹æ³•çš„å‚æ•°ä¼ å…¥</div><div class="line">         * æ‰€ä»¥å°‘ä¸€ä¸ªå‚æ•°ä¹Ÿæ²¡ä»€ä¹ˆ</div><div class="line">         * è€Œæ›´ä¸ºå…³é”®çš„æ˜¯è¿™ä¸ªå°±æ˜¯ä¸€ä¸ªè¯­æ³•ç³–ï¼Œä¸ºäº†ç®€åŒ–ä»£ç è€Œç”Ÿã€‚ç†è§£å°±å¥½</div><div class="line">         * å¦‚æ­¤ä¸€æ¥ï¼› è¿™ä¸ªç¬¬ä¸‰ç§æ–¹å¼å°±å¾ˆå¥½ç†è§£äº†</div><div class="line">         *</div><div class="line">         * ç±»å::å®ä¾‹æ–¹æ³•</div><div class="line">         * å³ lambda è¡¨è¾¾å¼çš„ç¬¬ä¸€å‚æ•°å°±æ˜¯ å®ä¾‹æ–¹æ³• çš„è°ƒç”¨è€…ï¼Œåç»­æ‰€æœ‰çš„å‚æ•°å°±æ˜¯ å®ä¾‹æ–¹æ³•çš„ä¼ å…¥å‚æ•°</div><div class="line">         */</div><div class="line">        students.sort(Student::compare);</div><div class="line"></div><div class="line">        <span class="comment">// å†çœ‹ä¸€ä¸ªä¾‹å­</span></div><div class="line">        List&lt;String&gt; cities = Arrays.asList(<span class="string">"haha"</span>,<span class="string">"lala"</span>,<span class="string">"nihao"</span>,<span class="string">"memeda"</span>);</div><div class="line">        <span class="comment">// å¯¹æ¯”äºŒè€…</span></div><div class="line">        Collections.sort(cities, (city1, city2) -&gt; city1.compareToIgnoreCase(city2));</div><div class="line">        Collections.sort(cities, String::compareToIgnoreCase);</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">        <span class="comment">// å¯¹äºç¬¬å››ç§ï¼Œæ„é€ æ–¹æ³•å¼•ç”¨ï¼Œå¯¹äºå¸¦å‚æ•°å’Œä¸å¸¦å‚æ•°çš„éƒ½å¯ä»¥ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨çš„è¿›è¡Œè…¿çŸ­</span></div><div class="line">        MethodRefrenceTest methodRefrenceTest = <span class="keyword">new</span> MethodRefrenceTest();</div><div class="line">        <span class="comment">// ç‚¹å‡» new çœ‹çœ‹ä¼šè·³åˆ°é‚£ä¸ªæ–¹æ³•é‡Œå»</span></div><div class="line">        methodRefrenceTest.getName(String::<span class="keyword">new</span>);</div><div class="line">        <span class="comment">// ç‚¹å‡» new çœ‹çœ‹ä¼šè·³åˆ°é‚£ä¸ªæ–¹æ³•é‡Œå»</span></div><div class="line">        methodRefrenceTest.getName2(<span class="string">"haa"</span>, String::<span class="keyword">new</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">(Supplier&lt;String&gt; supplier)</span>  </span>&#123;</div><div class="line">        <span class="keyword">return</span> supplier.get() + <span class="string">"haha"</span>;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName2</span><span class="params">(String name, Function&lt;String ,String&gt; stringFunction)</span> </span>&#123;</div><div class="line">        <span class="keyword">return</span> stringFunction.apply(name);</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;æ–¹æ³•åº”ç”¨å…¶å®æ˜¯ jdk 8 ä¸­çš„å¯¹äº  &lt;em&gt;lambda&lt;/em&gt; è¡¨è¾¾å¼ç»™äºˆçš„ä¸€ç§ &lt;strong&gt;è¯­æ³•ç³–&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è€Œæ–¹æ³•å¼•ç”¨ä¸€å…±åˆ†ä¸º 4 ç§ï¼›&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;1 &lt;code&gt;ç±»å::é™æ€æ–¹æ³•å&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;2 &lt;code&gt;å¯¹è±¡å::æ–¹æ³•å&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;3 &lt;code&gt;ç±»å::å®ä¾‹æ–¹æ³•å&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;4 &lt;code&gt;æ„é€ æ–¹æ³•å¼•ç”¨::new&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
      <category term="coding life" scheme="http://yoursite.com/tags/coding-life/"/>
    
      <category term="java8" scheme="http://yoursite.com/tags/java8/"/>
    
  </entry>
  
  <entry>
    <title>jdk8-1-å‡½æ•°å¼æ¥å£&amp;lambdaè¡¨è¾¾å¼</title>
    <link href="http://yoursite.com/2017/02/11/jdk8-1-%E5%87%BD%E6%95%B0%E5%BC%8F%E6%8E%A5%E5%8F%A3-lambda%E8%A1%A8%E8%BE%BE%E5%BC%8F/"/>
    <id>http://yoursite.com/2017/02/11/jdk8-1-å‡½æ•°å¼æ¥å£-lambdaè¡¨è¾¾å¼/</id>
    <published>2017-02-11T07:00:25.000Z</published>
    <updated>2017-04-14T07:13:39.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1-lmabdaè¡¨è¾¾å¼"><a href="#1-lmabdaè¡¨è¾¾å¼" class="headerlink" title="1 lmabdaè¡¨è¾¾å¼"></a>1 lmabdaè¡¨è¾¾å¼</h3><p>é¦–å…ˆçœ‹ä¸¤æ®µå¯¹æ¯”ä»£ç :<br>ä¸ºjbutton æ·»åŠ ä¸€ä¸ªæ—¶é—´ç›‘å¬å™¨<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// è€å†™æ³•: åŒ¿åå†…éƒ¨ç±»</span></div><div class="line">jButton.addActionListener(<span class="keyword">new</span> AbstractAction() &#123;</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">actionPerformed</span><span class="params">(ActionEvent e)</span> </span>&#123;</div><div class="line">        System.out.println(<span class="string">"Hello Button"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;);</div><div class="line">        </div><div class="line"><span class="comment">// lambda è¡¨è¾¾å¼å†™æ³•</span></div><div class="line">jButton.addActionListener(e -&gt; System.out.println(<span class="string">"Hello Button"</span>));</div></pre></td></tr></table></figure></p>
<a id="more"></a>
<p>å¯¹æ¯”ä¸¤ä¸ªå†™æ³•ï¼Œlambdaè¡¨è¾¾å¼çš„å†™æ³•ä¼šç®€å•å¾ˆå¤šï¼Œå¦‚æœä½ æœ‰å¤šè¡Œå¤„ç†é€»è¾‘ï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// åŠ ä¸ªå¤§æ‹¬å·</span></div><div class="line">jButton.addActionListener(e -&gt;&#123;</div><div class="line">    System.out.println(<span class="string">"Hello Button!!!!"</span>);</div><div class="line">    System.out.println(<span class="string">"Hello Button2!!!!"</span>);</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>è¿™é‡Œçš„eï¼Œæ²¡æœ‰å£°æ˜ç±»å‹ï¼Œå¹¶ä¸æ˜¯è¡¨ç¤ºjava ä¸æ˜¯ä¸€ä¸ªé™æ€è¯­è¨€äº†ï¼Œè€Œæ˜¯ï¼Œç¼–è¯‘å™¨çš„ç±»å‹æ¨æ–­å‘Šè¯‰å¯ä»¥æ¨æ–­å‡ºæ¥è¿™ä¸ª <code>e</code> çš„ç±»å‹è‚¯å®šæ˜¯ä¸€ä¸ª <code>AbstractAction</code>, æ‰€ä»¥æ— éœ€å»å†™ï¼Œå½“ç„¶å¦‚å†™ä¸Šä¹Ÿæ²¡æœ‰é—®é¢˜ï¼Œéœ€è¦åŠ ä¸Šæ‹¬å·</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">jButton.addActionListener((AbstractAction e) -&gt;&#123;</div><div class="line">    System.out.println(<span class="string">"Hello Button!!!!"</span>);</div><div class="line">    System.out.println(<span class="string">"Hello Button2!!!!"</span>);</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>æ‰€ä»¥ <strong>lambda</strong> è¡¨è¾¾å¼çš„åŸºæœ¬ç»“æ„å¦‚ä¸‹ï¼ˆæ ¹æ®å•ä¸ªå‚æ•°å’Œå•ä¸ªæ“ä½œå¯ä»¥æœ‰ä¸€å®šçš„çœç•¥ï¼‰<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">(event e1, event e2 ...) -&gt; &#123;</div><div class="line">    action1;</div><div class="line">    action2;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>ä¸€å¼€å§‹å¯èƒ½ä¸æ˜¯ç‰¹åˆ«å¥½ç†è§£ï¼Œæˆ‘ä»¬å¯ä»¥ç»“åˆ <strong>java8</strong> æ–°å¢çš„å¦ä¸€ä¸ªç‰¹æ€§ <strong>å‡½æ•°å¼æ¥å£</strong> æ¥ä¸€èµ·ç†è§£ä¸ºä½•æˆ‘ä»¬å¯ä»¥å¦‚æ­¤ç¼–å†™ä»£ç </p>
<h3 id="2-å‡½æ•°å¼æ¥å£"><a href="#2-å‡½æ•°å¼æ¥å£" class="headerlink" title="2 å‡½æ•°å¼æ¥å£"></a>2 å‡½æ•°å¼æ¥å£</h3><p>ä»€ä¹ˆå«å‡½æ•°å¼æ¥å£å‘¢ï¼Ÿ å‡½æ•°å¼æ¥å£æ˜¯ <code>jdk1.8</code> ä¸­æ–°å¢çš„ä¸€ä¸ªæ¥å£ç±»å‹ï¼Œä¸ºæ­¤è¿˜æ–°å¢äº†ä¸€ä¸ªæ³¨è§£ <code>@FunctionalInterface</code> ç”¨äºæ ‡æ³¨å‡½æ•°æ¥å£ï¼›æˆ‘ä»¬é€šè¿‡é˜…è¯» <code>@FunctionalInterface</code> çš„ <em>jdk</em> æ–‡æ¡£æ¥è¿›è¡Œæ¦‚å¿µè®¤çŸ¥ã€‚æ€»ç»“èµ·æ¥ï¼š</p>
<ul>
<li>å½“ä¸€ä¸ªæ¥å£ æœ‰ä¸”åªæœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œå¹¶ä¸”è¿™ä¸ªæŠ½è±¡æ–¹æ³•ä¸æ˜¯ç»§æ‰¿è‡ª <code>Object</code> çš„æ–¹æ³•ï¼Œå°±ä¼šè¢«å½“åšä¸€ä¸ª <strong>å‡½æ•°å¼æ¥å£</strong></li>
<li>å½“ä¸€ä¸ªæ¥å£è¢«  <code>@FunctionalInterface</code> æ³¨è§£æ—¶ï¼Œå¯ä»¥å½“åšä¸€ä¸ªå‡½æ•°å¼æ¥å£</li>
<li>å½“ä¸€ä¸ªæ¥å£è¢«  <code>@FunctionalInterface</code> æ³¨è§£ï¼Œä½†ä¸æ»¡è¶³ç¬¬ä¸€ä¸ªæ¡ä»¶çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨ä¼šæŠ¥é”™ã€‚</li>
<li>å½“ä¸€ä¸ªæ¥å£ æ²¡æœ‰è¢« <code>@FunctionalInterface</code> æ³¨è§£æ ‡æ³¨ï¼Œä½†æ˜¯æ»¡è¶³å‡½æ•°å¼æ¥å£çš„æ¡ä»¶ï¼Œä¹Ÿä¼šè¢«å½“åšå‡½æ•°å¼æ¥å£</li>
</ul>
<blockquote>
<p>è¿™é‡Œçš„ç¬¬ä¸€æ¡ååŠéƒ¨åˆ†å¾ˆé‡è¦ï¼Œå¦‚æœä¸€ä¸ªæ¥å£ï¼Œæœ‰ä¸¤ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œä½†æ˜¯å…¶ä¸­ä¸€ä¸ªæ˜¯ç»§æ‰¿è‡ª <code>Object</code> ç±»ï¼ˆå› ä¸ºå…¶å®ä¸‡ç±»å¸ˆç¥–ï¼‰, ä»–ä»ç„¶æ˜¯ä¸€ä¸ªå‡½æ•°å¼æ¥å£ã€‚</p>
</blockquote>
<p>ä¾‹å¦‚ä»¥ä¸‹å®ä¾‹å°±æ˜¯ä¸€ä¸ªå®Œæ•´çš„å‡½æ•°å¼æ¥å£ï¼Œå³ä½¿ä»–æœ‰2ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œä½†æ˜¯toStringæ˜¯ç»§æ‰¿è‡ª <code>Object</code> çš„æ–¹æ³•ï¼Œæ‰€ä»¥ä¸ä¼šç®—ä½œå‡½æ•°å¼æ¥å£çš„æŠ½è±¡æ–¹æ³•ï¼Œæ‰€ä»¥å…¶ä¸­çš„ <code>test()</code> æ–¹æ³•, æ˜¯å‡½æ•°å¼æ¥å£è®¤å®šçš„å”¯ä¸€çš„æŠ½è±¡æ–¹æ³•ã€‚<br>åŒç†ï¼Œå¦‚æœä¸‹é¢çš„ä¾‹å­åªæœ‰ <code>toString()</code> æ–¹æ³•ï¼Œè€Œæ²¡æœ‰ <code>test()</code> æ–¹æ³•ï¼ŒåŒæ—¶åˆæœ‰  <code>@FunctionalInterface</code> æ³¨è§£çš„è¯ï¼Œé‚£ä¹ˆç¼–è¯‘å™¨ä¼šæŠ¥é”™ã€‚<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@FunctionalInterface</span></div><div class="line"><span class="class"><span class="keyword">interface</span> <span class="title">MyInterface</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * å‡½æ•°å¼æ¥å£ï¼Œåªèƒ½æœ‰å”¯ä¸€çš„æŠ½è±¡æ–¹æ³•</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * å› ä¸ºæ”¹æŠ½è±¡æ–¹æ³•ï¼Œç»§æ‰¿è‡ª Objectï¼Œæ‰€ä»¥ä¸ç®—å‡½æ•°å¼æ¥å£çš„æŠ½è±¡æ–¹æ³•</div><div class="line">     * æ•…è€Œï¼Œæ¥å£å¯ä»¥ç®—ä½œä¸€ä¸ªå‡½æ•°å¼æ¥å£</div><div class="line">     */</div><div class="line">    <span class="function">String <span class="title">toString</span><span class="params">()</span></span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>æˆ‘ä»¬å¯ä»¥çœ‹ä¸€ä¸‹  <code>@FunctionalInterface</code> çš„jdkæ–‡æ¡£ï¼Œé‡Œé¢æœ‰ä¸€å¥: </p>
<center><img src="http://static.zybuluo.com/zhumin1990719/xgz9c76x5q7q1fa3fyvrzilz/image_1b4cpml3c13mn1cju14uurjun9v9.png" alt="image_1b4cpml3c13mn1cju14uurjun9v9.png-24.9kB"></center>

<p>æ„æ€å°±æ˜¯è¯´ï¼Œå‡½æ•°å¼æ¥å£çš„å®ç°ï¼Œå¯ä»¥é€šè¿‡ <code>lambda</code> è¡¨è¾¾å¼ <strong>æ–¹æ³•å¼•ç”¨</strong> ä»¥åŠ <strong>æ„é€ æ–¹æ³•å¼•ç”¨</strong> çš„æ–¹å¼æ¥å®ç°ã€‚å…¶å®æˆ‘ä»¬ä¸Šé¢çš„ <code>lambda</code> è¡¨è¾¾å¼çš„ä¾‹å­ï¼Œå°±æ˜¯å®ç°çš„å‡½æ•°å¼æ¥å£ã€‚æˆ‘ä»¬æ¥æ–°å†™ä¸€ä¸ªä¾‹å­ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test2</span> </span>&#123;</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">testInterface</span><span class="params">(MyInterface myInterface)</span> </span>&#123;</div><div class="line">        System.out.println(<span class="string">"start ------------------"</span>);</div><div class="line">        myInterface.test();</div><div class="line">        System.out.println(<span class="string">"end --------------------"</span>);</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</div><div class="line">        Test2 test2 = <span class="keyword">new</span> Test2();</div><div class="line">        <span class="comment">/*</span></div><div class="line">         * å› ä¸ºå‡½æ•°å¼æ¥å£çš„é‡Œå”¯ä¸€çš„æŠ½è±¡æ–¹æ³•testé‡Œé¢ï¼Œæ²¡æœ‰å‚æ•°</div><div class="line">         * ä½†æ˜¯ï¼ˆï¼‰ä¸èƒ½çœç•¥</div><div class="line">         * å‚è€ƒTest1 ç¨‹åºé‡Œé¢çš„Jframe é‡Œçš„ActionListener</div><div class="line">         */</div><div class="line">        test2.testInterface(() -&gt; &#123;</div><div class="line">            System.out.println(<span class="string">"å‡½æ•°å¼æ¥å£æ¥å£å®ç°"</span>);</div><div class="line">        &#125;);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œ<code>testInterface</code> æ–¹æ³•éœ€è¦ä¼ é€’ä¸€ä¸ª <code>testInterface</code><br>çš„æ¥å£ï¼Œè€Œæˆ‘ä»¬ä½¿ç”¨çš„æ–¹å¼å°±æ˜¯ <code>lambda</code> è¡¨è¾¾å¼æ¥å®ç°äº†ä¸€ä¸ªå‡½æ•°å¼æ¥å£ã€‚ å¯ä»¥è¿ç”¨ä¸‹é¢çš„å½¢å¼æ¥ç†è§£ã€‚</p>
<blockquote>
<p>(å‡½æ•°å¼æ¥å£å”¯ä¸€çš„æŠ½è±¡æ–¹æ³•çš„å‚æ•°åˆ—è¡¨) -&gt; {å”¯ä¸€æŠ½è±¡å‡½æ•°çš„å®ç°}</p>
</blockquote>
<p>è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹æœ€å¼€å§‹çš„é‚£ä¸ªç»™ <strong>button</strong> åŠ  action çš„ä¾‹å­ã€‚<br>å…¶å®å®ç°å°±æ˜¯ <code>ActionListener</code> è¿™ä¸ªå‡½æ•°å¼æ¥å£çš„å”¯ä¸€çš„æŠ½è±¡æ–¹æ³•ï¼š<br><img src="http://static.zybuluo.com/zhumin1990719/uy91dk519fbykpnmbovocu5h/image_1b4cq5u2j1548e4eif0l1t1t48m.png" alt="image_1b4cq5u2j1548e4eif0l1t1t48m.png-35.9kB"><br>è™½ç„¶è¯¥ç±»æ²¡æœ‰ <code>@FunctionalInterface</code> æ³¨è§£ï¼Œä½†æ˜¯æ»¡è¶³æ¡ä»¶ï¼Œåªæœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œæ‰€ä»¥ä»–ä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°å¼æ¥å£ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å»ä½¿ç”¨ <code>lambda</code> è¡¨è¾¾å¼å»å®ç°ä»–ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;1-lmabdaè¡¨è¾¾å¼&quot;&gt;&lt;a href=&quot;#1-lmabdaè¡¨è¾¾å¼&quot; class=&quot;headerlink&quot; title=&quot;1 lmabdaè¡¨è¾¾å¼&quot;&gt;&lt;/a&gt;1 lmabdaè¡¨è¾¾å¼&lt;/h3&gt;&lt;p&gt;é¦–å…ˆçœ‹ä¸¤æ®µå¯¹æ¯”ä»£ç :&lt;br&gt;ä¸ºjbutton æ·»åŠ ä¸€ä¸ªæ—¶é—´ç›‘å¬å™¨&lt;br&gt;&lt;figure class=&quot;highlight java&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;6&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;7&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;8&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;9&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;10&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// è€å†™æ³•: åŒ¿åå†…éƒ¨ç±»&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;jButton.addActionListener(&lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; AbstractAction() &amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;meta&quot;&gt;@Override&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &lt;span class=&quot;function&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;actionPerformed&lt;/span&gt;&lt;span class=&quot;params&quot;&gt;(ActionEvent e)&lt;/span&gt; &lt;/span&gt;&amp;#123;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        System.out.println(&lt;span class=&quot;string&quot;&gt;&quot;Hello Button&quot;&lt;/span&gt;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;    &amp;#125;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&amp;#125;);&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;        &lt;/div&gt;&lt;div class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// lambda è¡¨è¾¾å¼å†™æ³•&lt;/span&gt;&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;jButton.addActionListener(e -&amp;gt; System.out.println(&lt;span class=&quot;string&quot;&gt;&quot;Hello Button&quot;&lt;/span&gt;));&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="coding life" scheme="http://yoursite.com/tags/coding-life/"/>
    
      <category term="java8" scheme="http://yoursite.com/tags/java8/"/>
    
  </entry>
  
  <entry>
    <title>new start</title>
    <link href="http://yoursite.com/2017/01/11/new-start/"/>
    <id>http://yoursite.com/2017/01/11/new-start/</id>
    <published>2017-01-11T13:42:13.000Z</published>
    <updated>2017-04-14T06:58:29.000Z</updated>
    
    <content type="html"><![CDATA[<p>é‡æ–°å¼€å§‹ç»´æŠ¤è¿™ä¸ªç½‘ç«™ã€‚è®©è‡ªå·±é…å¾—ä¸Šè¿™ä¸ªä¸é”™çš„åŸŸå <code>movingon.cn!</code></p>
<a id="more"></a>
<p>æˆ‘14å¹´ä¹°äº†è¿™ä¸ªåŸŸåï¼Œæœ¬æ¥æƒ³è‡ªå·±è¦å¥½å¥½åšï¼Œå®åœ¨ä¸è¡Œï¼Œè¿™åŸŸåä¹Ÿæ˜¯ä¸€ä¸ªä¸é”™çš„ç£ä¿ƒã€‚</p>
<p>ç„¶è€Œï¼Œè‡ªå·±ç»´æŠ¤äº†ä¸€æ®µæ—¶é—´ä¹‹åï¼Œå°±å¿˜è®°äº†è¦å»ç»´æŠ¤ã€‚</p>
<p>ä½†æ˜¯è¿™ä¸€æ¬¡ï¼Œæˆ‘ç”¨è¿™é‡Œè®°å½•è‡ªå·±çš„æŠ€æœ¯æˆé•¿ä»¥åŠä¸ªäººæ„Ÿæ‚Ÿï¼Œä½œä¸ºè‡ªå·±çš„æˆé•¿çš„è®°å½•ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;é‡æ–°å¼€å§‹ç»´æŠ¤è¿™ä¸ªç½‘ç«™ã€‚è®©è‡ªå·±é…å¾—ä¸Šè¿™ä¸ªä¸é”™çš„åŸŸå &lt;code&gt;movingon.cn!&lt;/code&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="é¸¡æ±¤" scheme="http://yoursite.com/tags/%E9%B8%A1%E6%B1%A4/"/>
    
  </entry>
  
</feed>
